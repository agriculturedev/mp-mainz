(window.webpackJsonp=window.webpackJsonp||[]).push([[92,496,497,498,499],{199:function(S,L,d){var w=Object.create,s=Object.defineProperty,h=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,y=(a,t,e)=>t in a?s(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,p=(a,t)=>{for(var e in t||(t={}))m.call(t,e)&&y(a,e,t[e]);if(P)for(var e of P(t))M.call(t,e)&&y(a,e,t[e]);return a},u=(a,t)=>{for(var e in t)s(a,e,{get:t[e],enumerable:!0})},v=(a,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of g(t))!m.call(a,r)&&r!==e&&s(a,r,{get:()=>t[r],enumerable:!(o=h(t,r))||o.enumerable});return a},f=(a,t,e)=>(e=a!=null?w(D(a)):{},v(t||!a||!a.__esModule?s(e,"default",{value:a,enumerable:!0}):e,a)),_=a=>v(s({},"__esModule",{value:!0}),a),O={};u(O,{default:()=>l}),S.exports=_(O);var A=f(d(3840)),I=f(d(3841)),R=f(d(3842)),T=f(d(3697)),l={namespaced:!0,state:p({},T.default),mutations:I.default,getters:A.default,actions:R.default}},3697:function(S,L){var d=Object.defineProperty,w=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,g=(p,u)=>{for(var v in u)d(p,v,{get:u[v],enumerable:!0})},P=(p,u,v,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let _ of s(u))!h.call(p,_)&&_!==v&&d(p,_,{get:()=>u[_],enumerable:!(f=w(u,_))||f.enumerable});return p},D=p=>P(d({},"__esModule",{value:!0}),p),m={};g(m,{default:()=>y}),S.exports=D(m);var y={active:!1,id:"SdpAddon",name:"SDP Download",icon:"bi-download",isVisibleInMenu:!0,deactivateGFI:!0,renderToSidebar:!0,renderToWindow:!1,resizableWindow:!0,initialWidth:500,wmsRasterLayerId:"4707",formats:[{id:"NAS",label:"additional:modules.tools.sdpdownload.nasLabel",isSelected:!0,desc:"additional:modules.tools.sdpdownload.nasDescription",fileId:"nas"},{id:"DWG_310",label:"additional:modules.tools.sdpdownload.dwg310Label",isSelected:!1,desc:"additional:modules.tools.sdpdownload.dwg310Description",fileId:"dwg310"},{id:"DWG_320",label:"additional:modules.tools.sdpdownload.dwg320Label",isSelected:!1,desc:"additional:modules.tools.sdpdownload.dwg320Description",fileId:"dwg320"},{id:"JPG",label:"additional:modules.tools.sdpdownload.jpgLabel",isSelected:!1,desc:"additional:modules.tools.sdpdownload.jpgDescription",fileId:"jpg"}],selectedFormat:"NAS",compressDataId:"compressData_nodejs",wfsRasterParams:{url:"https://geodienste.hamburg.de/HH_WFS_Uebersicht_Kachelbezeichnungen",request:"GetFeature",service:"WFS",version:"1.1.0",typename:"app:lgv_kachel_dk5_1km_utm"},wfsRaster:{},graphicalSelectModel:{},graphicalSelectStatus:!0,selectedRasterLimit:9,rasterNames:[],selectFormat:"additional:modules.tools.sdpdownload.selectFormat",howToChooseTiles:"additional:modules.tools.sdpdownload.howToChooseTiles",downloadDataPackage:"additional:modules.tools.sdpdownload.downloadDataPackage",specialDownloads:"additional:modules.tools.sdpdownload.specialDownloads",neuwerkDataPackage:"additional:modules.tools.sdpdownload.neuwerkDataPackage",scharhoernDataPackage:"additional:modules.tools.sdpdownload.scharhoernDataPackage",tileOverview310:"additional:modules.tools.sdpdownload.tileOverview310",tileOverview320:"additional:modules.tools.sdpdownload.tileOverview320",pleaseSelectTiles:"additional:modules.tools.sdpdownload.pleaseSelectTiles",failedToDownload:"additional:modules.tools.sdpdownload.failedToDownload",details:"additional:modules.tools.sdpdownload.details",serviceNotResponding:"additional:modules.tools.sdpdownload.serviceNotResponding",error:"additional:modules.tools.sdpdownload.alerts.error",info:"additional:modules.tools.sdpdownload.alerts.info",tooManyTilesSelected:"additional:modules.tools.sdpdownload.tooManyTilesSelected"}},3840:function(S,L,d){var w=Object.create,s=Object.defineProperty,h=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,y=(l,a,t)=>a in l?s(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,p=(l,a)=>{for(var t in a||(a={}))m.call(a,t)&&y(l,t,a[t]);if(P)for(var t of P(a))M.call(a,t)&&y(l,t,a[t]);return l},u=(l,a)=>{for(var t in a)s(l,t,{get:a[t],enumerable:!0})},v=(l,a,t,e)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of g(a))!m.call(l,o)&&o!==t&&s(l,o,{get:()=>a[o],enumerable:!(e=h(a,o))||e.enumerable});return l},f=(l,a,t)=>(t=l!=null?w(D(l)):{},v(a||!l||!l.__esModule?s(t,"default",{value:l,enumerable:!0}):t,l)),_=l=>v(s({},"__esModule",{value:!0}),l),O={};u(O,{default:()=>T}),S.exports=_(O);var A=d(10),I=f(d(3697)),T=p({},(0,A.generateSimpleGetters)(I.default))},3841:function(S,L,d){var w=Object.create,s=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptor,P=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,o,r)=>o in e?s(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,v=(e,o)=>{for(var r in o||(o={}))y.call(o,r)&&u(e,r,o[r]);if(m)for(var r of m(o))p.call(o,r)&&u(e,r,o[r]);return e},f=(e,o)=>h(e,P(o)),_=(e,o)=>{for(var r in o)s(e,r,{get:o[r],enumerable:!0})},O=(e,o,r,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of D(o))!y.call(e,i)&&i!==r&&s(e,i,{get:()=>o[i],enumerable:!(n=g(o,i))||n.enumerable});return e},A=(e,o,r)=>(r=e!=null?w(M(e)):{},O(o||!e||!e.__esModule?s(r,"default",{value:e,enumerable:!0}):r,e)),I=e=>O(s({},"__esModule",{value:!0}),e),R={};_(R,{default:()=>t}),S.exports=I(R);var T=d(10),l=A(d(3697)),t=f(v({},(0,T.generateSimpleMutations)(l.default)),{applyTranslationKey:(e,o)=>{o&&o.indexOf("translate#")>-1&&(e.name=o.substr(10))},setSelectedAreaGeoJson:(e,o)=>{o&&(e.graphicalSelectModel.attributes.selectedAreaGeoJson=o)}})},3842:function(S,L,d){(function(w,s){var h=Object.create,g=Object.defineProperty,P=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,m=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,y=(t,e)=>{for(var o in e)g(t,o,{get:e[o],enumerable:!0})},p=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of D(e))!M.call(t,n)&&n!==o&&g(t,n,{get:()=>e[n],enumerable:!(r=P(e,n))||r.enumerable});return t},u=(t,e,o)=>(o=t!=null?h(m(t)):{},p(e||!t||!t.__esModule?g(o,"default",{value:t,enumerable:!0}):o,t)),v=t=>p(g({},"__esModule",{value:!0}),t),f=(t,e,o)=>new Promise((r,n)=>{var i=c=>{try{b(o.next(c))}catch(N){n(N)}},j=c=>{try{b(o.throw(c))}catch(N){n(N)}},b=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,j);b((o=o.apply(t,e)).next())}),_={};y(_,{default:()=>a}),S.exports=v(_);var O=u(d(90)),A=d(58),I=u(d(4568)),R=d(4269),T=u(d(25)),a={addModelsByAttributesToModelList:function(t,e){w.request("ModelList","getModelsByAttributes",{id:e}).length===0&&w.trigger("ModelList","addModelsByAttributes",{id:e})},setModelAttributesByIdToModelList:function(t,e){w.trigger("ModelList","setModelAttributesById",e.layerId,{isSelected:e.isActive,isVisibleInMap:e.isActive})},toggleRasterLayer:function({getters:t,dispatch:e}){const o=t.wmsRasterLayerId,r=t.active;e("addModelsByAttributesToModelList",o),e("setModelAttributesByIdToModelList",{layerId:o,isActive:r})},loadWfsRaster:function({getters:t,dispatch:e}){const o=t.wfsRasterParams,r={Service:o.service,Version:o.version,Request:o.request,TypeName:o.typename};let n={};T.default.get(o.url,{params:r,headers:{"Content-Type":"text/xml"},responseType:"document"}).then(i=>{e("readFeatures",i.data)}).catch(i=>{n={category:s.t(t.error),content:s.t(t.downloadError),displayClass:"error"},e("Alerting/addSingleAlert",n,{root:!0}),console.error(i.response)})},readFeatures:function({commit:t},e){const o=new A.WFS,r=o.readFeatures(e);t("setWfsRaster",r)},calculateSelectedRasterNames:function(t){return f(this,arguments,function*({getters:e,dispatch:o,commit:r,rootState:n}){const i=e.wfsRaster,j=n.GraphicalSelect.selectedAreaGeoJson,b=[];if(j&&j.coordinates){const c=(0,R.polygon)([j.coordinates[0]]);i.forEach(N=>f(this,null,function*(){const x=yield o("GraphicalSelect/featureToGeoJson",N,{root:!0}),F=(0,R.polygon)([x.coordinates[0]]);(0,I.default)(c,F)&&(yield o("addFeaturenameToRasternames",{feature:N,rasterNames:b}))}))}r("setRasterNames",b)})},addFeaturenameToRasternames:function(t,e){if(e.feature&&e.rasterNames){const o=e.feature.getProperties().kachel;e.rasterNames.find(n=>n===o)===void 0&&e.rasterNames.push(o)}},requestCompressedData:function(t){return f(this,arguments,function*({getters:e,dispatch:o}){const r={};o("calculateSelectedRasterNames").then(()=>o("checkRasterNamesAmount").then(n=>{if(n===!0){const i=[];e.rasterNames.forEach(b=>{const c=b.substring(0,2)+"0"+b.substring(2,4)+"0";i.push(c)}),r.query="kacheln="+i.join("\xA7")+"&type="+e.selectedFormat,r.downloadName="zip_"+e.selectedFormat+"_"+i.sort()[0]+".zip",o("doRequest",r)}}))})},checkRasterNamesAmount:function({getters:t,dispatch:e}){const o=t.rasterNames;let r={},n={};return o.length>t.selectedRasterLimit?(r={category:s.t(t.info),content:s.t(t.tooManyTilesSelected,{tilesCount:o.length,maxTiles:t.selectedRasterLimit}),displayClass:"info"},e("Alerting/addSingleAlert",r,{root:!0}),O.default.hide(),!1):o.length===0?(n={category:s.t(t.info),content:"<strong>"+t.pleaseSelectTiles+"</strong>",displayClass:"info"},e("Alerting/addSingleAlert",n,{root:!0}),!1):!0},requestCompressIslandData:function({getters:t,dispatch:e},o){const r={downloadName:"zip_"+t.selectedFormat+"_"+o+".zip",query:"insel="+o+"&type="+t.selectedFormat};e("doRequest",r)},requestCompressRasterOverviewData:function({dispatch:t},e){const o={downloadName:"U__Kachel_Uebersichten_UTM_Kachel_1KM_"+e+".dwg",query:"system=utm&type="+e};t("doRequest",o)},doRequest:function({getters:t,dispatch:e,commit:o},r){const n=w.request("RestReader","getServiceById",t.compressDataId).get("url"),i=T.default.create();let j={},b={};i.interceptors.request.use(function(c){return O.default.show(15e3),c}),i.interceptors.response.use(function(c){return O.default.hide(),c}),i.post(n,r.query,{timeout:15e3,responseType:"blob"}).then(c=>{if(o("setGraphicalSelectStatus",!0),c.status!==200)j={category:s.t(t.error),content:"<strong>"+s.t(t.failedToDownload)+"</strong> <br> <small>"+s.t(t.details)+" "+c.data+"</small>",displayClass:"error"},e("Alerting/addSingleAlert",j,{root:!0});else{const N=new Blob([c.data]),x=window.URL.createObjectURL(N),F=document.createElement("a");window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(N,r.downloadName):(F.href=x,F.setAttribute("download",r.downloadName),document.body.appendChild(F),F.click(),F.remove())}}).catch(()=>{b={category:s.t(t.error),content:"<strong>"+s.t(t.failedToDownload)+"</strong> <br> <small>"+s.t(t.details)+" "+s.t(t.serviceNotResponding)+"</small>",displayClass:"error"},o("setGraphicalSelectStatus",!1),e("Alerting/addSingleAlert",b,{root:!0})})}}}).call(this,d(3),d(6))}}]);
