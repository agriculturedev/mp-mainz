(window.webpackJsonp=window.webpackJsonp||[]).push([[554,552,553,555,556],{3703:function(h,x){var s=Object.defineProperty,y=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,b=Object.prototype.hasOwnProperty,V=(p,u)=>{for(var v in u)s(p,v,{get:u[v],enumerable:!0})},g=(p,u,v,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of l(u))!b.call(p,d)&&d!==v&&s(p,d,{get:()=>u[d],enumerable:!(f=y(u,d))||f.enumerable});return p},j=p=>g(s({},"__esModule",{value:!0}),p),_={};V(_,{default:()=>m}),h.exports=j(_);var m={active:!1,id:"vcOblique",name:"additional:menu.tools.obliqueViewer",icon:"bi-camera-fill",styleId:"",renderToWindow:!1,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!0,initialWidth:500,obliqueViewerURL:"",lastCoordinates:"",defaultMapMarkerStyleId:"",heading:0,serviceId:"oblique",dataYear:""}},3853:function(h,x,s){var y=Object.create,l=Object.defineProperty,b=Object.getOwnPropertyDescriptor,V=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,m=(r,t,e)=>t in r?l(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,p=(r,t)=>{for(var e in t||(t={}))_.call(t,e)&&m(r,e,t[e]);if(g)for(var e of g(t))S.call(t,e)&&m(r,e,t[e]);return r},u=(r,t)=>{for(var e in t)l(r,e,{get:t[e],enumerable:!0})},v=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of V(t))!_.call(r,i)&&i!==e&&l(r,i,{get:()=>t[i],enumerable:!(o=b(t,i))||o.enumerable});return r},f=(r,t,e)=>(e=r!=null?y(j(r)):{},v(t||!r||!r.__esModule?l(e,"default",{value:r,enumerable:!0}):e,r)),d=r=>v(l({},"__esModule",{value:!0}),r),M={};u(M,{default:()=>n}),h.exports=d(M);var E=s(10),I=f(s(3703)),n=p({},(0,E.generateSimpleMutations)(I.default))},3883:function(h,x,s){(function(y){var l=Object.create,b=Object.defineProperty,V=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,j=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,S=(a,n)=>{for(var r in n)b(a,r,{get:n[r],enumerable:!0})},m=(a,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of g(n))!_.call(a,e)&&e!==r&&b(a,e,{get:()=>n[e],enumerable:!(t=V(n,e))||t.enumerable});return a},p=(a,n,r)=>(r=a!=null?l(j(a)):{},m(n||!a||!a.__esModule?b(r,"default",{value:a,enumerable:!0}):r,a)),u=a=>m(b({},"__esModule",{value:!0}),a),v=(a,n,r)=>new Promise((t,e)=>{var o=O=>{try{c(r.next(O))}catch(q){e(q)}},i=O=>{try{c(r.throw(O))}catch(q){e(q)}},c=O=>O.done?t(O.value):Promise.resolve(O.value).then(o,i);c((r=r.apply(a,n)).next())}),f={};S(f,{default:()=>I}),h.exports=u(f);var d=p(s(45)),M=p(s(68)),I={initObliqueView({commit:a,dispatch:n,getters:r,rootGetters:t}){const e=document.getElementById("obliqueIframe");e?.addEventListener("load",()=>{const o=new MutationObserver(()=>{const i=e.contentWindow.document.getElementById("header"),c=e.contentWindow.document.getElementsByClassName("vcm-btn-icon single-first maptool-btn vcm-btn-base-default vcm-btn-base-splash-hover vcm-border vcm-border-dye03 vcm-btn-icon-font-default vcm-btn-icon-font-dye01-hover vcm-no-select vcm-btn-map-Oblique")[0],O=e.contentWindow.document.getElementsByClassName("overview-map-wrap")[0],q=document.getElementById("obliqueIframe").contentWindow.vcs,w=q.vcm.Framework.getInstance().getActiveMap(),C=mapCollection.getMap("2D").getPixelFromCoordinate(t["Maps/initialCenter"]),D=e.contentWindow.document.getElementsByClassName("mapElement vcm-map-top");if(a("Maps/setClickCartesianCoordinate",C,{root:!0}),w&&(w.olMap.on("moveend",()=>{const P=d.default.transform("EPSG:4326",mapCollection.getMapView("2D").getProjection().getCode(),w.getViewPointSync().groundPosition);P.every((N,U)=>Math.round(N)!==Math.round(r.lastCoordinates[U])&&(N-r.lastCoordinates[U]>50||N-r.lastCoordinates[U]<-50)?(n("setObliqueView",P),!1):!0)}),w.imageChanged.addEventListener(()=>v(this,null,function*(){const P=yield w.getViewPoint();P.heading!==r.heading&&n("MapMarker/rotatePointMarker",P.heading,{root:!0}),a("setHeading",P.heading)}))),i){i.style.display="none",i.parentElement.style.display="none";for(const P of D)P.style.top=0;a("setDefaultMapMarkerStyleId",t["MapMarker/pointStyleId"]),r.styleId&&a("MapMarker/setPointStyleId",r.styleId,{root:!0}),n("setObliqueView",t["Maps/center"]),o.disconnect()}c&&(c.style.display="none"),O&&(O.style.display="none")});o.observe(e.contentDocument,{childList:!0,subtree:!0})})},resetObliqueViewer({commit:a,dispatch:n,getters:r}){a("MapMarker/setPointStyleId",r.defaultMapMarkerStyleId,{root:!0}),n("MapMarker/removePointMarker",null,{root:!0})},setObliqueView(a){return v(this,arguments,function*({commit:n,dispatch:r,getters:t},e=[]){var o,i,c,O,q;const w=(i=(o=document.getElementById("obliqueIframe"))==null?void 0:o.contentWindow)==null?void 0:i.vcs,C=(O=(c=w?.vcm)==null?void 0:c.Framework)==null?void 0:O.getInstance(),D=C?.getActiveMap();let P={};C&&e&&Array.isArray(e)&&e.length>1?(n("setLastCoordinates",e),(q=w?.vcm)!=null&&q.util&&(P=new w.vcm.util.ViewPoint({groundPosition:d.default.transform(mapCollection.getMapView("2D").getProjection().getCode(),"EPSG:4326",e),heading:t.heading,distance:D.getViewPointSync().distance})),yield C?.getActiveMap().gotoViewPoint(P),r("MapMarker/placingPointMarker",e,{root:!0}),r("MapMarker/rotatePointMarker",t.heading,{root:!0})):r("Alerting/addSingleAlert","<strong>"+y.t("additional:modules.tools.vcOblique.frameworkUndefined")+"</strong><br><small>"+y.t("additional:modules.tools.vcOblique.frameworkUndefinedMessage")+"</small>",{root:!0})})},setObliqueViewerURL({commit:a,dispatch:n,getters:r,rootGetters:t},e){if(e&&Array.isArray(e)&&e.length>1){const o=d.default.transform(mapCollection.getMapView("2D").getProjection().getCode(),"EPSG:4326",e),i=o[0]+", "+o[1];document.location.hostname==="localhost"?a("setObliqueViewerURL",(0,M.default)(t.getRestServiceById(r.serviceId).url)+"?groundPosition="+i):n("setObliqueViewerURLWithSameHostname",i)}},setObliqueViewerURLWithSameHostname({commit:a,dispatch:n,getters:r,rootGetters:t},e){const o=t.getRestServiceById(r.serviceId).url,i=new URL(o),c=new URL(document.location.href);i.hostname===c.hostname?a("setObliqueViewerURL",o+"?groundPosition="+e):document.location.hostname.startsWith("www.")&&document.location.hostname.split("www.")[1]===i.hostname?n("setObliqueViewerURLWithReplacedHostname",{urlParts:i.pathname,startCoordinates:e}):n("Alerting/addSingleAlert",y.t("additional:modules.tools.vcOblique.sameOrigin"),{root:!0})},setObliqueViewerURLWithReplacedHostname({commit:a},{urlParts:n,startCoordinates:r}){let t="https:/";n.forEach((e,o)=>{o===0?t=t+"/"+document.location.hostname:t=t+"/"+e}),a("setObliqueViewerURL",t+"?groundPosition="+r)}}}).call(this,s(6))},3884:function(h,x,s){var y=Object.create,l=Object.defineProperty,b=Object.getOwnPropertyDescriptor,V=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,m=(r,t,e)=>t in r?l(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,p=(r,t)=>{for(var e in t||(t={}))_.call(t,e)&&m(r,e,t[e]);if(g)for(var e of g(t))S.call(t,e)&&m(r,e,t[e]);return r},u=(r,t)=>{for(var e in t)l(r,e,{get:t[e],enumerable:!0})},v=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of V(t))!_.call(r,i)&&i!==e&&l(r,i,{get:()=>t[i],enumerable:!(o=b(t,i))||o.enumerable});return r},f=(r,t,e)=>(e=r!=null?y(j(r)):{},v(t||!r||!r.__esModule?l(e,"default",{value:r,enumerable:!0}):e,r)),d=r=>v(l({},"__esModule",{value:!0}),r),M={};u(M,{default:()=>n}),h.exports=d(M);var E=s(10),I=f(s(3703)),n=p({},(0,E.generateSimpleGetters)(I.default))},4092:function(h,x,s){var y=Object.create,l=Object.defineProperty,b=Object.getOwnPropertyDescriptor,V=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,m=(t,e,o)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))_.call(e,o)&&m(t,o,e[o]);if(g)for(var o of g(e))S.call(e,o)&&m(t,o,e[o]);return t},u=(t,e)=>{for(var o in e)l(t,o,{get:e[o],enumerable:!0})},v=(t,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of V(e))!_.call(t,c)&&c!==o&&l(t,c,{get:()=>e[c],enumerable:!(i=b(e,c))||i.enumerable});return t},f=(t,e,o)=>(o=t!=null?y(j(t)):{},v(e||!t||!t.__esModule?l(o,"default",{value:t,enumerable:!0}):o,t)),d=t=>v(l({},"__esModule",{value:!0}),t),M={};u(M,{default:()=>r}),h.exports=d(M);var E=f(s(3883)),I=f(s(3853)),a=f(s(3884)),n=f(s(3703)),r={namespaced:!0,state:p({},n.default),mutations:I.default,actions:E.default,getters:a.default}}}]);
