(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{4158:function(re,pe,U){var C=Object.defineProperty,k=Object.getOwnPropertyDescriptor,J=Object.getOwnPropertyNames,O=Object.prototype.hasOwnProperty,M=(h,f)=>{for(var v in f)C(h,v,{get:f[v],enumerable:!0})},te=(h,f,v,x)=>{if(f&&typeof f=="object"||typeof f=="function")for(let z of J(f))!O.call(h,z)&&z!==v&&C(h,z,{get:()=>f[z],enumerable:!(x=k(f,z))||x.enumerable});return h},F=h=>te(C({},"__esModule",{value:!0}),h),G={};M(G,{areaFactors:()=>q,bearingToAzimuth:()=>ae,convertArea:()=>be,convertLength:()=>Ee,degreesToRadians:()=>_e,earthRadius:()=>S,factors:()=>$,feature:()=>A,featureCollection:()=>w,geometry:()=>H,geometryCollection:()=>xe,isNumber:()=>le,isObject:()=>D,lengthToDegrees:()=>de,lengthToRadians:()=>se,lineString:()=>y,lineStrings:()=>E,multiLineString:()=>R,multiPoint:()=>B,multiPolygon:()=>me,point:()=>W,points:()=>Z,polygon:()=>_,polygons:()=>l,radiansToDegrees:()=>we,radiansToLength:()=>K,round:()=>ne,unitsFactors:()=>X,validateBBox:()=>Pe,validateId:()=>fe}),re.exports=F(G);var S=63710088e-1,$={centimeters:S*100,centimetres:S*100,degrees:S/111325,feet:S*3.28084,inches:S*39.37,kilometers:S/1e3,kilometres:S/1e3,meters:S,metres:S,miles:S/1609.344,millimeters:S*1e3,millimetres:S*1e3,nauticalmiles:S/1852,radians:1,yards:S*1.0936},X={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/S,yards:1.0936133},q={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function A(h,f,v){v===void 0&&(v={});var x={type:"Feature"};return(v.id===0||v.id)&&(x.id=v.id),v.bbox&&(x.bbox=v.bbox),x.properties=f||{},x.geometry=h,x}function H(h,f,v){switch(v===void 0&&(v={}),h){case"Point":return W(f).geometry;case"LineString":return y(f).geometry;case"Polygon":return _(f).geometry;case"MultiPoint":return B(f).geometry;case"MultiLineString":return R(f).geometry;case"MultiPolygon":return me(f).geometry;default:throw new Error(h+" is invalid")}}function W(h,f,v){if(v===void 0&&(v={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!le(h[0])||!le(h[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:h};return A(x,f,v)}function Z(h,f,v){return v===void 0&&(v={}),w(h.map(function(x){return W(x,f)}),v)}function _(h,f,v){v===void 0&&(v={});for(var x=0,z=h;x<z.length;x++){var ee=z[x];if(ee.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var he=0;he<ee[ee.length-1].length;he++)if(ee[ee.length-1][he]!==ee[0][he])throw new Error("First and last Position are not equivalent.")}var Se={type:"Polygon",coordinates:h};return A(Se,f,v)}function l(h,f,v){return v===void 0&&(v={}),w(h.map(function(x){return _(x,f)}),v)}function y(h,f,v){if(v===void 0&&(v={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:h};return A(x,f,v)}function E(h,f,v){return v===void 0&&(v={}),w(h.map(function(x){return y(x,f)}),v)}function w(h,f){f===void 0&&(f={});var v={type:"FeatureCollection"};return f.id&&(v.id=f.id),f.bbox&&(v.bbox=f.bbox),v.features=h,v}function R(h,f,v){v===void 0&&(v={});var x={type:"MultiLineString",coordinates:h};return A(x,f,v)}function B(h,f,v){v===void 0&&(v={});var x={type:"MultiPoint",coordinates:h};return A(x,f,v)}function me(h,f,v){v===void 0&&(v={});var x={type:"MultiPolygon",coordinates:h};return A(x,f,v)}function xe(h,f,v){v===void 0&&(v={});var x={type:"GeometryCollection",geometries:h};return A(x,f,v)}function ne(h,f){if(f===void 0&&(f=0),f&&!(f>=0))throw new Error("precision must be a positive number");var v=Math.pow(10,f||0);return Math.round(h*v)/v}function K(h,f){f===void 0&&(f="kilometers");var v=$[f];if(!v)throw new Error(f+" units is invalid");return h*v}function se(h,f){f===void 0&&(f="kilometers");var v=$[f];if(!v)throw new Error(f+" units is invalid");return h/v}function de(h,f){return we(se(h,f))}function ae(h){var f=h%360;return f<0&&(f+=360),f}function we(h){var f=h%(2*Math.PI);return f*180/Math.PI}function _e(h){var f=h%360;return f*Math.PI/180}function Ee(h,f,v){if(f===void 0&&(f="kilometers"),v===void 0&&(v="kilometers"),!(h>=0))throw new Error("length must be a positive number");return K(se(h,f),v)}function be(h,f,v){if(f===void 0&&(f="meters"),v===void 0&&(v="kilometers"),!(h>=0))throw new Error("area must be a positive number");var x=q[f];if(!x)throw new Error("invalid original units");var z=q[v];if(!z)throw new Error("invalid final units");return h/x*z}function le(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function D(h){return!!h&&h.constructor===Object}function Pe(h){if(!h)throw new Error("bbox is required");if(!Array.isArray(h))throw new Error("bbox must be an Array");if(h.length!==4&&h.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");h.forEach(function(f){if(!le(f))throw new Error("bbox must only contain numbers")})}function fe(h){if(!h)throw new Error("id is required");if(["string","number"].indexOf(typeof h)===-1)throw new Error("id must be a number or a string")}},4168:function(re,pe,U){var C=Object.defineProperty,k=Object.getOwnPropertyDescriptor,J=Object.getOwnPropertyNames,O=Object.prototype.hasOwnProperty,M=(l,y)=>{for(var E in y)C(l,E,{get:y[E],enumerable:!0})},te=(l,y,E,w)=>{if(y&&typeof y=="object"||typeof y=="function")for(let R of J(y))!O.call(l,R)&&R!==E&&C(l,R,{get:()=>y[R],enumerable:!(w=k(y,R))||w.enumerable});return l},F=l=>te(C({},"__esModule",{value:!0}),l),G={};M(G,{collectionOf:()=>W,containsNumber:()=>q,featureOf:()=>H,geojsonType:()=>A,getCoord:()=>$,getCoords:()=>X,getGeom:()=>Z,getType:()=>_}),re.exports=F(G);var S=U(4158);function $(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function X(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function q(l){if(l.length>1&&(0,S.isNumber)(l[0])&&(0,S.isNumber)(l[1]))return!0;if(Array.isArray(l[0])&&l[0].length)return q(l[0]);throw new Error("coordinates must only contain numbers")}function A(l,y,E){if(!y||!E)throw new Error("type and name required");if(!l||l.type!==y)throw new Error("Invalid input to "+E+": must be a "+y+", given "+l.type)}function H(l,y,E){if(!l)throw new Error("No feature passed");if(!E)throw new Error(".featureOf() requires a name");if(!l||l.type!=="Feature"||!l.geometry)throw new Error("Invalid input to "+E+", Feature with geometry required");if(!l.geometry||l.geometry.type!==y)throw new Error("Invalid input to "+E+": must be a "+y+", given "+l.geometry.type)}function W(l,y,E){if(!l)throw new Error("No featureCollection passed");if(!E)throw new Error(".collectionOf() requires a name");if(!l||l.type!=="FeatureCollection")throw new Error("Invalid input to "+E+", FeatureCollection required");for(var w=0,R=l.features;w<R.length;w++){var B=R[w];if(!B||B.type!=="Feature"||!B.geometry)throw new Error("Invalid input to "+E+", Feature with geometry required");if(!B.geometry||B.geometry.type!==y)throw new Error("Invalid input to "+E+": must be a "+y+", given "+B.geometry.type)}}function Z(l){return l.type==="Feature"?l.geometry:l}function _(l,y){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}},4171:function(re,pe,U){var C=Object.create,k=Object.defineProperty,J=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,M=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty,F=(_,l)=>{for(var y in l)k(_,y,{get:l[y],enumerable:!0})},G=(_,l,y,E)=>{if(l&&typeof l=="object"||typeof l=="function")for(let w of O(l))!te.call(_,w)&&w!==y&&k(_,w,{get:()=>l[w],enumerable:!(E=J(l,w))||E.enumerable});return _},S=(_,l,y)=>(y=_!=null?C(M(_)):{},G(l||!_||!_.__esModule?k(y,"default",{value:_,enumerable:!0}):y,_)),$=_=>G(k({},"__esModule",{value:!0}),_),X={};F(X,{default:()=>Z}),re.exports=$(X);var q=S(U(4185)),A=U(4168),H=U(4158);function W(_,l,y){y===void 0&&(y={});var E=(0,A.getGeom)(_),w=(0,A.getGeom)(l),R=q.default.union(E.coordinates,w.coordinates);return R.length===0?null:R.length===1?(0,H.polygon)(R[0],y.properties):(0,H.multiPolygon)(R,y.properties)}var Z=W},4185:function(re,pe,U){(function(C){(function(k,J){re.exports=J()})(pe,function(){"use strict";function k(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function J(o,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function O(o,r,e){return r&&J(o.prototype,r),e&&J(o,e),o}/**
 * splaytree v3.1.0
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */var M=function(){function o(r,e){this.next=null,this.key=r,this.data=e,this.left=null,this.right=null}return o}();function te(o,r){return o>r?1:o<r?-1:0}function F(o,r,e){for(var t=new M(null,null),n=t,i=t;;){var u=e(o,r.key);if(u<0){if(r.left===null)break;if(e(o,r.left.key)<0){var s=r.left;if(r.left=s.right,s.right=r,r=s,r.left===null)break}i.left=r,i=r,r=r.left}else if(u>0){if(r.right===null)break;if(e(o,r.right.key)>0){var s=r.right;if(r.right=s.left,s.left=r,r=s,r.right===null)break}n.right=r,n=r,r=r.right}else break}return n.right=r.left,i.left=r.right,r.left=t.right,r.right=t.left,r}function G(o,r,e,t){var n=new M(o,r);if(e===null)return n.left=n.right=null,n;e=F(o,e,t);var i=t(o,e.key);return i<0?(n.left=e.left,n.right=e,e.left=null):i>=0&&(n.right=e.right,n.left=e,e.right=null),n}function S(o,r,e){var t=null,n=null;if(r){r=F(o,r,e);var i=e(r.key,o);i===0?(t=r.left,n=r.right):i<0?(n=r.right,r.right=null,t=r):(t=r.left,r.left=null,n=r)}return{left:t,right:n}}function $(o,r,e){return r===null?o:(o===null||(r=F(o.key,r,e),r.left=o),r)}function X(o,r,e,t,n){if(o){t(""+r+(e?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+n(o)+`
`);var i=r+(e?"    ":"\u2502   ");o.left&&X(o.left,i,!1,t,n),o.right&&X(o.right,i,!0,t,n)}}var q=function(){function o(r){r===void 0&&(r=te),this._root=null,this._size=0,this._comparator=r}return o.prototype.insert=function(r,e){return this._size++,this._root=G(r,e,this._root,this._comparator)},o.prototype.add=function(r,e){var t=new M(r,e);this._root===null&&(t.left=t.right=null,this._size++,this._root=t);var n=this._comparator,i=F(r,this._root,n),u=n(r,i.key);return u===0?this._root=i:(u<0?(t.left=i.left,t.right=i,i.left=null):u>0&&(t.right=i.right,t.left=i,i.right=null),this._size++,this._root=t),this._root},o.prototype.remove=function(r){this._root=this._remove(r,this._root,this._comparator)},o.prototype._remove=function(r,e,t){var n;if(e===null)return null;e=F(r,e,t);var i=t(r,e.key);return i===0?(e.left===null?n=e.right:(n=F(r,e.left,t),n.right=e.right),this._size--,n):e},o.prototype.pop=function(){var r=this._root;if(r){for(;r.left;)r=r.left;return this._root=F(r.key,this._root,this._comparator),this._root=this._remove(r.key,this._root,this._comparator),{key:r.key,data:r.data}}return null},o.prototype.findStatic=function(r){for(var e=this._root,t=this._comparator;e;){var n=t(r,e.key);if(n===0)return e;n<0?e=e.left:e=e.right}return null},o.prototype.find=function(r){return this._root&&(this._root=F(r,this._root,this._comparator),this._comparator(r,this._root.key)!==0)?null:this._root},o.prototype.contains=function(r){for(var e=this._root,t=this._comparator;e;){var n=t(r,e.key);if(n===0)return!0;n<0?e=e.left:e=e.right}return!1},o.prototype.forEach=function(r,e){for(var t=this._root,n=[],i=!1;!i;)t!==null?(n.push(t),t=t.left):n.length!==0?(t=n.pop(),r.call(e,t),t=t.right):i=!0;return this},o.prototype.range=function(r,e,t,n){for(var i=[],u=this._comparator,s=this._root,a;i.length!==0||s;)if(s)i.push(s),s=s.left;else{if(s=i.pop(),a=u(s.key,e),a>0)break;if(u(s.key,r)>=0&&t.call(n,s))return this;s=s.right}return this},o.prototype.keys=function(){var r=[];return this.forEach(function(e){var t=e.key;return r.push(t)}),r},o.prototype.values=function(){var r=[];return this.forEach(function(e){var t=e.data;return r.push(t)}),r},o.prototype.min=function(){return this._root?this.minNode(this._root).key:null},o.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},o.prototype.minNode=function(r){if(r===void 0&&(r=this._root),r)for(;r.left;)r=r.left;return r},o.prototype.maxNode=function(r){if(r===void 0&&(r=this._root),r)for(;r.right;)r=r.right;return r},o.prototype.at=function(r){for(var e=this._root,t=!1,n=0,i=[];!t;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),n===r)return e;n++,e=e.right}else t=!0;return null},o.prototype.next=function(r){var e=this._root,t=null;if(r.right){for(t=r.right;t.left;)t=t.left;return t}for(var n=this._comparator;e;){var i=n(r.key,e.key);if(i===0)break;i<0?(t=e,e=e.left):e=e.right}return t},o.prototype.prev=function(r){var e=this._root,t=null;if(r.left!==null){for(t=r.left;t.right;)t=t.right;return t}for(var n=this._comparator;e;){var i=n(r.key,e.key);if(i===0)break;i<0?e=e.left:(t=e,e=e.right)}return t},o.prototype.clear=function(){return this._root=null,this._size=0,this},o.prototype.toList=function(){return W(this._root)},o.prototype.load=function(r,e,t){e===void 0&&(e=[]),t===void 0&&(t=!1);var n=r.length,i=this._comparator;if(t&&l(r,e,0,n-1,i),this._root===null)this._root=A(r,e,0,n),this._size=n;else{var u=_(this.toList(),H(r,e),i);n=this._size+n,this._root=Z({head:u},0,n)}return this},o.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(o.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),o.prototype.toString=function(r){r===void 0&&(r=function(n){return String(n.key)});var e=[];return X(this._root,"",!0,function(t){return e.push(t)},r),e.join("")},o.prototype.update=function(r,e,t){var n=this._comparator,i=S(r,this._root,n),u=i.left,s=i.right;n(r,e)<0?s=G(e,t,s,n):u=G(e,t,u,n),this._root=$(u,s,n)},o.prototype.split=function(r){return S(r,this._root,this._comparator)},o}();function A(o,r,e,t){var n=t-e;if(n>0){var i=e+Math.floor(n/2),u=o[i],s=r[i],a=new M(u,s);return a.left=A(o,r,e,i),a.right=A(o,r,i+1,t),a}return null}function H(o,r){for(var e=new M(null,null),t=e,n=0;n<o.length;n++)t=t.next=new M(o[n],r[n]);return t.next=null,e.next}function W(o){for(var r=o,e=[],t=!1,n=new M(null,null),i=n;!t;)r?(e.push(r),r=r.left):e.length>0?(r=i=i.next=e.pop(),r=r.right):t=!0;return i.next=null,n.next}function Z(o,r,e){var t=e-r;if(t>0){var n=r+Math.floor(t/2),i=Z(o,r,n),u=o.head;return u.left=i,o.head=o.head.next,u.right=Z(o,n+1,e),u}return null}function _(o,r,e){for(var t=new M(null,null),n=t,i=o,u=r;i!==null&&u!==null;)e(i.key,u.key)<0?(n.next=i,i=i.next):(n.next=u,u=u.next),n=n.next;return i!==null?n.next=i:u!==null&&(n.next=u),t.next}function l(o,r,e,t,n){if(!(e>=t)){for(var i=o[e+t>>1],u=e-1,s=t+1;;){do u++;while(n(o[u],i)<0);do s--;while(n(o[s],i)>0);if(u>=s)break;var a=o[u];o[u]=o[s],o[s]=a,a=r[u],r[u]=r[s],r[s]=a}l(o,r,e,s,n),l(o,r,s+1,t,n)}}var y=function(r,e){return r.ll.x<=e.x&&e.x<=r.ur.x&&r.ll.y<=e.y&&e.y<=r.ur.y},E=function(r,e){if(e.ur.x<r.ll.x||r.ur.x<e.ll.x||e.ur.y<r.ll.y||r.ur.y<e.ll.y)return null;var t=r.ll.x<e.ll.x?e.ll.x:r.ll.x,n=r.ur.x<e.ur.x?r.ur.x:e.ur.x,i=r.ll.y<e.ll.y?e.ll.y:r.ll.y,u=r.ur.y<e.ur.y?r.ur.y:e.ur.y;return{ll:{x:t,y:i},ur:{x:n,y:u}}},w=Number.EPSILON;w===void 0&&(w=Math.pow(2,-52));var R=w*w,B=function(r,e){if(-w<r&&r<w&&-w<e&&e<w)return 0;var t=r-e;return t*t<R*r*e?0:r<e?-1:1},me=function(){function o(){k(this,o),this.reset()}return O(o,[{key:"reset",value:function(){this.xRounder=new xe,this.yRounder=new xe}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),o}(),xe=function(){function o(){k(this,o),this.tree=new q,this.round(0)}return O(o,[{key:"round",value:function(e){var t=this.tree.add(e),n=this.tree.prev(t);if(n!==null&&B(t.key,n.key)===0)return this.tree.remove(e),n.key;var i=this.tree.next(t);return i!==null&&B(t.key,i.key)===0?(this.tree.remove(e),i.key):e}}]),o}(),ne=new me,K=function(r,e){return r.x*e.y-r.y*e.x},se=function(r,e){return r.x*e.x+r.y*e.y},de=function(r,e,t){var n={x:e.x-r.x,y:e.y-r.y},i={x:t.x-r.x,y:t.y-r.y},u=K(n,i);return B(u,0)},ae=function(r){return Math.sqrt(se(r,r))},we=function(r,e,t){var n={x:e.x-r.x,y:e.y-r.y},i={x:t.x-r.x,y:t.y-r.y};return K(i,n)/ae(i)/ae(n)},_e=function(r,e,t){var n={x:e.x-r.x,y:e.y-r.y},i={x:t.x-r.x,y:t.y-r.y};return se(i,n)/ae(i)/ae(n)},Ee=function(r,e,t){return e.y===0?null:{x:r.x+e.x/e.y*(t-r.y),y:t}},be=function(r,e,t){return e.x===0?null:{x:t,y:r.y+e.y/e.x*(t-r.x)}},le=function(r,e,t,n){if(e.x===0)return be(t,n,r.x);if(n.x===0)return be(r,e,t.x);if(e.y===0)return Ee(t,n,r.y);if(n.y===0)return Ee(r,e,t.y);var i=K(e,n);if(i==0)return null;var u={x:t.x-r.x,y:t.y-r.y},s=K(u,e)/i,a=K(u,n)/i,c=r.x+a*e.x,g=t.x+s*n.x,p=r.y+a*e.y,d=t.y+s*n.y,m=(c+g)/2,P=(p+d)/2;return{x:m,y:P}},D=function(){O(o,null,[{key:"compare",value:function(e,t){var n=o.comparePoints(e.point,t.point);return n!==0?n:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:fe.compare(e.segment,t.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]);function o(r,e){k(this,o),r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=e}return O(o,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,i=t.length;n<i;n++){var u=t[n];this.point.events.push(u),u.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(n.segment.consumedBy===void 0)for(var i=t+1;i<e;i++){var u=this.point.events[i];u.consumedBy===void 0&&n.otherSE.point.events===u.otherSE.point.events&&n.segment.consume(u.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,n=new Map,i=function(s){var a=s.otherSE;n.set(s,{sine:we(t.point,e.point,a.point),cosine:_e(t.point,e.point,a.point)})};return function(u,s){n.has(u)||i(u),n.has(s)||i(s);var a=n.get(u),c=a.sine,g=a.cosine,p=n.get(s),d=p.sine,m=p.cosine;return c>=0&&d>=0?g<m?1:g>m?-1:0:c<0&&d<0?g<m?-1:g>m?1:0:d<c?-1:d>c?1:0}}}]),o}(),Pe=0,fe=function(){O(o,null,[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,i=t.leftSE.point.x,u=e.rightSE.point.x,s=t.rightSE.point.x;if(s<n)return 1;if(u<i)return-1;var a=e.leftSE.point.y,c=t.leftSE.point.y,g=e.rightSE.point.y,p=t.rightSE.point.y;if(n<i){if(c<a&&c<g)return 1;if(c>a&&c>g)return-1;var d=e.comparePoint(t.leftSE.point);if(d<0)return 1;if(d>0)return-1;var m=t.comparePoint(e.rightSE.point);return m!==0?m:-1}if(n>i){if(a<c&&a<p)return-1;if(a>c&&a>p)return 1;var P=t.comparePoint(e.leftSE.point);if(P!==0)return P;var b=e.comparePoint(t.rightSE.point);return b<0?1:b>0?-1:1}if(a<c)return-1;if(a>c)return 1;if(u<s){var I=t.comparePoint(e.rightSE.point);if(I!==0)return I}if(u>s){var L=e.comparePoint(t.rightSE.point);if(L<0)return 1;if(L>0)return-1}if(u!==s){var T=g-a,Y=u-n,N=p-c,V=s-i;if(T>Y&&N<V)return 1;if(T<Y&&N>V)return-1}return u>s?1:u<s||g<p?-1:g>p?1:e.id<t.id?-1:e.id>t.id?1:0}}]);function o(r,e,t,n){k(this,o),this.id=++Pe,this.leftSE=r,r.segment=this,r.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=r,this.rings=t,this.windings=n}return O(o,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;var u=(e.y-t.y)/i.y,s=t.x+u*i.x;if(e.x===s)return 0;var a=(e.x-t.x)/i.x,c=t.y+a*i.y;return e.y===c?0:e.y<c?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),i=E(t,n);if(i===null)return null;var u=this.leftSE.point,s=this.rightSE.point,a=e.leftSE.point,c=e.rightSE.point,g=y(t,a)&&this.comparePoint(a)===0,p=y(n,u)&&e.comparePoint(u)===0,d=y(t,c)&&this.comparePoint(c)===0,m=y(n,s)&&e.comparePoint(s)===0;if(p&&g)return m&&!d?s:!m&&d?c:null;if(p)return d&&u.x===c.x&&u.y===c.y?null:u;if(g)return m&&s.x===a.x&&s.y===a.y?null:a;if(m&&d)return null;if(m)return s;if(d)return c;var P=le(u,this.vector(),a,e.vector());return P===null||!y(i,P)?null:ne.round(P.x,P.y)}},{key:"split",value:function(e){var t=[],n=e.events!==void 0,i=new D(e,!0),u=new D(e,!1),s=this.rightSE;this.replaceRightSE(u),t.push(u),t.push(i);var a=new o(i,s,this.rings.slice(),this.windings.slice());return D.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),D.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),u.checkForConsuming()),t}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var t=this,n=e;t.consumedBy;)t=t.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var i=o.compare(t,n);if(i!==0){if(i>0){var u=t;t=n,n=u}if(t.prev===n){var s=t;t=n,n=s}for(var a=0,c=n.rings.length;a<c;a++){var g=n.rings[a],p=n.windings[a],d=t.rings.indexOf(g);d===-1?(t.rings.push(g),t.windings.push(p)):t.windings[d]+=p}n.rings=null,n.windings=null,n.consumedBy=t,n.leftSE.consumedBy=t.leftSE,n.rightSE.consumedBy=t.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,u=0,s=this.rings.length;u<s;u++){var a=this.rings[u],c=this.windings[u],g=t.indexOf(a);g===-1?(t.push(a),n.push(c)):n[g]+=c}for(var p=[],d=[],m=0,P=t.length;m<P;m++)if(n[m]!==0){var b=t[m],I=b.poly;if(d.indexOf(I)===-1)if(b.isExterior)p.push(I);else{d.indexOf(I)===-1&&d.push(I);var L=p.indexOf(b.poly);L!==-1&&p.splice(L,1)}}for(var T=0,Y=p.length;T<Y;T++){var N=p[T].multiPoly;i.indexOf(N)===-1&&i.push(N)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Q.type){case"union":{var n=e.length===0,i=t.length===0;this._isInResult=n!==i;break}case"intersection":{var u,s;e.length<t.length?(u=e.length,s=t.length):(u=t.length,s=e.length),this._isInResult=s===Q.numMultiPolys&&u<s;break}case"xor":{var a=Math.abs(e.length-t.length);this._isInResult=a%2===1;break}case"difference":{var c=function(p){return p.length===1&&p[0].isSubject};this._isInResult=c(e)!==c(t);break}default:throw new Error("Unrecognized operation type found ".concat(Q.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,t,n){var i,u,s,a=D.comparePoints(e,t);if(a<0)i=e,u=t,s=1;else if(a>0)i=t,u=e,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));var c=new D(i,!0),g=new D(u,!1);return new o(c,g,[n],[s])}}]),o}(),h=function(){function o(r,e,t){if(k(this,o),!Array.isArray(r)||r.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=t,this.segments=[],typeof r[0][0]!="number"||typeof r[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var n=ne.round(r[0][0],r[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};for(var i=n,u=1,s=r.length;u<s;u++){if(typeof r[u][0]!="number"||typeof r[u][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var a=ne.round(r[u][0],r[u][1]);a.x===i.x&&a.y===i.y||(this.segments.push(fe.fromRing(i,a,this)),a.x<this.bbox.ll.x&&(this.bbox.ll.x=a.x),a.y<this.bbox.ll.y&&(this.bbox.ll.y=a.y),a.x>this.bbox.ur.x&&(this.bbox.ur.x=a.x),a.y>this.bbox.ur.y&&(this.bbox.ur.y=a.y),i=a)}(n.x!==i.x||n.y!==i.y)&&this.segments.push(fe.fromRing(i,n,this))}return O(o,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var i=this.segments[t];e.push(i.leftSE),e.push(i.rightSE)}return e}}]),o}(),f=function(){function o(r,e){if(k(this,o),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new h(r[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var t=1,n=r.length;t<n;t++){var i=new h(r[t],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}return O(o,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var i=this.interiorRings[t].getSweepEvents(),u=0,s=i.length;u<s;u++)e.push(i[u]);return e}}]),o}(),v=function(){function o(r,e){if(k(this,o),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof r[0][0][0]=="number"&&(r=[r])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var t=0,n=r.length;t<n;t++){var i=new f(r[t],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}return O(o,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var i=this.polys[t].getSweepEvents(),u=0,s=i.length;u<s;u++)e.push(i[u]);return e}}]),o}(),x=function(){O(o,null,[{key:"factory",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var u=e[n];if(!(!u.isInResult()||u.ringOut)){for(var s=null,a=u.leftSE,c=u.rightSE,g=[a],p=a.point,d=[];s=a,a=c,g.push(a),a.point!==p;)for(;;){var m=a.getAvailableLinkedEvents();if(m.length===0){var P=g[0].point,b=g[g.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(P.x,",")+" ".concat(P.y,"]. Last matching segment found ends at")+" [".concat(b.x,", ").concat(b.y,"]."))}if(m.length===1){c=m[0].otherSE;break}for(var I=null,L=0,T=d.length;L<T;L++)if(d[L].point===a.point){I=L;break}if(I!==null){var Y=d.splice(I)[0],N=g.splice(Y.index);N.unshift(N[0].otherSE),t.push(new o(N.reverse()));continue}d.push({index:g.length,point:a.point});var V=a.getLeftmostComparator(s);c=m.sort(V)[0].otherSE;break}t.push(new o(g))}}return t}}]);function o(r){k(this,o),this.events=r;for(var e=0,t=r.length;e<t;e++)r[e].segment.ringOut=this;this.poly=null}return O(o,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,i=this.events.length-1;n<i;n++){var u=this.events[n].point,s=this.events[n+1].point;de(u,e,s)!==0&&(t.push(u),e=u)}if(t.length===1)return null;var a=t[0],c=t[1];de(a,e,c)===0&&t.shift(),t.push(t[0]);for(var g=this.isExteriorRing()?1:-1,p=this.isExteriorRing()?0:t.length-1,d=this.isExteriorRing()?t.length:-1,m=[],P=p;P!=d;P+=g)m.push([t[P].x,t[P].y]);return m}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var i=this.events[t];D.compare(e,i)>0&&(e=i)}for(var u=e.segment.prevInResult(),s=u?u.prevInResult():null;;){if(!u)return null;if(!s)return u.ringOut;if(s.ringOut!==u.ringOut)return s.ringOut.enclosingRing()!==u.ringOut?u.ringOut:u.ringOut.enclosingRing();u=s.prevInResult(),s=u?u.prevInResult():null}}}]),o}(),z=function(){function o(r){k(this,o),this.exteriorRing=r,r.poly=this,this.interiorRings=[]}return O(o,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(var t=0,n=this.interiorRings.length;t<n;t++){var i=this.interiorRings[t].getGeom();i!==null&&e.push(i)}return e}}]),o}(),ee=function(){function o(r){k(this,o),this.rings=r,this.polys=this._composePolys(r)}return O(o,[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var i=this.polys[t].getGeom();i!==null&&e.push(i)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var u=e[n];if(!u.poly)if(u.isExteriorRing())t.push(new z(u));else{var s=u.enclosingRing();s.poly||t.push(new z(s)),s.poly.addInterior(u)}}return t}}]),o}(),he=function(){function o(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.compare;k(this,o),this.queue=r,this.tree=new q(e),this.segments=[]}return O(o,[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;var i=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!i)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var u=i,s=i,a=void 0,c=void 0;a===void 0;)u=this.tree.prev(u),u===null?a=null:u.key.consumedBy===void 0&&(a=u.key);for(;c===void 0;)s=this.tree.next(s),s===null?c=null:s.key.consumedBy===void 0&&(c=s.key);if(e.isLeft){var g=null;if(a){var p=a.getIntersection(t);if(p!==null&&(t.isAnEndpoint(p)||(g=p),!a.isAnEndpoint(p)))for(var d=this._splitSafely(a,p),m=0,P=d.length;m<P;m++)n.push(d[m])}var b=null;if(c){var I=c.getIntersection(t);if(I!==null&&(t.isAnEndpoint(I)||(b=I),!c.isAnEndpoint(I)))for(var L=this._splitSafely(c,I),T=0,Y=L.length;T<Y;T++)n.push(L[T])}if(g!==null||b!==null){var N=null;if(g===null)N=b;else if(b===null)N=g;else{var V=D.comparePoints(g,b);N=V<=0?g:b}this.queue.remove(t.rightSE),n.push(t.rightSE);for(var ve=t.split(N),ie=0,oe=ve.length;ie<oe;ie++)n.push(ve[ie])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=a)}else{if(a&&c){var j=a.getIntersection(c);if(j!==null){if(!a.isAnEndpoint(j))for(var ce=this._splitSafely(a,j),ue=0,ke=ce.length;ue<ke;ue++)n.push(ce[ue]);if(!c.isAnEndpoint(j))for(var ge=this._splitSafely(c,j),ye=0,Oe=ge.length;ye<Oe;ye++)n.push(ge[ye])}}this.tree.remove(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var i=e.split(t);return i.push(n),e.consumedBy===void 0&&this.tree.insert(e),i}}]),o}(),Se=typeof C<"u"&&C.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ie=typeof C<"u"&&C.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Re=function(){function o(){k(this,o)}return O(o,[{key:"run",value:function(e,t,n){Q.type=e,ne.reset();for(var i=[new v(t,!0)],u=0,s=n.length;u<s;u++)i.push(new v(n[u],!1));if(Q.numMultiPolys=i.length,Q.type==="difference")for(var a=i[0],c=1;c<i.length;)E(i[c].bbox,a.bbox)!==null?c++:i.splice(c,1);if(Q.type==="intersection"){for(var g=0,p=i.length;g<p;g++)for(var d=i[g],m=g+1,P=i.length;m<P;m++)if(E(d.bbox,i[m].bbox)===null)return[]}for(var b=new q(D.compare),I=0,L=i.length;I<L;I++)for(var T=i[I].getSweepEvents(),Y=0,N=T.length;Y<N;Y++)if(b.insert(T[Y]),b.size>Se)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var V=new he(b),ve=b.size,ie=b.pop();ie;){var oe=ie.key;if(b.size===ve){var j=oe.segment;throw new Error("Unable to pop() ".concat(oe.isLeft?"left":"right"," SweepEvent ")+"[".concat(oe.point.x,", ").concat(oe.point.y,"] from segment #").concat(j.id," ")+"[".concat(j.leftSE.point.x,", ").concat(j.leftSE.point.y,"] -> ")+"[".concat(j.rightSE.point.x,", ").concat(j.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(b.size>Se)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(V.segments.length>Ie)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ce=V.process(oe),ue=0,ke=ce.length;ue<ke;ue++){var ge=ce[ue];ge.consumedBy===void 0&&b.insert(ge)}ve=b.size,ie=b.pop()}ne.reset();var ye=x.factory(V.segments),Oe=new ee(ye);return Oe.getGeom()}}]),o}(),Q=new Re,Ae=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Q.run("union",r,t)},Ne=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Q.run("intersection",r,t)},Le=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Q.run("xor",r,t)},Te=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Q.run("difference",r,t)},Ce={union:Ae,intersection:Ne,xor:Le,difference:Te};return Ce})}).call(this,U(26))}}]);
