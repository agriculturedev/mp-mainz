(window.webpackJsonp=window.webpackJsonp||[]).push([[456,454,455,457,458],{3689:function(U,R){var f=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,F=Object.prototype.hasOwnProperty,b=(P,v)=>{for(var y in v)f(P,y,{get:v[y],enumerable:!0})},j=(P,v,y,O)=>{if(v&&typeof v=="object"||typeof v=="function")for(let w of d(v))!F.call(P,w)&&w!==y&&f(P,w,{get:()=>v[w],enumerable:!(O=h(v,w))||O.enumerable});return P},A=P=>j(f({},"__esModule",{value:!0}),P),g={};b(g,{default:()=>m}),U.exports=A(g);var m={active:!1,name:"additional:menu.tools.hochWasserPrint",id:"print",printMapMarker:!1,isVisibleInMenu:!0,renderToWindow:!0,resizableWindow:!0,deactivateGFI:!1,filename:"report",mapfishServiceId:"",printServiceId:"",serviceId:"",printService:"mapfish",printAppId:"hochwasserschutz",printHwsId:void 0,printAppCapabilities:"capabilities.json",layoutList:[],currentLayout:void 0,currentLayoutName:"A3 Hochformat",formatList:[],currentFormat:"pdf",scaleList:[],currentScale:void 0,title:"Report",isScaleSelectedManually:!1,isGfiAvailable:!1,gfiAttribute:null,isLegendAvailable:!1,legendAttribute:null,isLegendSelected:!1,isScaleAvailable:!1,autoAdjustScale:!0,scaleAttribute:null,isMapAvailable:!1,mapAttribute:null,layoutMapInfo:[],optimalScale:null,DOTS_PER_INCH:72,INCHES_PER_METER:39.37,icon:"bi-printer-fill",eventListener:void 0,dpiForPdf:200,layoutNameList:[],currentMapScale:"",optimalResolution:"",hintInfoScale:"",visibleLayer:[],invisibleLayer:[],visibleLayerList:[],printLayerList:[],maskStarted:!1,zoomLevel:null,hintInfo:"",serviceUrl:"",printFileReady:!1,printStarted:!1,progressWidth:"width: 0%",fileDownloadUrl:"",fileDownloads:[],outputFormat:"pdf",plotserviceIndex:-1,capabilitiesFilter:{},defaultCapabilitiesFilter:{},useProxy:!1}},3826:function(U,R,f){var h=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,m=(s,t,a)=>t in s?d(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,P=(s,t)=>{for(var a in t||(t={}))g.call(t,a)&&m(s,a,t[a]);if(j)for(var a of j(t))M.call(t,a)&&m(s,a,t[a]);return s},v=(s,t)=>{for(var a in t)d(s,a,{get:t[a],enumerable:!0})},y=(s,t,a,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of b(t))!g.call(s,o)&&o!==a&&d(s,o,{get:()=>t[o],enumerable:!(r=F(t,o))||r.enumerable});return s},O=(s,t,a)=>(a=s!=null?h(A(s)):{},y(t||!s||!s.__esModule?d(a,"default",{value:s,enumerable:!0}):a,s)),w=s=>y(d({},"__esModule",{value:!0}),s),L={};v(L,{default:()=>H}),U.exports=w(L);var N=f(10),E=O(f(3689)),H=P({},(0,N.generateSimpleGetters)(E.default))},3827:function(U,R,f){var h=Object.create,d=Object.defineProperty,F=Object.defineProperties,b=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,v=(r,o,p)=>o in r?d(r,o,{enumerable:!0,configurable:!0,writable:!0,value:p}):r[o]=p,y=(r,o)=>{for(var p in o||(o={}))m.call(o,p)&&v(r,p,o[p]);if(g)for(var p of g(o))P.call(o,p)&&v(r,p,o[p]);return r},O=(r,o)=>F(r,j(o)),w=(r,o)=>{for(var p in o)d(r,p,{get:o[p],enumerable:!0})},L=(r,o,p,C)=>{if(o&&typeof o=="object"||typeof o=="function")for(let W of A(o))!m.call(r,W)&&W!==p&&d(r,W,{get:()=>o[W],enumerable:!(C=b(o,W))||C.enumerable});return r},N=(r,o,p)=>(p=r!=null?h(M(r)):{},L(o||!r||!r.__esModule?d(p,"default",{value:r,enumerable:!0}):p,r)),E=r=>L(d({},"__esModule",{value:!0}),r),I={};w(I,{default:()=>a}),U.exports=E(I);var H=f(10),s=N(f(3689)),a=O(y({},(0,H.generateSimpleMutations)(s.default)),{setAutoAdjustScale:(r,o)=>{r.autoAdjustScale=o,r.isScaleSelectedManually=!1}})},3873:function(U,R,f){(function(h,d){var F=Object.create,b=Object.defineProperty,j=Object.defineProperties,A=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,P=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,O=(i,n,e)=>n in i?b(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e,w=(i,n)=>{for(var e in n||(n={}))v.call(n,e)&&O(i,e,n[e]);if(m)for(var e of m(n))y.call(n,e)&&O(i,e,n[e]);return i},L=(i,n)=>j(i,g(n)),N=(i,n)=>{for(var e in n)b(i,e,{get:n[e],enumerable:!0})},E=(i,n,e,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of M(n))!v.call(i,l)&&l!==e&&b(i,l,{get:()=>n[l],enumerable:!(u=A(n,l))||u.enumerable});return i},I=(i,n,e)=>(e=i!=null?F(P(i)):{},E(n||!i||!i.__esModule?b(e,"default",{value:i,enumerable:!0}):e,i)),H=i=>E(b({},"__esModule",{value:!0}),i),s=(i,n,e)=>new Promise((u,l)=>{var S=_=>{try{c(e.next(_))}catch(J){l(J)}},x=_=>{try{c(e.throw(_))}catch(J){l(J)}},c=_=>_.done?u(_.value):Promise.resolve(_.value).then(S,x);c((e=e.apply(i,n)).next())}),t={};N(t,{default:()=>W}),U.exports=H(t);var a=I(f(25)),r=I(f(68)),o=I(f(3894)),p=I(f(1209)),C=I(f(3829)),W=L(w({},C.default),{sendRequest:function({state:i,dispatch:n},e){const u=i.useProxy?(0,r.default)(e.serviceUrl):e.serviceUrl;(0,a.default)({url:u,type:e.requestType}).then(l=>{Object.prototype.hasOwnProperty.call(e,"index")&&(l.data.index=e.index),n(String(e.onSuccess),l.data)})},activatePrintStarted:function({commit:i}){i("setPrintStarted",!0)},setVisibleLayerList:function({commit:i},n){i("setVisibleLayerList",n)},startPrint:function(i,n){return s(this,arguments,function*({state:e,dispatch:u},l){const S=e.printLayerList,x={layout:e.currentLayoutName,outputFilename:e.filename,outputFormat:e.currentFormat,attributes:{printId:e.printHwsId,map:{dpi:e.dpiForPdf,projection:h.request("MapView","getProjection").getCode(),center:h.request("MapView","getCenter"),scale:e.currentScale}}};let c=o.default,_={};c.setAttributes(x),e.isScaleAvailable&&c.buildScale(e.currentScale),yield c.buildLayers(S),c=(0,p.default)(c,["uniqueIdList"]),_={index:l.index,payload:encodeURIComponent(JSON.stringify(c.defaults)),printAppId:e.printAppId,currentFormat:e.currentFormat,getResponse:l.getResponse},h.trigger("Util","showLoader"),u("createPrintJob",_)})},createPrintJob:function(i,n){return s(this,arguments,function*({state:e,dispatch:u,rootGetters:l,commit:S},x){const c=x,_=c.printAppId||e.printAppId,J=c.format||e.currentFormat;let z="",V="",T=e.serviceUrl;if(e.serviceUrl.includes("/print/")||(T=e.serviceUrl+"print/"),S("setPrintFileReady",!1),e.serviceUrl===""){let D;e.mapfishServiceId!==""?D=l.getRestServiceById(e.mapfishServiceId).url:D=l.getRestServiceById("mapfish").url,D.includes("/print/")||(D=D+"print/"),S("setServiceUrl",D),T=e.serviceUrl}z=e.printService==="plotservice"?T+"/create.json":T+_+"/report."+J,typeof c.getResponse=="function"&&(e.printService==="plotservice"&&(c.payload=yield u("migratePayload",c.payload)),V=yield c.getResponse(z,c.payload)),V.data.index=c.index,u("waitForPrintJob",V.data)})},migratePayload:function({state:i},n){const e={},u=JSON.parse(decodeURIComponent(n.replace(/imageFormat/g,"format")));return e.layout=u.layout,e.srs=u.attributes.map.projection,e.layers=u.attributes.map.layers,e.layers.forEach(l=>{l.styles=[""]}),e.pages=[{center:u.attributes.map.center,scale:String(u.attributes.map.scale),scaleText:"Ca. 1 : "+u.attributes.map.scale,geodetic:!0,dpi:String(u.attributes.map.dpi),mapTitle:u.attributes.title}],e.outputFilename=i.filename,e.outputFormat=i.outputFormat,JSON.stringify(e)},waitForPrintJob:function(i,n){return s(this,arguments,function*({state:e,dispatch:u},l){let S="";e.serviceUrl.includes("/print/")||(S="print/");const x=e.printAppId,c=e.serviceUrl+S+x+"/status/"+l.ref+".json",_={index:l.index,serviceUrl:c,requestType:"GET",onSuccess:"waitForPrintJobSuccess"};u("sendRequest",_)})},waitForPrintJobSuccess:function(i,n){return s(this,arguments,function*({state:e,dispatch:u},l){let S="";if(e.serviceUrl.includes("/print/")||(S="print/"),l.status==="error")u("Alerting/addSingleAlert",d.t("additional:modules.tools.hochWasserPrint.waitForPrintErrorMessage"),{root:!0}),console.error("Error: "+l.error);else if(l.done){const x=l.downloadURL.lastIndexOf("/"),c=l.downloadURL.substr(x);h.trigger("Util","hideLoader"),window.open(e.serviceUrl+S+e.printAppId+"/report"+c)}else setTimeout(()=>{const x=l.downloadURL.lastIndexOf("/"),c=l.downloadURL.substr(x),_=e.serviceUrl+S+e.printAppId+"/status"+c+".json",J={index:l.index,serviceUrl:_,requestType:"GET",onSuccess:"waitForPrintJobSuccess"};u("sendRequest",J)},2e3)})}})}).call(this,f(3),f(6))},4030:function(U,R,f){var h=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,m=(t,a,r)=>a in t?d(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,P=(t,a)=>{for(var r in a||(a={}))g.call(a,r)&&m(t,r,a[r]);if(j)for(var r of j(a))M.call(a,r)&&m(t,r,a[r]);return t},v=(t,a)=>{for(var r in a)d(t,r,{get:a[r],enumerable:!0})},y=(t,a,r,o)=>{if(a&&typeof a=="object"||typeof a=="function")for(let p of b(a))!g.call(t,p)&&p!==r&&d(t,p,{get:()=>a[p],enumerable:!(o=F(a,p))||o.enumerable});return t},O=(t,a,r)=>(r=t!=null?h(A(t)):{},y(a||!t||!t.__esModule?d(r,"default",{value:t,enumerable:!0}):r,t)),w=t=>y(d({},"__esModule",{value:!0}),t),L={};v(L,{default:()=>s}),U.exports=w(L);var N=O(f(3873)),E=O(f(3689)),I=O(f(3826)),H=O(f(3827)),s={namespaced:!0,state:P({},E.default),mutations:H.default,actions:N.default,getters:I.default}}}]);
