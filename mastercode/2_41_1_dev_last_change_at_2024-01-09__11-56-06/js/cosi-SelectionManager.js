(window.webpackJsonp=window.webpackJsonp||[]).push([[57,58,155,156,358,359,360,361,362,422,427,429],{197:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,T=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,h=(p,v,c)=>v in p?_(p,v,{enumerable:!0,configurable:!0,writable:!0,value:c}):p[v]=c,P=(p,v)=>{for(var c in v||(v={}))j.call(v,c)&&h(p,c,v[c]);if(D)for(var c of D(v))E.call(v,c)&&h(p,c,v[c]);return p},l=(p,v)=>{for(var c in v)_(p,c,{get:v[c],enumerable:!0})},e=(p,v,c,a)=>{if(v&&typeof v=="object"||typeof v=="function")for(let d of A(v))!j.call(p,d)&&d!==c&&_(p,d,{get:()=>v[d],enumerable:!(a=w(v,d))||a.enumerable});return p},o=(p,v,c)=>(c=p!=null?i(T(p)):{},e(v||!p||!p.__esModule?_(c,"default",{value:p,enumerable:!0}):c,p)),y=p=>e(_({},"__esModule",{value:!0}),p),b={};l(b,{default:()=>u}),M.exports=y(b);var O=o(s(3811)),f=o(s(3812)),r=o(s(3682)),n=o(s(3813)),u={namespaced:!0,state:P({},r.default),mutations:f.default,getters:O.default,actions:n.default}},223:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,D=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,j=(f,r)=>{for(var n in r)_(f,n,{get:r[n],enumerable:!0})},E=(f,r,n,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let p of A(r))!T.call(f,p)&&p!==n&&_(f,p,{get:()=>r[p],enumerable:!(u=w(r,p))||u.enumerable});return f},h=(f,r,n)=>(n=f!=null?i(D(f)):{},E(r||!f||!f.__esModule?_(n,"default",{value:f,enumerable:!0}):n,f)),P=f=>E(_({},"__esModule",{value:!0}),f),l={};j(l,{default:()=>O}),M.exports=P(l);var e=h(s(5455)),o=h(s(197)),y=h(s(3986)),b=h(s(3987)),O={component:e.default,store:o.default,locales:{de:y.default,en:b.default}}},3649:function(M,L,s){(function(i){var _=Object.defineProperty,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,D=Object.prototype.hasOwnProperty,T=(S,$)=>{for(var J in $)_(S,J,{get:$[J],enumerable:!0})},j=(S,$,J,G)=>{if($&&typeof $=="object"||typeof $=="function")for(let W of A($))!D.call(S,W)&&W!==J&&_(S,W,{get:()=>$[W],enumerable:!(G=w($,W))||G.enumerable});return S},E=S=>j(_({},"__esModule",{value:!0}),S),h={};T(h,{addByMouseHover:()=>I,addFolder:()=>c,addModelsByAttributes:()=>n,addVectorLayer:()=>a,closeAllExpandedFolder:()=>f,getCollection:()=>u,getItemByAttributes:()=>p,getItemsByAttributes:()=>v,getModelByAttributes:()=>b,getServiceUrl:()=>e,groupBy:()=>U,offSearchbar:()=>l,onFeaturesLoaded:()=>x,onResetFeatures:()=>B,onSearchbar:()=>P,onShowAllFeatures:()=>y,onShowFeaturesById:()=>o,removeItem:()=>d,removeModelsById:()=>r,renderTree:()=>O}),M.exports=E(h);function P(S){i.on("Searchbar","hit",S)}function l(){i.off("Searchbar","hit")}function e(S){return i.request("RestReader","getServiceById",S).get("url")}function o(S){i.on("ModelList","showFeaturesById",S)}function y(S){i.on("ModelList","showAllFeatures",S)}function b(S){return i.request("ModelList","getModelByAttributes",S)}function O(){i.trigger("ModelList","renderTree")}function f(){i.trigger("ModelList","closeAllExpandedFolder")}function r(S){i.trigger("ModelList","removeModelsById",S)}function n(S){i.trigger("ModelList","addModelsByAttributes",S)}function u(){return i.request("ModelList","getCollection")}function p(S){return i.request("Parser","getItemByAttributes",S)}function v(S){return i.request("Parser","getItemsByAttributes",S)}function c(S,$,J,G){i.trigger("Parser","addFolder",S,$,J,G)}function a(S,$,J,G,W,Z,H){i.trigger("Parser","addVectorLayer",S,$,J,G,W,Z,H)}function d(S){i.trigger("Parser","removeItem",S)}function x(S){i.on("VectorLayer","featuresLoaded",S)}function B(S){i.on("VectorLayer","resetFeatures",S)}function I(S){i.trigger("MouseHover","add",S)}function U(S,$){return i.request("Util","groupBy",S,$)}}).call(this,s(3))},3650:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,D=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,j=(l,e,o,y)=>{if(e&&typeof e=="object"||typeof e=="function")for(let b of A(e))!T.call(l,b)&&b!==o&&_(l,b,{get:()=>e[b],enumerable:!(y=w(e,b))||y.enumerable});return l},E=(l,e,o)=>(o=l!=null?i(D(l)):{},j(e||!l||!l.__esModule?_(o,"default",{value:l,enumerable:!0}):o,l)),h=E(s(106));function P(l){var e;if(typeof l!="object"||l===null||typeof l.getSource!="function"||typeof((e=l.getSource())==null?void 0:e.getFeatures)!="function")return console.error("utils/layer/getLayerSource: layer must be a layer with a vector source",l),null;const o=l.getSource();return o.constructor===h.default?o.getSource():o}M.exports={getLayerSource:P}},3660:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,D=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,j=(r,n,u,p)=>{if(n&&typeof n=="object"||typeof n=="function")for(let v of A(n))!T.call(r,v)&&v!==u&&_(r,v,{get:()=>n[v],enumerable:!(p=w(n,v))||p.enumerable});return r},E=(r,n,u)=>(u=r!=null?i(D(r)):{},j(n||!r||!r.__esModule?_(u,"default",{value:r,enumerable:!0}):u,r)),h=s(3650),P=E(s(316)),l=s(3649),e=E(s(318)),o=s(5);function y(r,n){r.forEachFeature(u=>{u.getGeometry()!==void 0&&!n.intersectsCoordinate((0,o.getCenter)(u.getGeometry().getExtent()))&&r.removeFeature(u)})}function b(r,n,u,p,v){const c=(0,h.getLayerSource)(r.layer),a=p.typ;c&&(c.clear(),c.getListeners("featuresloadend")&&delete c.listeners_.featuresloadend,a==="WFS"&&c.setUrl(u),a!=="VectorBase"?(c.refresh(),n&&c.on("featuresloadend",function(d){p.renderer==="webgl"&&e.afterLoading(d.target.getFeatures(),r.attributes.styleId,r.attributes.excludeTypesFromParsing,r.attributes.isPointLayer),y(d.target,n),v&&v.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource")})):(c.addFeatures(p.features),n&&(y(c,n),v&&v.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource"))))}function O(r){const n=this instanceof P.default?this:void 0,u=[...(0,l.getItemsByAttributes)({typ:"WFS",isBaseLayer:!1}),...(0,l.getItemsByAttributes)({typ:"GeoJSON",isBaseLayer:!1}),...(0,l.getItemsByAttributes)({typ:"VectorBase",isBaseLayer:!1}),...(0,l.getItemsByAttributes)({typ:"OAF",isBaseLayer:!1})];f(u,r,n)}function f(r,n,u){const p=(0,l.getCollection)(),v=u?.$store.getters["Maps/projectionCode"]||"EPSG:25832";r.forEach(function(c){const a=p.get({id:c.id});if(a){let d=`${a.attributes.url}?service=WFS&version=${a.attributes.version}&request=GetFeature&typeName=${a.attributes.featureType}&srsName=${v}`;d+=n?`&bbox=${n.getExtent().toString()},${v}`:"",a.set("bboxGeometry",n),b(a,n,d,c,u)}else c.bboxGeometry=n})}M.exports={setBBoxToGeom:O,setBboxGeometryToLayer:f}},3682:function(M,L){var s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,A=(P,l)=>{for(var e in l)s(P,e,{get:l[e],enumerable:!0})},D=(P,l,e,o)=>{if(l&&typeof l=="object"||typeof l=="function")for(let y of _(l))!w.call(P,y)&&y!==e&&s(P,y,{get:()=>l[y],enumerable:!(o=i(l,y))||o.enumerable});return P},T=P=>D(s({},"__esModule",{value:!0}),P),j={};A(j,{default:()=>h}),M.exports=T(j);var h={active:!1,id:"SelectionManager",name:"SelectionManager",icon:"bi-textarea",renderToWindow:!1,resizableWindow:!1,isVisibleInMenu:!1,deactivateGFI:!1,selections:[],activeSelection:null,acceptSelection:null,readmeUrl:{"en-US":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/022selectionmanager.md","de-DE":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/022auswahlmanager.md",en:"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/022selectionmanager.md",de:"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/022auswahlmanager.md"}}},3710:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,D=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,j=(f,r)=>{for(var n in r)_(f,n,{get:r[n],enumerable:!0})},E=(f,r,n,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let p of A(r))!T.call(f,p)&&p!==n&&_(f,p,{get:()=>r[p],enumerable:!(u=w(r,p))||u.enumerable});return f},h=(f,r,n)=>(n=f!=null?i(D(f)):{},E(r||!f||!f.__esModule?_(n,"default",{value:f,enumerable:!0}):n,f)),P=f=>E(_({},"__esModule",{value:!0}),f),l={};j(l,{default:()=>O}),M.exports=P(l);var e=h(s(4222)),o=h(s(450)),y=h(s(286));const b={utm32:"EPSG:25832",wgs84:"EPSG:4326"};function O(f,r=0,n=b.utm32){if(!(Array.isArray(f)&&typeof parseFloat(r)=="number"))return console.error(`getBoundingGeometry: ${f} has to be defined and an array. ${r} has to be defined and a number`),!1;const u=parseFloat(r),p=new o.default,v=f.map(B=>B.clone().getGeometry().transform(n,b.wgs84)),c=new y.default(v),a=p.writeGeometryObject(c),d=(0,e.default)(a,u,{units:"meters"}),x=d.features.map(B=>p.readGeometry(B.geometry).transform(b.wgs84,n));return new y.default(x)}},3760:function(M,L){var s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,A=(h,P)=>{for(var l in P)s(h,l,{get:P[l],enumerable:!0})},D=(h,P,l,e)=>{if(P&&typeof P=="object"||typeof P=="function")for(let o of _(P))!w.call(h,o)&&o!==l&&s(h,o,{get:()=>P[o],enumerable:!(e=i(P,o))||e.enumerable});return h},T=h=>D(s({},"__esModule",{value:!0}),h),j={};A(j,{default:()=>E}),M.exports=T(j);function E(h,P,l,e){const o=h.match(/[A-Z0-9-]/g).join("");if(l.find(y=>y===o)){const y=P+"-"+e;return E(y,o,l,e+1)}return o}},3811:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.defineProperties,A=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,l=(a,d,x)=>d in a?_(a,d,{enumerable:!0,configurable:!0,writable:!0,value:x}):a[d]=x,e=(a,d)=>{for(var x in d||(d={}))h.call(d,x)&&l(a,x,d[x]);if(j)for(var x of j(d))P.call(d,x)&&l(a,x,d[x]);return a},o=(a,d)=>w(a,D(d)),y=(a,d)=>{for(var x in d)_(a,x,{get:d[x],enumerable:!0})},b=(a,d,x,B)=>{if(d&&typeof d=="object"||typeof d=="function")for(let I of T(d))!h.call(a,I)&&I!==x&&_(a,I,{get:()=>d[I],enumerable:!(B=A(d,I))||B.enumerable});return a},O=(a,d,x)=>(x=a!=null?i(E(a)):{},b(d||!a||!a.__esModule?_(x,"default",{value:a,enumerable:!0}):x,a)),f=a=>b(_({},"__esModule",{value:!0}),a),r={};y(r,{default:()=>c}),M.exports=f(r);var n=O(s(450)),u=s(10),p=O(s(3682)),c=o(e({},(0,u.generateSimpleGetters)(p.default)),{lastSelectionWithCurrentDataLayers(a,d,x,B){const I=a.selections.length-1,U=B["Tools/FeaturesList/activeVectorLayerList"],S=U.map(G=>G.getProperties().name),$=new n.default;return{selection:a.selections[I].selection.map(G=>$.writeFeatureObject(G)),storedLayers:S,settings:a.selections[I].settings,id:a.selections[I].id,bufferedSelection:a.selections[I].bufferedSelection,source:a.selections[I].source}}})},3812:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.defineProperties,A=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,l=(c,a,d)=>a in c?_(c,a,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[a]=d,e=(c,a)=>{for(var d in a||(a={}))h.call(a,d)&&l(c,d,a[d]);if(j)for(var d of j(a))P.call(a,d)&&l(c,d,a[d]);return c},o=(c,a)=>w(c,D(a)),y=(c,a)=>{for(var d in a)_(c,d,{get:a[d],enumerable:!0})},b=(c,a,d,x)=>{if(a&&typeof a=="object"||typeof a=="function")for(let B of T(a))!h.call(c,B)&&B!==d&&_(c,B,{get:()=>a[B],enumerable:!(x=A(a,B))||x.enumerable});return c},O=(c,a,d)=>(d=c!=null?i(E(c)):{},b(a||!c||!c.__esModule?_(d,"default",{value:c,enumerable:!0}):d,c)),f=c=>b(_({},"__esModule",{value:!0}),c),r={};y(r,{default:()=>v}),M.exports=f(r);var n=s(10),u=O(s(3682)),v=o(e({},(0,n.generateSimpleMutations)(u.default)),{applyTranslationKey:(c,a)=>{a&&a.indexOf("translate#")>-1&&(c.name=a.substring(10))},toggleVisualizationState(c){c.visualizationState=!c.visualizationState},inputActiveSelection:(c,a)=>{a!==null&c.activeSelection===a?c.activeSelection=null:c.activeSelection=a},addSelection:(c,a)=>{c.selections.push(a)},clearAllSelections:c=>{c.selections=[]}})},3813:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,D=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,j=(r,n)=>{for(var u in n)_(r,u,{get:n[u],enumerable:!0})},E=(r,n,u,p)=>{if(n&&typeof n=="object"||typeof n=="function")for(let v of A(n))!T.call(r,v)&&v!==u&&_(r,v,{get:()=>n[v],enumerable:!(p=w(n,v))||p.enumerable});return r},h=(r,n,u)=>(u=r!=null?i(D(r)):{},E(n||!r||!r.__esModule?_(u,"default",{value:r,enumerable:!0}):u,r)),P=r=>E(_({},"__esModule",{value:!0}),r),l={};j(l,{default:()=>f}),M.exports=P(l);var e=h(s(4171)),o=h(s(21)),y=h(s(450)),b=h(s(3760)),f={addNewSelection({state:r,commit:n},{selection:u,source:p,id:v}){var c;let a;const d=new y.default,x={selection:Array,bufferedSelection:Array,source:String,id:String,abv:String,storedLayers:[],filterSettings:[],settings:{buffer:0,bufferActive:!1}},B=[];for(let I=0;I<u.length;I++){const U=d.writeFeatureObject(u[I]);a?a=(0,e.default)(a,U):a=U}((c=d.readFeature(a).getGeometry())==null?void 0:c.getType())==="MultiPolygon"?d.readFeature(a).getGeometry().getPolygons().forEach(I=>{B.push(new o.default(I))}):B.push(d.readFeature(a)),x.selection=B,x.source=p,x.id=v,x.abv=(0,b.default)(v,v,r.selections.map(I=>I.abv),0),n("addSelection",x)}}},3986:function(M){M.exports=JSON.parse('{"modules":{"tools":{"cosi":{"selectionManager":{"title":"Auswahlverwaltung","infoTooltip":"Werkzeuginformationen","noData":"Keine Daten vorhanden","mergedSelections":"Kombinierte Auswahl","allSelections":"Alle aktiven ausgew\xE4hlt","allSelectionsMenu":"Alle Auswahlen","connectedSelections":"Auswahl verbunden","buffer":"Ver\xE4nderte Auswahl","cache":"Zwischenspeicher","dataLoaded":"Die gew\xFCnschten Themendaten wurden erfolgreich geladen","title_view":"Auswahl ein/aus","title_add":"Auswahl zum Zwischenspeicher hinzuf\xFCgen","title_merge":"Zwischenauswahl zusammenf\xFChren","title_stored":"Aktuelle Themendaten speichern","title_extended_options":"Erweiterte Optionen anzeigen","title_remove":"Auswahl entfernen","title_remove_all":"Auswahlverwaltung zur\xFCcksetzen","title_all_selections":"Alle aktiven Auswahlen ausw\xE4hlen","title_remove_cached_selection":"Auswahl aus Zwischenspeicher entfernen","title_connect_selections":"Alle aktiven Auswahlen mit Polygon verbinden","title_slider":"Buffer (m) einstellen","title_toggle_buffer":"Bufferauswahl aktivieren","title_buffer_selection":"Buffer als Auswahl festlegen"}}}}}')},3987:function(M){M.exports=JSON.parse('{"modules":{"tools":{"selectionManager":{"title":"Selection Manager","infoTooltip":"Tool Info","noData":"No data available","mergedSelections":"Merged Selections"}}}}')},4154:function(M,L,s){"use strict";s.r(L);var i=s(4155),_=s.n(i);for(var w in i)["default"].indexOf(w)<0&&function(A){s.d(L,A,function(){return i[A]})}(w);L.default=_.a},4155:function(M,L,s){var i=Object.defineProperty,_=Object.defineProperties,w=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,h=(r,n,u)=>n in r?i(r,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[n]=u,P=(r,n)=>{for(var u in n||(n={}))j.call(n,u)&&h(r,u,n[u]);if(T)for(var u of T(n))E.call(n,u)&&h(r,u,n[u]);return r},l=(r,n)=>_(r,A(n)),e=(r,n)=>{for(var u in n)i(r,u,{get:n[u],enumerable:!0})},o=(r,n,u,p)=>{if(n&&typeof n=="object"||typeof n=="function")for(let v of D(n))!j.call(r,v)&&v!==u&&i(r,v,{get:()=>n[v],enumerable:!(p=w(n,v))||p.enumerable});return r},y=r=>o(i({},"__esModule",{value:!0}),r),b={};e(b,{default:()=>f}),M.exports=y(b);var O=s(8),f={name:"ToolInfo",props:{title:{type:String,default:"Werkzeuginformationen (Link \xF6ffnen)"},url:{type:[String,Object],default:null},infoText:{type:String,default:void 0},summary:{type:String,default:null},locale:{type:String,default:"de"}},methods:l(P({},(0,O.mapActions)("Alerting",["addSingleAlert","cleanup"])),{showInfo(){return this.url?window.open(this.getUrl(),"_blank"):(this.infoText&&(this.cleanup(),this.addSingleAlert({category:"Info",content:this.infoText,displayClass:"info"})),null)},getUrl(){if(typeof this.url=="string")return this.url;const r=Object.keys(this.url).find(n=>n.substring(0,n.indexOf("-"))===this.locale.substring(0,n.indexOf("-")));return this.url[r]}})}},4156:function(M,L,s){var i=Object.defineProperty,_=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,A=Object.prototype.hasOwnProperty,D=(l,e)=>{for(var o in e)i(l,o,{get:e[o],enumerable:!0})},T=(l,e,o,y)=>{if(e&&typeof e=="object"||typeof e=="function")for(let b of w(e))!A.call(l,b)&&b!==o&&i(l,b,{get:()=>e[b],enumerable:!(y=_(e,b))||y.enumerable});return l},j=l=>T(i({},"__esModule",{value:!0}),l),E={};D(E,{render:()=>h,staticRenderFns:()=>P}),M.exports=j(E);var h=function(){var e=this,o=e._self._c;return o("div",[o("v-row",{attrs:{dense:"",justify:"end"}},[o("v-col",{attrs:{cols:"17"}},[e.summary?o("p",[e._v(`
                `+e._s(e.summary)+`
            `)]):e._e()]),e._v(" "),o("v-col",{attrs:{cols:"1"}},[e.infoText||e.url?o("v-btn",{staticClass:"info_btn",attrs:{title:e.title,depressed:"",right:"",icon:"","x-small":""},on:{click:e.showInfo}},[o("v-icon",[e._v("mdi-help-circle")])],1):e._e()],1)],1),e._v(" "),o("v-divider")],1)},P=[];h._withStripped=!0},4157:function(M,L,s){},4162:function(M,L,s){"use strict";s.r(L);var i=s(4163),_=s(4154);for(var w in _)["default"].indexOf(w)<0&&function(j){s.d(L,j,function(){return _[j]})}(w);var A=s(4164),D=s(1),T=Object(D.a)(_.default,i.render,i.staticRenderFns,!1,null,"0f052480",null);L.default=T.exports},4163:function(M,L,s){"use strict";var i=s(4156),_=s.n(i);s.o(i,"render")&&s.d(L,"render",function(){return i.render}),s.o(i,"staticRenderFns")&&s.d(L,"staticRenderFns",function(){return i.staticRenderFns})},4164:function(M,L,s){"use strict";var i=s(4157),_=s.n(i)},4433:function(M,L,s){"use strict";s.r(L);var i=s(4434),_=s.n(i);for(var w in i)["default"].indexOf(w)<0&&function(A){s.d(L,A,function(){return i[A]})}(w);L.default=_.a},4434:function(M,L,s){var i=Object.create,_=Object.defineProperty,w=Object.defineProperties,A=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,l=(t,g,m)=>g in t?_(t,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[g]=m,e=(t,g)=>{for(var m in g||(g={}))h.call(g,m)&&l(t,m,g[m]);if(j)for(var m of j(g))P.call(g,m)&&l(t,m,g[m]);return t},o=(t,g)=>w(t,D(g)),y=(t,g)=>{for(var m in g)_(t,m,{get:g[m],enumerable:!0})},b=(t,g,m,C)=>{if(g&&typeof g=="object"||typeof g=="function")for(let F of T(g))!h.call(t,F)&&F!==m&&_(t,F,{get:()=>g[F],enumerable:!(C=A(g,F))||C.enumerable});return t},O=(t,g,m)=>(m=t!=null?i(E(t)):{},b(g||!t||!t.__esModule?_(m,"default",{value:t,enumerable:!0}):m,t)),f=t=>b(_({},"__esModule",{value:!0}),t),r=(t,g,m)=>new Promise((C,F)=>{var R=V=>{try{z(m.next(V))}catch(Q){F(Q)}},K=V=>{try{z(m.throw(V))}catch(Q){F(Q)}},z=V=>V.done?C(V.value):Promise.resolve(V.value).then(R,K);z((m=m.apply(t,g)).next())}),n={};y(n,{default:()=>X}),M.exports=f(n);var u=s(8),p=O(s(3811)),v=O(s(3812)),c=O(s(3813)),a=O(s(48)),d=O(s(47)),x=O(s(3710)),B=s(3660),I=O(s(4162)),U=s(3649),S=O(s(21)),$=O(s(44)),J=s(201),G=O(s(4382)),W=O(s(5457)),Z=s(4158),H=O(s(450)),N=s(40),X={name:"SelectionManager",components:{ToolInfo:I.default},data(){return{openAddon:!1,extendedOptions:[],selectionsToMerge:[],allSelectionsPossible:!0,dataLoaded:!1}},computed:o(e(e(e(e(e(e({},(0,u.mapGetters)("Tools/SelectionManager",Object.keys(p.default))),(0,u.mapGetters)("Language",["currentLocale"])),(0,u.mapGetters)("Tools/ColorCodeMap",["upperEdge"])),(0,u.mapGetters)("Tools/DistrictSelector",["name","selectedDistrictLevel","selectedFeatures","label","keyOfAttrName","keyOfAttrNameStats","loadend","metadataUrls","boundingGeometry","bufferValue"])),(0,u.mapGetters)("Maps",["getVisibleLayerList"])),(0,u.mapGetters)("Tools/FeaturesList",["activeVectorLayerList",{facilitiesMapping:"mapping"}])),{dashboardOpen(){return this.$store.getters["Tools/Dashboard/active"]||this.$store.getters["Tools/FeaturesList/active"]},selectionGroups(){return[...new Set(this.selections.map(t=>t.source).sort())]},activeLayerList(){return this.activeVectorLayerList.map(t=>t.getProperties().name)},selectionsLength(){return this.selections.length}}),watch:{acceptSelection(t){if(t){t.storedLayers.forEach(m=>{(0,U.getModelByAttributes)({type:"layer",name:m})||(0,U.addModelsByAttributes)({name:m})});const g=new H.default;t.selection=t.selection.map(m=>m.geometry?g.readFeature(m):new S.default({geometry:new $.default((0,J.inflateCoordinatesArray)(m.values_.geometry.flatCoordinates,0,m.values_.geometry.ends_,m.values_.geometry.stride))})),t.abv=this.selections.filter(m=>m.abv===t.id.match(/\b([A-Z0-9])/g).join("")).length>0?t.id.match(/\b([A-Z0-9])/g).join("")+"-"+this.selections.filter(m=>m.abv===t.id.match(/\b([A-Z0-9])/g).join("")).length:t.id.match(/\b([A-Z0-9])/g).join(""),this.addSelection(t),this.highlightSelection(this.selections.length-1)}},activeSelection(t){t!==null?this.activateSelection(t):this.removeLayer()},openAddon(){const t=this.map.getLayers().getArray().filter(g=>g.get("name")==="selection_manager");if(this.openAddon){const g=new N.Style({fill:new N.Fill({color:"rgba(214, 96, 93, 0.35)"}),stroke:new N.Stroke({color:"#D6605D",width:1})});t.length>0&&t[0].setStyle(g)}else{const g=new N.Style({stroke:new N.Stroke({color:"#A8404E",width:3})});t.length>0&&t[0].setStyle(g)}},selectionsLength(t,g){g&&t&&g<t||!g&&t?this.inputActiveSelection(t-1):t&&t<this.activeSelection+1&&this.inputActiveSelection(0),this.allSelectionsPossible=!0}},created(){this.map=mapCollection.getMap("2D")},methods:o(e(e(e({},(0,u.mapMutations)("Tools/SelectionManager",Object.keys(v.default))),(0,u.mapActions)("Tools/SelectionManager",Object.keys(c.default))),(0,u.mapMutations)("Maps",["setLayerVisibility","addLayerToMap","removeLayerFromMap"])),{activateSelection(t){this.selections[t].settings.bufferActive?this.rerenderSelection(t):this.highlightSelection(t)},highlightSelection(t){this.selections[t].storedLayers.length>0&&this.setStoredLayersActive(this.selections[t].storedLayers),this.map.getLayers().getArray().filter(F=>F.get("name")==="selection_manager").forEach(F=>this.map.removeLayer(F));const g=new d.default({features:this.selections[t].selection}),m=this.openAddon?new N.Style({fill:new N.Fill({color:"rgba(214, 96, 93, 0.35)"}),stroke:new N.Stroke({color:"#D6605D",width:1})}):new N.Style({fill:new N.Fill({color:"rgba(255, 255, 255, 0)"}),stroke:new N.Stroke({color:"#A8404E",width:3})}),C=new a.default({name:"selection_manager",source:g,style:m});this.$watch("$store.state.Tools.Print.active",F=>{F?C.setStyle(()=>new N.Style({fill:new N.Fill({color:"rgba(255, 255, 255, 0)"}),stroke:new N.Stroke({color:"#A8404E",width:6})})):C.setStyle(()=>m)}),C.setZIndex(9999),this.map.addLayer(C),B.setBBoxToGeom.call(this,(0,x.default)(this.selections[t].selection,this.bufferValue))},rerenderSelection(t){this.selections[t].storedLayers.length>0&&this.setStoredLayersActive(this.selections[t].storedLayers),this.map.getLayers().getArray().filter(C=>C.get("name")==="selection_manager").forEach(C=>this.map.removeLayer(C));const g=new d.default({features:this.selections[t].bufferedSelection}),m=new a.default({name:"selection_manager",source:g,style:new N.Style({fill:new N.Fill({color:"rgba(214, 187, 47, 0.35)"}),stroke:new N.Stroke({color:"#D6B62F",width:3})})});m.setZIndex(9999),this.map.addLayer(m),B.setBBoxToGeom.call(this,(0,x.default)(this.selections[t].bufferedSelection,this.bufferValue))},hoverSelection(t,g){if(this.activeSelection!==t){this.map.getLayers().getArray().filter(F=>F.get("name")==="selection_manager_hover_layer").forEach(F=>this.map.removeLayer(F));const m=new d.default({features:this.selections[t].selection}),C=new a.default({name:"selection_manager_hover_layer",source:m,style:new N.Style({fill:new N.Fill({color:g})})});C.setZIndex(9999),this.map.addLayer(C)}},resetHovers(){this.map.getLayers().getArray().filter(t=>t.get("name")==="selection_manager_hover_layer").forEach(t=>this.map.removeLayer(t))},storeLayers(t){this.selections[t].storedLayers.length>0?this.selections[t].storedLayers=[]:this.selections[t].storedLayers=this.activeLayerList},setStoredLayersActive(t){return r(this,null,function*(){this.activeVectorLayerList.forEach(g=>{const m=g.getProperties().id,C=(0,U.getModelByAttributes)({type:"layer",id:m});C&&C.set("isSelected",!1)}),t.forEach(g=>r(this,null,function*(){const m=(0,U.getModelByAttributes)({type:"layer",name:g});m&&m.set("isSelected",!0)})),yield this.$nextTick(),setTimeout(()=>{document.getElementById("loader").classList.remove("loader-is-loading"),document.getElementById("masterportal-container").classList.remove("blurry")},1500)})},setExtendedOptions(t){this.extendedOptions.includes(t)?this.extendedOptions.splice(this.extendedOptions.indexOf(t),1):this.extendedOptions.push(t)},allSelections(){const t=this.selections.map(g=>g.selection).flat();this.addNewSelection({selection:t,source:this.$t("additional:modules.tools.cosi.selectionManager.title"),id:this.$t("additional:modules.tools.cosi.selectionManager.allSelections")+" ("+this.selections.length+")"}),this.highlightSelection(this.selections.length-1),this.allSelectionsPossible=!1},connectSelections(t,g){const m=g?this.selections.filter(K=>t.includes(this.selections.indexOf(K))):t,C=new H.default,F=[],R=m.map(K=>K.selection);R.forEach(K=>{if(Array.isArray(K))K.forEach(z=>{const V=(0,G.default)(C.writeFeatureObject(z));F.push(V)});else{const z=(0,G.default)(C.writeFeatureObject(K));F.push(z)}}),R.push(new S.default(new $.default((0,W.default)((0,Z.featureCollection)(F)).geometry.coordinates))),this.addNewSelection({selection:R.flat(),source:this.$t("additional:modules.tools.cosi.selectionManager.title"),id:this.$t("additional:modules.tools.cosi.selectionManager.connectedSelections")+" ("+(R.length-1)+")"}),this.highlightSelection(this.selections.length-1),g&&(this.selectionsToMerge=[])},triggerBuffer(t){this.selections[t].settings.bufferActive?(this.selections[t].settings.bufferActive=!1,this.activeSelection===t&&this.highlightSelection(t)):(this.selections[t].settings.bufferActive=!0,this.activeSelection===t&&this.rerenderSelection(t))},polygonChange(t){const g=(0,x.default)(this.selections[t].selection,this.selections[t].settings.buffer),m=[];g.getGeometries().forEach(C=>{m.push(new S.default(C))}),this.selections[t].bufferedSelection=m,this.selections[t].settings.bufferActive&&this.activeSelection===t&&this.rerenderSelection(t)},addBufferAsSelection(t){this.addNewSelection({selection:this.selections[t].bufferedSelection,source:this.$t("additional:modules.tools.cosi.selectionManager.title"),id:this.$t("additional:modules.tools.cosi.selectionManager.buffer")+" "+this.selections[t].id}),this.selections[t].settings.buffer=0,this.selections[t].settings.bufferActive=!1,this.highlightSelection(this.selections.length-1)},removeLayer(){this.map.getLayers().getArray().filter(t=>t.get("name")==="selection_manager").forEach(t=>this.map.removeLayer(t))},removeSelection(t){this.selections.splice(t,1),this.selections.length===0&&(this.inputActiveSelection(null),this.removeLayer()),this.selectionsToMerge.includes(t)&&this.selectionsToMerge.splice(this.selectionsToMerge.indexOf(t),1),this.selections.length>0&&t===this.activeSelection&&this.inputActiveSelection(0)},removeAllSelections(){this.clearAllSelections(),this.removeLayer(),this.inputActiveSelection(null)},addMergedSelection(){const t=this.selections.filter((m,C)=>this.selectionsToMerge.includes(C)).map(m=>m.selection),g=t.flat();this.addNewSelection({selection:g,source:this.$t("additional:modules.tools.cosi.selectionManager.title"),id:this.$t("additional:modules.tools.cosi.selectionManager.mergedSelections")+" ("+this.selectionsToMerge.length+")"}),this.selectionsToMerge=[],this.highlightSelection(this.selections.length-1)},mergeSelections(t){this.selectionsToMerge.includes(t)?this.selectionsToMerge.splice(this.selectionsToMerge.indexOf(t),1):this.selectionsToMerge.push(t)}})}},4838:function(M,L,s){var i=Object.defineProperty,_=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,A=Object.prototype.hasOwnProperty,D=(l,e)=>{for(var o in e)i(l,o,{get:e[o],enumerable:!0})},T=(l,e,o,y)=>{if(e&&typeof e=="object"||typeof e=="function")for(let b of w(e))!A.call(l,b)&&b!==o&&i(l,b,{get:()=>e[b],enumerable:!(y=_(e,b))||y.enumerable});return l},j=l=>T(i({},"__esModule",{value:!0}),l),E={};D(E,{render:()=>h,staticRenderFns:()=>P}),M.exports=j(E);var h=function(){var e=this,o=e._self._c;return!e.dashboardOpen&&e.selections.length>0?o("div",{staticClass:"sm_addon_container",style:{bottom:e.upperEdge+10+"px"},attrs:{id:"sm"}},[o("button",{staticClass:"addon_icon cosi_menu_btn",class:{highlight:e.openAddon},attrs:{id:"sm_btn"},on:{click:function(y){e.openAddon=!e.openAddon}}},[o("v-icon",[e._v("mdi-selection-ellipse-arrow-inside")])],1),e._v(" "),o("div",{staticClass:"addon_wrapper",class:{open:e.openAddon},attrs:{id:"sm_wrapper"}},[o("div",{staticClass:"selection_menu"},[o("div",{staticClass:"addon_head"},[o("p",[e._v(e._s(e.$t("additional:modules.tools.cosi.selectionManager.title")))]),e._v(" "),o("ToolInfo",{attrs:{url:e.readmeUrl,locale:e.currentLocale}})],1),e._v(" "),e.selections.length>1?o("div",{staticClass:"function_buttons all_function_buttons function_grp"},[o("p",{staticClass:"menu_title"},[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.selectionManager.allSelectionsMenu"))+`
                `)]),e._v(" "),o("button",{staticClass:"all_btn",class:{disabled:e.selections.length<2||!e.allSelectionsPossible},attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_all_selections")},on:{click:function(y){return e.allSelections()}}},[o("v-icon",[e._v("mdi-selection-ellipse-arrow-inside")])],1),e._v(" "),o("button",{staticClass:"connect_btn",class:{disabled:e.selections.map(y=>y.selection).flat().length>3},attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_connect_selections")},on:{click:function(y){return e.connectSelections(e.selections,!1)}}},[o("v-icon",[e._v("mdi-vector-selection")])],1),e._v(" "),o("button",{staticClass:"remove_all_btn",attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_remove_all")},on:{click:function(y){return e.removeAllSelections()}}},[o("v-icon",[e._v("mdi-close-box-multiple")])],1)]):e._e(),e._v(" "),e.selectionsToMerge.length>0?o("div",{staticClass:"cache function_grp"},[o("div",{staticClass:"cache_head head"},[o("div",{staticClass:"function_buttons cache_buttons"},[o("p",{staticClass:"menu_title"},[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.selectionManager.cache"))+`
                        `)]),e._v(" "),e.selectionsToMerge.length>0?o("button",{staticClass:"combine_btn",attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_merge")},on:{click:function(y){return e.addMergedSelection()}}},[o("v-icon",[e._v("mdi-vector-combine")])],1):e._e(),e._v(" "),o("button",{staticClass:"connect_btn",class:{disabled:e.selectionsToMerge.length<3},attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_connect_selections")},on:{click:function(y){return e.connectSelections(e.selectionsToMerge,!0)}}},[o("v-icon",[e._v("mdi-vector-selection")])],1),e._v(" "),o("button",{staticClass:"remove_all_btn",attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_remove_all")},on:{click:function(y){e.selectionsToMerge=[]}}},[o("v-icon",[e._v("mdi-close-box-multiple")])],1)])]),e._v(" "),o("ul",{staticClass:"cache_selections"},e._l(e.selectionsToMerge,function(y,b){return o("li",{key:b,staticClass:"cache_selection",attrs:{role:"button",tabindex:"0"},on:{click:function(O){return e.inputActiveSelection(b)},keyup:function(O){return e.inputActiveSelection(b)},mouseover:function(O){e.hoverSelection(b,"rgba(47, 162, 255, 0.3)")},focus:function(O){e.hoverSelection(b,"rgba(47, 162, 255, 0.3)")},mouseleave:e.resetHovers,focusout:e.resetHovers}},[e._v(`
                        `+e._s(e.selections[y].abv)+`
                        `),o("button",{staticClass:"remove_cached_btn",attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_remove_cached_selection")},on:{click:function(O){return e.selectionsToMerge.splice(b,1)}}},[o("v-icon",[e._v("mdi-close")])],1)])}),0)]):e._e(),e._v(" "),o("ul",{staticClass:"groups"},e._l(e.selectionGroups,function(y,b){return o("li",{key:b,staticClass:"grouplevel"},[o("div",{staticClass:"group_header"},[e._v(`
                        `+e._s(y)+`
                    `)]),e._v(" "),o("ul",{staticClass:"selections"},[e._l(e.selections,function(O,f){return[O.source===y?o("li",{key:f,staticClass:"selectionlevel",class:{extended:e.extendedOptions.includes(f),hoverHighlight:e.selectionsToMerge.includes(f)},attrs:{role:"button",tabindex:"0",title:O.id},on:{mouseover:function(r){e.hoverSelection(f,"rgba(214, 96, 93, 0.3)")},focus:function(r){e.hoverSelection(f,"rgba(214, 96, 93, 0.3)")},mouseleave:e.resetHovers,focusout:e.resetHovers}},[o("span",{staticClass:"hint"},[e._v(e._s(O.abv))]),e._v(" "),o("p",{staticClass:"selection_name"},[e._v(`
                                    `+e._s(O.id)+`
                                `)]),e._v(" "),o("ul",{staticClass:"function_buttons"},[o("button",{staticClass:"view_btn",class:{highlight:e.activeSelection===f,scaledHighlight:O.settings.bufferActive},attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_view")},on:{click:function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey?null:e.inputActiveSelection(f)}}},[o("v-icon",[e._v("mdi-eye-outline")])],1),e._v(" "),e.selections.length>1?o("button",{staticClass:"add_btn",class:{highlight:e.selectionsToMerge.includes(f)},attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_add")},on:{click:function(r){return e.mergeSelections(f)}}},[o("v-icon",[e._v("mdi-plus")])],1):e._e(),e._v(" "),o("button",{staticClass:"freeze_btn",class:{highlight:O.storedLayers.length>0},attrs:{title:O.storedLayers.length>0?O.storedLayers.join(", "):e.$t("additional:modules.tools.cosi.selectionManager.title_stored")},on:{click:function(r){return e.storeLayers(f)}}},[O.storedLayers.length>0?[o("v-icon",[e._v("mdi-anchor")])]:[o("v-icon",[e._v("mdi-layers-plus")])]],2),e._v(" "),o("button",{staticClass:"option_btn",class:{highlight:e.extendedOptions.includes(f)},attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_extended_options")},on:{click:function(r){return e.setExtendedOptions(f)}}},[o("v-icon",[e._v("mdi-tools")])],1),e._v(" "),o("button",{staticClass:"remove_btn",attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_remove")},on:{click:function(r){return e.removeSelection(f)}}},[o("v-icon",[e._v("mdi-close")])],1)]),e._v(" "),o("div",{staticClass:"extended_options"},[o("v-text-field",{attrs:{max:"1500",min:"-1500",type:"number"},on:{input:function(r){return e.polygonChange(f)}},model:{value:O.settings.buffer,callback:function(r){e.$set(O.settings,"buffer",r)},expression:"selection.settings.buffer"}}),e._v(" "),o("v-slider",{attrs:{max:"1500",min:"-1500",step:"10",title:e.$t("additional:modules.tools.cosi.selectionManager.title_slider")},on:{input:function(r){return e.polygonChange(f)}},model:{value:O.settings.buffer,callback:function(r){e.$set(O.settings,"buffer",r)},expression:"selection.settings.buffer"}}),e._v(" "),o("button",{staticClass:"activate_btn",class:{highlight:O.settings.bufferActive},attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_toggle_buffer")},on:{click:function(r){return e.triggerBuffer(f)}}},[o("v-icon",[e._v("mdi-selection-drag")])],1),e._v(" "),O.settings.bufferActive&&O.settings.buffer!==0?o("button",{staticClass:"add_buffer_btn",attrs:{title:e.$t("additional:modules.tools.cosi.selectionManager.title_buffer_selection")},on:{click:function(r){return e.addBufferAsSelection(f)}}},[o("v-icon",[e._v("mdi-plus-box-multiple")])],1):e._e()],1)]):e._e()]})],2)])}),0)])])]):e._e()},P=[];h._withStripped=!0},4845:function(M,L,s){},5455:function(M,L,s){"use strict";s.r(L);var i=s(5456),_=s(4433);for(var w in _)["default"].indexOf(w)<0&&function(j){s.d(L,j,function(){return _[j]})}(w);var A=s(5481),D=s(1),T=Object(D.a)(_.default,i.render,i.staticRenderFns,!1,null,null,null);L.default=T.exports},5456:function(M,L,s){"use strict";var i=s(4838),_=s.n(i);s.o(i,"render")&&s.d(L,"render",function(){return i.render}),s.o(i,"staticRenderFns")&&s.d(L,"staticRenderFns",function(){return i.staticRenderFns})},5481:function(M,L,s){"use strict";var i=s(4845),_=s.n(i)}}]);
