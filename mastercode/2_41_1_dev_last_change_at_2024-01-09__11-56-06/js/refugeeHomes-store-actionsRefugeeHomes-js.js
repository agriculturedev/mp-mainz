(window.webpackJsonp=window.webpackJsonp||[]).push([[480],{3877:function(b,B,c){(function(d,P){var O=Object.create,p=Object.defineProperty,_=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,E=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty,T=(r,e)=>{for(var t in e)p(r,t,{get:e[t],enumerable:!0})},y=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of R(e))!N.call(r,a)&&a!==t&&p(r,a,{get:()=>e[a],enumerable:!(o=_(e,a))||o.enumerable});return r},h=(r,e,t)=>(t=r!=null?O(E(r)):{},y(e||!r||!r.__esModule?p(t,"default",{value:r,enumerable:!0}):t,r)),F=r=>y(p({},"__esModule",{value:!0}),r),A=(r,e,t)=>new Promise((o,a)=>{var l=s=>{try{u(t.next(s))}catch(n){a(n)}},g=s=>{try{u(t.throw(s))}catch(n){a(n)}},u=s=>s.done?o(s.value):Promise.resolve(s.value).then(l,g);u((t=t.apply(r,e)).next())}),v={};T(v,{default:()=>U}),b.exports=F(v);var L=h(c(60)),S=h(c(25));function H(r,e,t){const o=r.match(new RegExp(e+"(.*)"+t));return o===null?"app":o[1]}var U={requestRawLayerList({getters:r,dispatch:e}){r.layerIds.forEach(t=>A(this,null,function*(){const o=yield L.default.getLayerWhere({id:t}),a=yield e("buildAndGetRequestUrl",o);yield e("sendRequest",a)}))},sendRequest({dispatch:r},e){(0,S.default)({url:e,type:"GET",timeout:6e3}).then(t=>{r("parseFeatures",t.data)}).catch(()=>{r("Alerting/addSingleAlert",e+" "+d.t("additional:modules.tools.refugeehomes.requestAlert"),{root:!0})})},buildAndGetRequestUrl(r,e){const t="?service=WFS&request=GetFeature&version=2.0.0&typeNames=",o=e.url,a=e.featureType;return o+t+a},initURLParameter({dispatch:r,getters:e}){const t={};if(new URLSearchParams(window.location.search).forEach(function(a,l){t[l.toUpperCase()]=decodeURIComponent(a.toUpperCase())}),t?.BEZIRK){const a=e.getParameterValue({result:t,property:"BEZIRK"});let l="";l=e.hasDistrict(a),l===""?r("Alerting/addSingleAlert","<strong>"+d.t("additional:modules.tools.refugeehomes.wrongDistrictName")+"</strong><br><small>"+d.t("additional:modules.tools.refugeehomes.wrongDistrictNameMessage")+a+".</small>",{root:!0}):P.trigger("RefugeesTable","showFeaturesByBezirk",l,!0)}},parseFeatures({getters:r,dispatch:e,commit:t,rootGetters:o},a){const l=new DOMParser().parseFromString(a,"text/xml"),g=l.getElementsByTagName("wfs:member"),u=H(a,"</",":bezeichnung");let s,n,w,f;[...g].forEach(m=>{s={id:m.childNodes[1].getAttribute("gml:id")},r.featureAttributes.forEach(i=>{if(n=m.getElementsByTagName(u+":"+i)[0],typeof n<"u"){if(i==="pfad"){const x=n.innerHTML.split("|");s[i]=x}else i==="geom"?(w=m.getElementsByTagName("gml:pos")[0],f=w.innerHTML.split(" "),s[i]=[parseFloat(f[0]),parseFloat(f[1])]):s[i]=n.innerHTML;s.featureType=m.childNodes[1].localName,s.imgSrc=o.imagePath+s.featureType+".svg"}}),e("scaleImages",s),t("addFeature",s)})},scaleImages(r,e){const t=e.platzzahl;return t===0?e.imgHeight=30:t<100?e.imgHeight=20:t>=250?e.imgHeight=30:e.imgHeight=25,e}}}).call(this,c(6),c(3))}}]);
