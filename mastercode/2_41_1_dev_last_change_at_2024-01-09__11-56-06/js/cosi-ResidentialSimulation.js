(window.webpackJsonp=window.webpackJsonp||[]).push([[54,8,149,150,259,326,327,328,329,331,332,333,342,343,344,345,346,348,349,350,353,354,356,395,396,399,408,413,416,417,418,422,427,431],{220:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(b,p)=>{for(var _ in p)u(b,_,{get:p[_],enumerable:!0})},L=(b,p,_,r)=>{if(p&&typeof p=="object"||typeof p=="function")for(let i of w(p))!E.call(b,i)&&i!==_&&u(b,i,{get:()=>p[i],enumerable:!(r=j(p,i))||r.enumerable});return b},f=(b,p,_)=>(_=b!=null?s(T(b)):{},L(p||!b||!b.__esModule?u(_,"default",{value:b,enumerable:!0}):_,b)),h=b=>L(u({},"__esModule",{value:!0}),b),n={};M(n,{default:()=>m}),D.exports=h(n);var e=f(o(5429)),t=f(o(3971)),a=f(o(3972)),l=f(o(3973)),m={component:e.default,store:t.default,locales:{de:a.default,en:l.default}}},3649:function(D,x,o){(function(s){var u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.prototype.hasOwnProperty,E=(y,N)=>{for(var B in N)u(y,B,{get:N[B],enumerable:!0})},M=(y,N,B,C)=>{if(N&&typeof N=="object"||typeof N=="function")for(let A of w(N))!T.call(y,A)&&A!==B&&u(y,A,{get:()=>N[A],enumerable:!(C=j(N,A))||C.enumerable});return y},L=y=>M(u({},"__esModule",{value:!0}),y),f={};E(f,{addByMouseHover:()=>S,addFolder:()=>d,addModelsByAttributes:()=>_,addVectorLayer:()=>v,closeAllExpandedFolder:()=>b,getCollection:()=>r,getItemByAttributes:()=>i,getItemsByAttributes:()=>c,getModelByAttributes:()=>l,getServiceUrl:()=>e,groupBy:()=>F,offSearchbar:()=>n,onFeaturesLoaded:()=>O,onResetFeatures:()=>P,onSearchbar:()=>h,onShowAllFeatures:()=>a,onShowFeaturesById:()=>t,removeItem:()=>g,removeModelsById:()=>p,renderTree:()=>m}),D.exports=L(f);function h(y){s.on("Searchbar","hit",y)}function n(){s.off("Searchbar","hit")}function e(y){return s.request("RestReader","getServiceById",y).get("url")}function t(y){s.on("ModelList","showFeaturesById",y)}function a(y){s.on("ModelList","showAllFeatures",y)}function l(y){return s.request("ModelList","getModelByAttributes",y)}function m(){s.trigger("ModelList","renderTree")}function b(){s.trigger("ModelList","closeAllExpandedFolder")}function p(y){s.trigger("ModelList","removeModelsById",y)}function _(y){s.trigger("ModelList","addModelsByAttributes",y)}function r(){return s.request("ModelList","getCollection")}function i(y){return s.request("Parser","getItemByAttributes",y)}function c(y){return s.request("Parser","getItemsByAttributes",y)}function d(y,N,B,C){s.trigger("Parser","addFolder",y,N,B,C)}function v(y,N,B,C,A,G,z){s.trigger("Parser","addVectorLayer",y,N,B,C,A,G,z)}function g(y){s.trigger("Parser","removeItem",y)}function O(y){s.on("VectorLayer","featuresLoaded",y)}function P(y){s.on("VectorLayer","resetFeatures",y)}function S(y){s.trigger("MouseHover","add",y)}function F(y,N){return s.request("Util","groupBy",y,N)}}).call(this,o(3))},3650:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of w(e))!E.call(n,l)&&l!==t&&u(n,l,{get:()=>e[l],enumerable:!(a=j(e,l))||a.enumerable});return n},L=(n,e,t)=>(t=n!=null?s(T(n)):{},M(e||!n||!n.__esModule?u(t,"default",{value:n,enumerable:!0}):t,n)),f=L(o(106));function h(n){var e;if(typeof n!="object"||n===null||typeof n.getSource!="function"||typeof((e=n.getSource())==null?void 0:e.getFeatures)!="function")return console.error("utils/layer/getLayerSource: layer must be a layer with a vector source",n),null;const t=n.getSource();return t.constructor===f.default?t.getSource():t}D.exports={getLayerSource:h}},3651:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(c,d)=>{for(var v in d)u(c,v,{get:d[v],enumerable:!0})},L=(c,d,v,g)=>{if(d&&typeof d=="object"||typeof d=="function")for(let O of w(d))!E.call(c,O)&&O!==v&&u(c,O,{get:()=>d[O],enumerable:!(g=j(d,O))||g.enumerable});return c},f=(c,d,v)=>(v=c!=null?s(T(c)):{},L(d||!c||!c.__esModule?u(v,"default",{value:c,enumerable:!0}):v,c)),h=c=>L(u({},"__esModule",{value:!0}),c),n={};M(n,{default:()=>i,getAllContainingDistricts:()=>m,getContainingDistrictForExtent:()=>p,getContainingDistrictForFeature:()=>b,intersect:()=>r,union:()=>_}),D.exports=h(n);var e=f(o(4171)),t=f(o(4169)),a=o(58),l=o(5);function m(c,d,v=!1){var g;const O=[];for(const P of c)for(const S of P.districts){const F=(g=S.adminFeature)==null?void 0:g.getGeometry(),y=d.getGeometry().getExtent();if((!F||F.intersectsExtent(y))&&(O.push({districtLevel:P.label,district:S}),!v))break}return v?O:O[0]}function b(c,d,v=!0,g=!1){const O=[];for(const P of c.districts){const S=P.adminFeature.getGeometry(),F=d.getGeometry().getExtent(),y=(0,l.getCenter)(F);if(g)S.intersectsExtent(F)&&O.push(v?P:P.getName());else if(S.intersectsCoordinate(y)){O.push(v?P:P.getName());break}}return g?O:O[0]}function p(c,d,v=!0,g=!1){const O=[];for(const P of c.districts)if(P.adminFeature.getGeometry().intersectsExtent(d)&&(O.push(v?P:P.getName()),!g))break;return g?O:O[0]}function _(c,d=!1,v=!1,g="EPSG:25832",O="EPSG:4326"){const P=new a.GeoJSON({dataProjection:O,featureProjection:g}),S=P.writeFeaturesObject(c);let F=S.features[0];for(let y=1;y<S.features.length;y++)F=(0,e.default)(F,S.features[y]);return d&&(F.properties={}),v&&(F=P.readFeature(F)),F}function r(c,d=!1,v=!1,g="EPSG:25832",O="EPSG:4326"){const P=new a.GeoJSON({dataProjection:O,featureProjection:g}),S=P.writeFeaturesObject(c);let F=S.features[0];for(let y=1;y<S.features.length;y++)F=(0,t.default)(F,S.features[y]);return F&&(d&&(F.properties={}),v&&(F=P.readFeature(F))),F}var i={intersect:r,union:_,getContainingDistrictForFeature:b}},3652:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(f,h)=>{for(var n in h)o(f,n,{get:h[n],enumerable:!0})},T=(f,h,n,e)=>{if(h&&typeof h=="object"||typeof h=="function")for(let t of u(h))!j.call(f,t)&&t!==n&&o(f,t,{get:()=>h[t],enumerable:!(e=s(h,t))||e.enumerable});return f},E=f=>T(o({},"__esModule",{value:!0}),f),M={};w(M,{default:()=>L}),D.exports=E(M);function L(f,h){const n=document.createElement("a"),e=URL.createObjectURL(f);n.setAttribute("href",e),n.setAttribute("download",h),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},3653:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(p,_)=>{for(var r in _)u(p,r,{get:_[r],enumerable:!0})},L=(p,_,r,i)=>{if(_&&typeof _=="object"||typeof _=="function")for(let c of w(_))!E.call(p,c)&&c!==r&&u(p,c,{get:()=>_[c],enumerable:!(i=j(_,c))||i.enumerable});return p},f=(p,_,r)=>(r=p!=null?s(T(p)):{},L(_||!p||!p.__esModule?u(r,"default",{value:p,enumerable:!0}):r,p)),h=p=>L(u({},"__esModule",{value:!0}),p),n={};M(n,{default:()=>b,download:()=>t,downloadCsvToFile:()=>m,downloadJsonToFile:()=>a,downloadTextToFile:()=>l}),D.exports=h(n);var e=f(o(3652));function t(p,_){const r=document.createElement("a");r.setAttribute("href",p),r.setAttribute("download",_),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function a(p,_){const r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(p));t(r,_)}function l(p,_){const r="data:text/plain;charset=utf-8,"+encodeURI(p);t(r,_)}function m(p,_){const r="data:text/csv;charset=utf-8,"+encodeURI(p);t(r,_)}var b={download:t,downloadCsvToFile:m,downloadJsonToFile:a,downloadTextToFile:l,downloadBlobToFile:e.default}},3654:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(a,l,m,b)=>{if(l&&typeof l=="object"||typeof l=="function")for(let p of w(l))!E.call(a,p)&&p!==m&&u(a,p,{get:()=>l[p],enumerable:!(b=j(l,p))||b.enumerable});return a},L=(a,l,m)=>(m=a!=null?s(T(a)):{},M(l||!a||!a.__esModule?u(m,"default",{value:a,enumerable:!0}):m,a)),f=L(o(21)),h=o(58),n=L(o(18));function e(a,l=!1,m="EPSG:25832",b="EPSG:4326"){if(!(0,n.default)(a)||!(a instanceof f.default))return console.error("utils/features/convertToGeoJson: The first parameter must be an ol feature object, but got "+typeof a),!1;if(typeof l!="boolean")return console.error("utils/features/convertToGeoJson: The second parameter must be a boolean, but got "+typeof l),!1;if(typeof m!="string"||typeof b!="string")return console.error("utils/features/convertToGeoJson: The third and the fourth parameter must both be a string, but got "+typeof m+" and "+typeof b),!1;const p=new h.GeoJSON({dataProjection:b,featureProjection:m});return l?p.writeFeature(a):p.writeFeatureObject(a)}function t(a,l=!1,m="EPSG:25832",b="EPSG:4326"){if(!Array.isArray(a))return console.error("utils/features/convertToGeoJson: The first parameter must be an array, but got "+typeof a),!1;if(typeof l!="boolean")return console.error("utils/features/convertToGeoJson: The second parameter must be a boolean, but got "+typeof l),!1;if(typeof m!="string"||typeof b!="string")return console.error("utils/features/convertToGeoJson: The third and the fourth parameter must both be a string, but got "+typeof m+" and "+typeof b),!1;const p=new h.GeoJSON({dataProjection:b,featureProjection:m});return l?p.writeFeatures(a):p.writeFeaturesObject(a)}D.exports={featureToGeoJson:e,featuresToGeoJsonCollection:t}},3656:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{default:()=>f,getLastAvailableYear:()=>h}),D.exports=M(L);function f(n,e="jahr_"){const t=[];return n.forEach(a=>{const l=a.getProperties?a.getProperties():a;Object.keys(l).forEach(m=>{m.includes(e)&&t.push(m.replace(e,""))})}),[...new Set(t)].sort().reverse()}function h(n,e="jahr_"){const t=n.map(a=>Object.keys(a.getProperties()).map(l=>parseInt(l.replace(e,""),10)).filter(l=>!isNaN(l)).sort((l,m)=>m-l));for(let a=0;a<t.length;a++)for(let l=0;l<t[a].length;l++){const m=t[a][l];if(t.every(b=>b.includes(m)))return m}return f(n,e)[0]}},3658:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(h,n)=>{for(var e in n)o(h,e,{get:n[e],enumerable:!0})},T=(h,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of u(n))!j.call(h,a)&&a!==e&&o(h,a,{get:()=>n[a],enumerable:!(t=s(n,a))||t.enumerable});return h},E=h=>T(o({},"__esModule",{value:!0}),h),M={};w(M,{default:()=>f}),D.exports=E(M);var f={active:!1,deactivateGFI:!0,icon:"bi-boxes",id:"ScenarioBuilder",name:"ScenarioBuilder",useIcons:!0,isVisibleInMenu:!0,renderToWindow:!1,resizableWindow:!1,width:.45,scenarios:[],activeScenario:null,guideLayer:null,geomAttributes:{area:[{key:"flaeche_qm",factorToSqm:1},{key:"flaeche_ha",factorToSqm:1e-4}],lineString:[{key:"laenge_m",factorToM:1},{key:"laenge_km",factorToM:.001}]},readmeUrl:{"en-US":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/009scenariobuilder.md","de-DE":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/009einrichtungenanlegen.md"},featureEditorDisabled:!1}},3662:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(f,h)=>{for(var n in h)o(f,n,{get:h[n],enumerable:!0})},T=(f,h,n,e)=>{if(h&&typeof h=="object"||typeof h=="function")for(let t of u(h))!j.call(f,t)&&t!==n&&o(f,t,{get:()=>h[t],enumerable:!(e=s(h,t))||e.enumerable});return f},E=f=>T(o({},"__esModule",{value:!0}),f),M={};w(M,{default:()=>L}),D.exports=E(M);function L(f,h){const n=f.getGeometry();if(Array.isArray(h)&&h.length===2&&typeof h[0]=="number"&&typeof h[1]=="number"){const e=n.getExtent().getCenter(),t=h[0]-e[0],a=h[1]-e[1];n.translate(t,a)}else f.setGeometry(h.clone())}},3671:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(f,h)=>{for(var n in h)o(f,n,{get:h[n],enumerable:!0})},T=(f,h,n,e)=>{if(h&&typeof h=="object"||typeof h=="function")for(let t of u(h))!j.call(f,t)&&t!==n&&o(f,t,{get:()=>h[t],enumerable:!(e=s(h,t))||e.enumerable});return f},E=f=>T(o({},"__esModule",{value:!0}),f),M={};w(M,{default:()=>L}),D.exports=E(M);class L{constructor({id:h="cg",name:n,data:e,type:t,beginAtZero:a=!1,stacked:l=!1,scaleLabels:m,color:b="blue",source:p="",sub:_=!1,sub_graph:r,sub_index:i,sub_length:c,options:d}){if(!(n&&e&&t&&typeof n=="string"&&(typeof t=="string"||Array.isArray(t))&&typeof e=="object"))throw new EvalError(`ChartDataset: 'name', 'data' and 'type' musst be provided in the options. Got ${n}, ${e} and ${t} instead`);this.type=t,this.id=h,this.name=n,this.color=b,this.data=e,this.scaleLabels=m,this.source=p,this.source=p,this.beginAtZero=a,this.stacked=l,this.sub=_,this.sub_graph=r,this.sub_index=i,this.sub_length=c,this.options=d,this.cgid=h+"-"+n}}},3680:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(h,n)=>{for(var e in n)o(h,e,{get:n[e],enumerable:!0})},T=(h,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of u(n))!j.call(h,a)&&a!==e&&o(h,a,{get:()=>n[a],enumerable:!(t=s(n,a))||t.enumerable});return h},E=h=>T(o({},"__esModule",{value:!0}),h),M={};w(M,{default:()=>f}),D.exports=E(M);var f={active:!1,deactivateGFI:!0,icon:"bi-house",id:"residentialSimulation",isVisibleInMenu:!0,name:"Wohnungsbauquartiere anlegen",renderToWindow:!1,resizableWindow:!1,width:.45,timelinePrefix:"jahr_",groupsList:["Bev\xF6lkerung","Bev\xF6lkerung unter x Jahren","Bev\xF6lkerung ab x Jahren","Bev\xF6lkerung x bis x Jahren","Bev\xF6lkerung x bis unter 18 Jahren","Bev\xF6lkerung Prognose","Arbeitslose","Sozialversicherungspflichtige","SGB II Leistungen","Verkehr"],basePopulationProp:"Bev\xF6lkerung insgesamt",drawingLayer:null,defaults:{name:"Mein Wohnquartier",avgHouseholdSize:2.5,gfz:1,populationDensity:5e3,livingSpace:30},referenceDistrictCharts:[{id:"gender",name:"Demographie nach Gender",scaleLabels:["Anteil","Gender"],labels:["Bev\xF6lkerung weiblich","Bev\xF6lkerung m\xE4nnlich","Sozialversicherungspflichtig Besch\xE4ftigte insgesamt","Sozialversicherungspflichtig besch\xE4ftigte Frauen","Sozialversicherungspflichtig besch\xE4ftigte M\xE4nner"],type:"BarChart"},{id:"age",name:"Demographie nach Altersgruppen",scaleLabels:["Anteil","Alterskohorten"],labels:["Bev\xF6lkerung unter 6 Jahren","Bev\xF6lkerung 6 bis 9 Jahren","Bev\xF6lkerung 10 bis 14 Jahren","Bev\xF6lkerung 15 bis 20 Jahren","Bev\xF6lkerung 21 bis 44 Jahren","Bev\xF6lkerung 45 bis 64 Jahren","Bev\xF6lkerung ab 65 Jahren"],type:"BarChart"}],readmeUrl:{"en-US":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/011residentialsimulation.md","de-DE":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/011wohnquartiereanlegen.md"}}},3718:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(p,_)=>{for(var r in _)u(p,r,{get:_[r],enumerable:!0})},L=(p,_,r,i)=>{if(_&&typeof _=="object"||typeof _=="function")for(let c of w(_))!E.call(p,c)&&c!==r&&u(p,c,{get:()=>_[c],enumerable:!(i=j(_,c))||i.enumerable});return p},f=(p,_,r)=>(r=p!=null?s(T(p)):{},L(_||!p||!p.__esModule?u(r,"default",{value:p,enumerable:!0}):r,p)),h=p=>L(u({},"__esModule",{value:!0}),p),n={};M(n,{getSearchResultsCoordinates:()=>m,getSearchResultsGeometry:()=>b}),D.exports=h(n);var e=f(o(12)),t=f(o(5)),a=f(o(7));function l(p){const _=p.getGeometry().getInteriorPoints();if(_.getPoints().length===1)return _.getPoints()[0].getCoordinates().slice(0,2);if(_.getPoints().length>1){const r=p.getGeometry();return t.getCenter(r.getExtent())}return null}function m(p){const _=a.default.getters["Maps/projectionCode"],r=a.default.getters["MapMarker/markerPoint"],i=a.default.getters["MapMarker/markerPolygon"];let c=r.getSource().getFeatures(),d;return c.length===1&&(d=c[0].getGeometry().getCoordinates()),c=i.getSource().getFeatures(),c.length===1&&(d=l(c[0])),d&&p&&(d=e.transform(d,_,p)),d}function b(){const p=a.default.getters["MapMarker/markerPoint"].getSource().getFeatures(),_=a.default.getters["MapMarker/markerPolygon"].getSource().getFeatures();return p.length===1?p[0].getGeometry():_.length===1?_[0].getGeometry():null}},3720:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(r,i)=>{for(var c in i)u(r,c,{get:i[c],enumerable:!0})},L=(r,i,c,d)=>{if(i&&typeof i=="object"||typeof i=="function")for(let v of w(i))!E.call(r,v)&&v!==c&&u(r,v,{get:()=>i[v],enumerable:!(d=j(i,v))||d.enumerable});return r},f=(r,i,c)=>(c=r!=null?s(T(r)):{},L(i||!r||!r.__esModule?u(c,"default",{value:r,enumerable:!0}):c,r)),h=r=>L(u({},"__esModule",{value:!0}),r),n={};M(n,{default:()=>_}),D.exports=h(n);var e=o(3650),t=o(3721),a=f(o(3731)),l=f(o(3732)),m=f(o(3662)),b=o(152),p=f(o(3733));class _{constructor(i,c,d,v){this.feature=i,this.layer=c,this.guideLayer=d,this.scenarioData=v||{},this.scenario=null,this.eventKeys={},(0,a.default)(this.feature)}renderFeature(i){(0,e.getLayerSource)(this.layer).addFeature(this.feature),this.eventKeys[this.feature.getId()]=(0,e.getLayerSource)(this.layer).on("change",()=>{(0,p.default)(this)}),(i||this.guideLayer)&&(this.guideLayer=i||this.guideLayer,(0,t.addSimulationTag)(this.feature,this.guideLayer,this.layer))}hideFeature(){const i=(0,e.getLayerSource)(this.layer);(0,b.unByKey)(this.eventKeys.modifier),(0,b.unByKey)(this.eventKeys[this.feature.getId()]),i.getFeatureById(this.feature.getId())&&i.removeFeature(this.feature),this.guideLayer&&(0,t.removeSimulationTag)(this.feature,this.guideLayer)}restoreScenarioProperties(){for(const i in this.scenarioData)this.feature.set(i,this.scenarioData[i]),i==="geometry"&&this.scenarioData.geometry&&((0,m.default)(this.feature,this.scenarioData.geometry),this.guideLayer&&((0,t.removeSimulationTag)(this.feature,this.guideLayer),(0,t.addSimulationTag)(this.feature,this.guideLayer,this.layer)))}resetProperties(i,c=!1){const d=this.feature.get("originalData");let v;for(v of i||Object.keys(d))v==="geometry"?this.resetLocation(c):(this.feature.set(v,d[v]),c&&delete this.scenarioData[v]);this.checkScenarioData()}resetLocation(i=!1){const c=this.feature.get("originalData").geometry;c&&((0,m.default)(this.feature,c),i&&(delete this.scenarioData.geometry,this.checkScenarioData()))}checkScenarioData(){Object.keys(this.scenarioData).length===0&&(this.feature.unset("isModified"),(0,b.unByKey)(this.eventKeys.modifier)),this.guideLayer&&((0,t.removeSimulationTag)(this.feature,this.guideLayer),(this.feature.get("isSimulation")||this.feature.get("isModified"))&&this.scenario.isActive&&(0,t.addSimulationTag)(this.feature,this.guideLayer,this.layer))}clearScenarioData(){this.scenarioData={},this.feature.unset("isModified")}setProperties(i){for(const c in i)this.set(c,i[c]);this.feature.get("isSimulation")||(this.eventKeys.modifier=(0,e.getLayerSource)(this.layer).on("change",c=>{const d=c.target;if(!d.hasFeature(this.feature)&&this.scenario.isActive){const v=d.getFeatureById(this.feature.getId());v&&d.removeFeature(v),d.addFeature(this.feature)}})),this.feature.set("isModified",!0),this.guideLayer&&((0,t.removeSimulationTag)(this.feature,this.guideLayer),(0,t.addSimulationTag)(this.feature,this.guideLayer,this.layer))}getOriginalProperties(){return this.feature.get("originalData")}linkModifiedFeatureToSource(){this.eventKeys[this.feature.getId()]=(0,e.getLayerSource)(this.layer).on("change",()=>(0,l.default)(this.feature,this.layer))}set(i,c){this.scenarioData[i]=c,this.feature.set(i,c)}get(i){return this.scenarioData[i]}}},3721:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(i,c)=>{for(var d in c)u(i,d,{get:c[d],enumerable:!0})},L=(i,c,d,v)=>{if(c&&typeof c=="object"||typeof c=="function")for(let g of w(c))!E.call(i,g)&&g!==d&&u(i,g,{get:()=>c[g],enumerable:!(v=j(c,g))||v.enumerable});return i},f=(i,c,d)=>(d=i!=null?s(T(i)):{},L(c||!i||!i.__esModule?u(d,"default",{value:i,enumerable:!0}):d,i)),h=i=>L(u({},"__esModule",{value:!0}),i),n={};M(n,{addSimulationTag:()=>b,clearGuideLayer:()=>_,featureTagStyle:()=>l,featureTagStyleMod:()=>m,removeSimulationTag:()=>p,toggleTagsOnLayerVisibility:()=>r}),D.exports=h(n);var e=o(40),t=f(o(21)),a=f(o(48));function l(i){var c;return new e.Style({text:new e.Text({font:"32px bold sans-serif",fill:new e.Fill({color:"#FC176B"}),stroke:new e.Stroke({width:4,color:"#000"}),text:"*",offsetX:10,offsetY:-5,placement:((c=i.getGeometry())==null?void 0:c.getType())==="Point"?"point":"line"})})}function m(i){var c;return new e.Style({text:new e.Text({font:"22px sans-serif",fill:new e.Fill({color:"#FC176B"}),stroke:new e.Stroke({width:1,color:"#000"}),text:"\u21C4",offsetX:15,offsetY:-12,placement:((c=i.getGeometry())==null?void 0:c.getType())==="Point"?"point":"line"})})}function b(i,c,d){if(!(i.constructor===t.default&&c.constructor===a.default&&d.constructor===a.default))return console.warn(`addSimulationTag: FeatureLayer must be of type "ol/Layer/Vector", got ${d.constructor}. Layer must be of type "ol/Layer/Vector", got ${c.constructor}. Feature must be of type "ol/Feature, got ${i.constructor}`),null;const v=c.getSource(),g=i.clone();return g.setId(i.getId()),g.setGeometry(i.getGeometry()),g.set("featureLayer",d),g.setStyle(null),v.addFeature(g),g}function p(i,c){if(!(i.constructor===t.default&&c.constructor===a.default)){console.warn(`removeSimulationTag: Layer must be of type "ol/Layer/Vector", got ${c.constructor}. Feature must be of type "ol/Feature, got ${i.constructor}`);return}const d=c.getSource(),v=d.getFeatureById(i?.getId());v&&d.removeFeature(v)}function _(i){if(!i.constructor===a.default){console.warn(`removeSimulationTag: Layer must be of type "ol/Layer/Vector", got ${i.constructor}.`);return}i.getSource().clear()}function r(i,c){const d=i.getSource().getFeatures(),v=new e.Style;for(const g of d)c.includes(g.get("featureLayer"))?g.setStyle():g.setStyle(v)}},3722:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(P,S,F)=>S in P?u(P,S,{enumerable:!0,configurable:!0,writable:!0,value:F}):P[S]=F,e=(P,S)=>{for(var F in S||(S={}))f.call(S,F)&&n(P,F,S[F]);if(M)for(var F of M(S))h.call(S,F)&&n(P,F,S[F]);return P},t=(P,S)=>j(P,T(S)),a=(P,S)=>{for(var F in S)u(P,F,{get:S[F],enumerable:!0})},l=(P,S,F,y)=>{if(S&&typeof S=="object"||typeof S=="function")for(let N of E(S))!f.call(P,N)&&N!==F&&u(P,N,{get:()=>S[N],enumerable:!(y=w(S,N))||y.enumerable});return P},m=(P,S,F)=>(F=P!=null?s(L(P)):{},l(S||!P||!P.__esModule?u(F,"default",{value:P,enumerable:!0}):F,P)),b=P=>l(u({},"__esModule",{value:!0}),P),p=(P,S,F)=>new Promise((y,N)=>{var B=G=>{try{A(F.next(G))}catch(z){N(z)}},C=G=>{try{A(F.throw(G))}catch(z){N(z)}},A=G=>G.done?y(G.value):Promise.resolve(G.value).then(B,C);A((F=F.apply(P,S)).next())}),_={};a(_,{default:()=>O}),D.exports=b(_);var r=m(o(3656)),i=m(o(3734)),c=o(3651),d=m(o(7)),v=m(o(4262)),g=m(o(121));class O{constructor(S,F,y){this.feature=S,this.layer=F,this.active=!1,this.activeDistrictLevels=y,this.scenario=null,this.setDefaultProperties(),this.computeContainingDistricts(y)}setDefaultProperties(){this.feature.set("isNeighborhood",!0),this.feature.set("styleId",(0,g.default)()),this.feature.setId((0,v.default)(t(e({},this.feature.getProperties()),{geom:this.feature.getGeometry()})))}renderFeature(){this.active||(this.modifyDistrictStats(),this.layer.getSource().addFeature(this.feature),this.active=!0)}hideFeature(){this.active&&(this.active=!1,this.resetDistrictStats(),this.layer.getSource().removeFeature(this.feature))}computeContainingDistricts(S){const F=(0,c.getAllContainingDistricts)(S,this.feature,!0);this.districts=F.map(y=>e({coverage:y.district.adminFeature?(0,i.default)(this.feature,y.district.adminFeature):1},y))}modifyDistrictStats(){return p(this,null,function*(){for(const S of this.districts){if(yield d.default.dispatch("Tools/DistrictSelector/getStatsByDistrict",{id:S.district.getId(),districtLevel:this.activeDistrictLevels.find(F=>F.label===S.districtLevel)}),S.district.statFeatures.length===0){console.warn(`No statistics have been loaded for ${S.district.getName()}. Cannot apply neighborhood stats.`);continue}this.updateStats(S)}d.default.dispatch("Tools/DistrictSelector/updateDistricts")})}updateStats(S){const F=(0,r.default)(S.district.statFeatures),y=new Date(this.feature.get("year")).getFullYear();let N,B;for(const C of this.feature.get("stats")||[])if(C.valueType==="absolute"){const A=S.district.statFeatures.find(G=>G.get("kategorie")===C.category);if(!A)continue;for(N of F.filter(G=>G>=y))B=parseFloat(A.get("jahr_"+N)),B&&A.set("jahr_"+N,B+Math.round(C.value*S.coverage));A.set("isModified",y)}else C.relation}resetDistrictStats(){const S=new Set(this.scenario.neighborhoods.map(F=>F.districts).flat());for(const F of S)F.district.statFeatures=F.district.originalStatFeatures.map(y=>y.clone());for(const F of this.scenario.neighborhoods)F.active&&F.modifyDistrictStats();d.default.dispatch("Tools/DistrictSelector/updateDistricts")}setFeature(S){this.hideFeature(),this.feature=S,this.setDefaultProperties(),this.renderFeature()}}},3728:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(d,v,g)=>v in d?u(d,v,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[v]=g,e=(d,v)=>{for(var g in v||(v={}))f.call(v,g)&&n(d,g,v[g]);if(M)for(var g of M(v))h.call(v,g)&&n(d,g,v[g]);return d},t=(d,v)=>j(d,T(v)),a=(d,v)=>{for(var g in v)u(d,g,{get:v[g],enumerable:!0})},l=(d,v,g,O)=>{if(v&&typeof v=="object"||typeof v=="function")for(let P of E(v))!f.call(d,P)&&P!==g&&u(d,P,{get:()=>v[P],enumerable:!(O=w(v,P))||O.enumerable});return d},m=(d,v,g)=>(g=d!=null?s(L(d)):{},l(v||!d||!d.__esModule?u(g,"default",{value:d,enumerable:!0}):g,d)),b=d=>l(u({},"__esModule",{value:!0}),d),p={};a(p,{default:()=>c}),D.exports=b(p);var _=o(10),r=m(o(3658)),c=t(e({},(0,_.generateSimpleGetters)(r.default)),{activeSimulatedFeatures(d,{activeScenario:v}){return v?.getSimulatedFeatures()},activeModifiedFeatures(d,{activeScenario:v}){return v?.getModifiedFeatures()},activeModifiedFeaturesCount(d,{activeScenario:v}){return v?.getModifiedFeatures().filter(g=>g.feature.get("isModified"))},scenarioUpdated(d,{activeScenario:v}){return v?.getUpdated()}})},3729:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(d,v,g)=>v in d?u(d,v,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[v]=g,e=(d,v)=>{for(var g in v||(v={}))f.call(v,g)&&n(d,g,v[g]);if(M)for(var g of M(v))h.call(v,g)&&n(d,g,v[g]);return d},t=(d,v)=>j(d,T(v)),a=(d,v)=>{for(var g in v)u(d,g,{get:v[g],enumerable:!0})},l=(d,v,g,O)=>{if(v&&typeof v=="object"||typeof v=="function")for(let P of E(v))!f.call(d,P)&&P!==g&&u(d,P,{get:()=>v[P],enumerable:!(O=w(v,P))||O.enumerable});return d},m=(d,v,g)=>(g=d!=null?s(L(d)):{},l(v||!d||!d.__esModule?u(g,"default",{value:d,enumerable:!0}):g,d)),b=d=>l(u({},"__esModule",{value:!0}),d),p={};a(p,{default:()=>c}),D.exports=b(p);var _=o(10),r=m(o(3658)),c=t(e({},(0,_.generateSimpleMutations)(r.default)),{storeScenarioFeature(d,v){d.scenario.find(g=>g.feature===v.feature&&g.layer===v.layer)||d.scenario.push(v)}})},3730:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(h,n)=>{for(var e in n)o(h,e,{get:n[e],enumerable:!0})},T=(h,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of u(n))!j.call(h,a)&&a!==e&&o(h,a,{get:()=>n[a],enumerable:!(t=s(n,a))||t.enumerable});return h},E=h=>T(o({},"__esModule",{value:!0}),h),M={};w(M,{default:()=>f}),D.exports=E(M);var f={}},3731:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(t,a,l)=>a in t?o(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,M=(t,a)=>{for(var l in a||(a={}))w.call(a,l)&&E(t,l,a[l]);if(j)for(var l of j(a))T.call(a,l)&&E(t,l,a[l]);return t},L=(t,a)=>{for(var l in a)o(t,l,{get:a[l],enumerable:!0})},f=(t,a,l,m)=>{if(a&&typeof a=="object"||typeof a=="function")for(let b of u(a))!w.call(t,b)&&b!==l&&o(t,b,{get:()=>a[b],enumerable:!(m=s(a,b))||m.enumerable});return t},h=t=>f(o({},"__esModule",{value:!0}),t),n={};L(n,{default:()=>e}),D.exports=h(n);function e(t,a=!0){if(!t.get("originalData")){const l=t.getProperties();Object.hasOwnProperty.call(l,"originalData")&&delete l.originalData,t.set("originalData",M({},l)),a&&(t.get("originalData").geometry=t.getGeometry().clone())}}},3732:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(b,p)=>{for(var _ in p)u(b,_,{get:p[_],enumerable:!0})},L=(b,p,_,r)=>{if(p&&typeof p=="object"||typeof p=="function")for(let i of w(p))!E.call(b,i)&&i!==_&&u(b,i,{get:()=>p[i],enumerable:!(r=j(p,i))||r.enumerable});return b},f=(b,p,_)=>(_=b!=null?s(T(b)):{},L(p||!b||!b.__esModule?u(_,"default",{value:b,enumerable:!0}):_,b)),h=b=>L(u({},"__esModule",{value:!0}),b),n=(b,p,_)=>new Promise((r,i)=>{var c=g=>{try{v(_.next(g))}catch(O){i(O)}},d=g=>{try{v(_.throw(g))}catch(O){i(O)}},v=g=>g.done?r(g.value):Promise.resolve(g.value).then(c,d);v((_=_.apply(b,p)).next())}),e={};M(e,{default:()=>m}),D.exports=h(e);var t=o(3650),a=f(o(4224));function l(b,p){return b.getFeatures().find(_=>(0,a.default)(_.getGeometry().getCoordinates(),p.getCoordinates()))}function m(b,p){return n(this,null,function*(){const _=(0,t.getLayerSource)(p),r=_.getFeatureById(b.getId())||l(_,b.get("originalData").geometry);r&&b!==r&&(_.removeFeature(r),_.addFeature(b))})}},3733:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(b,p)=>{for(var _ in p)u(b,_,{get:p[_],enumerable:!0})},L=(b,p,_,r)=>{if(p&&typeof p=="object"||typeof p=="function")for(let i of w(p))!E.call(b,i)&&i!==_&&u(b,i,{get:()=>p[i],enumerable:!(r=j(p,i))||r.enumerable});return b},f=(b,p,_)=>(_=b!=null?s(T(b)):{},L(p||!b||!b.__esModule?u(_,"default",{value:b,enumerable:!0}):_,b)),h=b=>L(u({},"__esModule",{value:!0}),b),n=(b,p,_)=>new Promise((r,i)=>{var c=g=>{try{v(_.next(g))}catch(O){i(O)}},d=g=>{try{v(_.throw(g))}catch(O){i(O)}},v=g=>g.done?r(g.value):Promise.resolve(g.value).then(c,d);v((_=_.apply(b,p)).next())}),e={};M(e,{default:()=>m}),D.exports=h(e);var t=f(o(7)),a=f(o(316)),l=o(3650);function m(b){return n(this,null,function*(){yield a.default.nextTick(),!(0,l.getLayerSource)(b.layer).hasFeature(b.feature)&&t.default.getters["Tools/FeaturesList/isFeatureActive"](b.feature)&&b.scenario.isActive&&(0,l.getLayerSource)(b.layer).addFeature(b.feature)})}},3734:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(l,m)=>{for(var b in m)u(l,b,{get:m[b],enumerable:!0})},L=(l,m,b,p)=>{if(m&&typeof m=="object"||typeof m=="function")for(let _ of w(m))!E.call(l,_)&&_!==b&&u(l,_,{get:()=>m[_],enumerable:!(p=j(m,_))||p.enumerable});return l},f=(l,m,b)=>(b=l!=null?s(T(l)):{},L(m||!l||!l.__esModule?u(b,"default",{value:l,enumerable:!0}):b,l)),h=l=>L(u({},"__esModule",{value:!0}),l),n={};M(n,{default:()=>a}),D.exports=h(n);var e=o(3651),t=f(o(7));function a(l,m){const b=t.default.getters["Maps/projectionCode"],p=(0,e.intersect)([l,m],!0,!0,b),_=l.getGeometry().getArea(),r=p?.getGeometry().getArea()||0;return Math.round((r/_+Number.EPSILON)*1e3)/1e3}},3749:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(a,l)=>{for(var m in l)s(a,m,{get:l[m],enumerable:!0})},E=(a,l,m,b)=>{if(l&&typeof l=="object"||typeof l=="function")for(let p of j(l))!w.call(a,p)&&p!==m&&s(a,p,{get:()=>l[p],enumerable:!(b=u(l,p))||b.enumerable});return a},M=a=>E(s({},"__esModule",{value:!0}),a),L={};T(L,{geomPickerClearDrawPolygon:()=>n,geomPickerGetFeature:()=>t,geomPickerResetLocation:()=>h,geomPickerSetGeometry:()=>e,geomPickerUnlisten:()=>f}),D.exports=M(L);function f(a){a&&(a.locationPickerActive=!1,a.unlisten())}function h(a){a&&a.resetLocation()}function n(a){a.clearDrawPolygon()}function e(a,l){a.setGeometry(l)}function t(a,l=!0){var m;const b=(m=a?.drawLayer)==null?void 0:m.getSource().getFeatures()[0];return l?b?.clone():b}},3750:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(m,b)=>{for(var p in b)u(m,p,{get:b[p],enumerable:!0})},L=(m,b,p,_)=>{if(b&&typeof b=="object"||typeof b=="function")for(let r of w(b))!E.call(m,r)&&r!==p&&u(m,r,{get:()=>b[r],enumerable:!(_=j(b,r))||_.enumerable});return m},f=(m,b,p)=>(p=m!=null?s(T(m)):{},L(b||!m||!m.__esModule?u(p,"default",{value:m,enumerable:!0}):p,m)),h=m=>L(u({},"__esModule",{value:!0}),m),n={};M(n,{default:()=>a,getOlGeomTypeByGmlType:()=>l}),D.exports=h(n);var e=f(o(44)),t=f(o(49));function a(m){return typeof m!="string"?(console.error(`Type must be a string. Got ${typeof m} instead.`),null):m.includes("gml:")?m.includes("Point")?t.default:m.includes("Polygon")?e.default:null:(console.warn(`Type must be part of GML namespace, e.g.: gml:PointPropertyType. Got ${m} instead.`),null)}function l(m){return typeof m!="string"?(console.error(`Type must be a string. Got ${typeof m} instead.`),null):m.includes("gml:")?m.includes("Point")?"Point":m.includes("Polygon")?"Polygon":null:(console.warn(`Type must be part of GML namespace, e.g.: gml:PointPropertyType. Got ${m} instead.`),null)}},3756:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(f,h)=>{for(var n in h)o(f,n,{get:h[n],enumerable:!0})},T=(f,h,n,e)=>{if(h&&typeof h=="object"||typeof h=="function")for(let t of u(h))!j.call(f,t)&&t!==n&&o(f,t,{get:()=>h[t],enumerable:!(e=s(h,t))||e.enumerable});return f},E=f=>T(o({},"__esModule",{value:!0}),f),M={};w(M,{default:()=>L}),D.exports=E(M);function L(f){return f.reduce((h,n)=>{var e;return h.length===0?[{header:n.group},n]:((e=h[h.length-1])==null?void 0:e.group)!==n.group?[...h,{divider:!0},{header:n.group},n]:[...h,n]},[])}},3759:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(_,r)=>{for(var i in r)u(_,i,{get:r[i],enumerable:!0})},L=(_,r,i,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of w(r))!E.call(_,d)&&d!==i&&u(_,d,{get:()=>r[d],enumerable:!(c=j(r,d))||c.enumerable});return _},f=(_,r,i)=>(i=_!=null?s(T(_)):{},L(r||!_||!_.__esModule?u(i,"default",{value:_,enumerable:!0}):i,_)),h=_=>L(u({},"__esModule",{value:!0}),_),n={};M(n,{default:()=>p}),D.exports=h(n);var e=f(o(3720)),t=f(o(3722)),a=o(3650),l=f(o(21)),m=o(3654),b=o(3653);class p{constructor(r,i,c={}){if(this.name=r,this.guideLayer=i,this.simulatedFeatures=[],this.modifiedFeatures=[],this.neighborhoods=[],this.isActive=c.isActive||!1,this.updated=new Date,c.simulatedFeatures)for(const d of c.simulatedFeatures)this.addFeature(d,this.isActive);if(c.modifiedFeatures)for(const d of c.modifiedFeatures)this.addModifiedFeature(d.feature,d.layer,d.scenarioData);if(c.neighborhoods)for(const d of c.neighborhoods)this.addNeighborhood(d,this.isActive)}addFeature(r,i=!0){return r?.constructor!==e.default?(console.error(`Scenario.addFeature: feature must be of Type ScenarioFeature. Got ${r?.constructor} instead.`),null):(r.scenario=this,this.simulatedFeatures.find(c=>c===r)||this.simulatedFeatures.push(r),i&&r.renderFeature(this.guideLayer),this.updateScenario(),r)}addModifiedFeature(r,i,c){if(r?.constructor!==l.default)return console.error(`Scenario.addModifiedFeature: feature must be of Type Feature. Got ${r?.constructor} instead.`),null;const d=new e.default(r,i,this.guideLayer,c);return d.scenario=this,d.linkModifiedFeatureToSource(),this.modifiedFeatures.push(d),d}modifyFeature(r,i,c){if(r?.constructor!==l.default){console.error(`Scenario.modifyFeature: feature must be of Type Feature. Got ${r?.constructor} instead.`);return}if(i?.constructor!==Object){console.error(`Scenario.modifyFeature: properties must be of Type Object. Got ${i?.constructor} instead.`);return}let d=this.getScenarioFeature(r);if(!d){if(!c)return;d=this.addModifiedFeature(r,c)}d.setProperties(i),this.updateScenario()}resetFeature(r,i,c=!1){const d=this.getScenarioFeature(r);d&&d.resetProperties(i,c),this.updateScenario()}resetAllFeatures(){let r;for(r of this.getAllFeatures())r.resetProperties();this.updateScenario()}resetAllDistricts(){let r;for(r of this.neighborhoods)r.hideFeature();this.updateScenario()}resetFeaturesByLayer(r,i,c=!1){const d=this.getScenarioFeaturesByLayer(r);let v;for(v of d)v.resetProperties(i,c);this.updateScenario()}addNeighborhood(r,i=!0){return r.constructor!==t.default?(console.error(`Scenario.addNeighborhood: neighborhood must be of Type ScenarioNeighborhood. Got ${r?.constructor} instead.`),null):(r.scenario=this,this.neighborhoods.push(r),i&&r.renderFeature(),this.updateScenario(),r)}hideScenario(){let r;this.isActive=!1,this.resetAllFeatures(),this.resetAllDistricts();for(r of this.simulatedFeatures)r.hideFeature();this.updateScenario()}prune(){this.hideScenario(),this.simulatedFeatures=[],this.modifiedFeatures=[],this.neighborhoods=[]}pruneSimulatedFeatures(){let r;for(r of this.simulatedFeatures)r.hideFeature();this.simulatedFeatures=[],this.updateScenario()}pruneNeighborhoods(){this.resetAllDistricts(),this.neighborhoods=[]}removeNeighborhood(r){const i=this.getNeighborhood(r);i&&(i.hideFeature(),this.neighborhoods=this.neighborhoods.filter(c=>c!==i)),this.updateScenario()}removeSimulatedFeature(r){const i=this.getScenarioFeature(r);i&&(i.hideFeature(),this.simulatedFeatures=this.simulatedFeatures.filter(c=>c!==i)),this.updateScenario()}restore(){this.isActive=!0;for(const r of this.simulatedFeatures)(0,a.getLayerSource)(r.layer).getFeatures().find(i=>i===r.feature)||r.renderFeature(this.guideLayer),r.restoreScenarioProperties();for(const r of this.modifiedFeatures)r.restoreScenarioProperties();for(const r of this.neighborhoods)r.renderFeature();this.updateScenario()}getAllFeatures(){return[...this.simulatedFeatures,...this.modifiedFeatures]}getSimulatedFeatures(){return[...this.simulatedFeatures]}getModifiedFeatures(){return[...this.modifiedFeatures]}getScenarioFeature(r,i){return i==="simulated"?this.getSimulatedScenarioFeature(r):i==="modified"?this.getModifiedScenarioFeature(r):this.simulatedFeatures.find(c=>c.feature===r)||this.modifiedFeatures.find(c=>c.feature===r)}getSimulatedScenarioFeature(r){return this.simulatedFeatures.find(i=>i.feature===r)}getModifiedScenarioFeature(r){return this.modifiedFeatures.find(i=>i.feature===r)}getNeighborhood(r){return this.neighborhoods.find(i=>i.feature===r)}getNeighborhoods(){return[...this.neighborhoods]}getScenarioFeaturesByLayer(r,i){return i==="simulated"?this.getSimulatedScenarioFeaturesByLayer(r):i==="modified"?this.getModifiedScenarioFeaturesByLayer(r):[...this.simulatedFeatures.filter(c=>c.layer===r),...this.modifiedFeatures.filter(c=>c.layer===r)]}getSimulatedScenarioFeaturesByLayer(r){return this.simulatedFeatures.filter(i=>i.layer===r)}getModifiedScenarioFeaturesByLayer(r){return this.modifiedFeatures.filter(i=>i.layer===r)}exportScenarioFeatures(){const r=(0,m.featuresToGeoJsonCollection)(this.simulatedFeatures.map(i=>i.feature));(0,b.downloadJsonToFile)(r,this.name+"_Simulierte_Einrichtungen.json")}exportScenarioNeighborhoods(){const r=(0,m.featuresToGeoJsonCollection)(this.neighborhoods.map(i=>i.feature));(0,b.downloadJsonToFile)(r,this.name+"_Simulierte_Wohnquartiere.json")}exportScenario(){const r=(0,m.featuresToGeoJsonCollection)([...this.getAllFeatures().map(i=>i.feature),...this.getNeighborhoods().map(i=>i.feature)]);(0,b.downloadJsonToFile)(r,this.name+"_Szenario.json")}updateScenario(){this.updated=new Date}getUpdated(){return this.updated}}},3806:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,f=(r,i,c)=>i in r?u(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,h=(r,i)=>{for(var c in i||(i={}))M.call(i,c)&&f(r,c,i[c]);if(T)for(var c of T(i))L.call(i,c)&&f(r,c,i[c]);return r},n=(r,i)=>{for(var c in i)u(r,c,{get:i[c],enumerable:!0})},e=(r,i,c,d)=>{if(i&&typeof i=="object"||typeof i=="function")for(let v of w(i))!M.call(r,v)&&v!==c&&u(r,v,{get:()=>i[v],enumerable:!(d=j(i,v))||d.enumerable});return r},t=(r,i,c)=>(c=r!=null?s(E(r)):{},e(i||!r||!r.__esModule?u(c,"default",{value:r,enumerable:!0}):c,r)),a=r=>e(u({},"__esModule",{value:!0}),r),l={};n(l,{default:()=>_}),D.exports=a(l);var m=o(10),b=t(o(3680)),_=h({},(0,m.generateSimpleGetters)(b.default))},3807:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,f=(r,i,c)=>i in r?u(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,h=(r,i)=>{for(var c in i||(i={}))M.call(i,c)&&f(r,c,i[c]);if(T)for(var c of T(i))L.call(i,c)&&f(r,c,i[c]);return r},n=(r,i)=>{for(var c in i)u(r,c,{get:i[c],enumerable:!0})},e=(r,i,c,d)=>{if(i&&typeof i=="object"||typeof i=="function")for(let v of w(i))!M.call(r,v)&&v!==c&&u(r,v,{get:()=>i[v],enumerable:!(d=j(i,v))||d.enumerable});return r},t=(r,i,c)=>(c=r!=null?s(E(r)):{},e(i||!r||!r.__esModule?u(c,"default",{value:r,enumerable:!0}):c,r)),a=r=>e(u({},"__esModule",{value:!0}),r),l={};n(l,{default:()=>_}),D.exports=a(l);var m=o(10),b=t(o(3680)),_=h({},(0,m.generateSimpleMutations)(b.default))},3890:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(l,m)=>{for(var b in m)u(l,b,{get:m[b],enumerable:!0})},L=(l,m,b,p)=>{if(m&&typeof m=="object"||typeof m=="function")for(let _ of w(m))!E.call(l,_)&&_!==b&&u(l,_,{get:()=>m[_],enumerable:!(p=j(m,_))||p.enumerable});return l},f=(l,m,b)=>(b=l!=null?s(T(l)):{},L(m||!l||!l.__esModule?u(b,"default",{value:l,enumerable:!0}):b,l)),h=l=>L(u({},"__esModule",{value:!0}),l),n={};M(n,{default:()=>a}),D.exports=h(n);var e=o(3656),t=f(o(4176));function a(l,m,b,p,_,r,i=t.default){const c=b.map(S=>S.getProperties()),d=_+(0,e.getLastAvailableYear)(b,_),v=r?.length>0?i.filter(S=>r.includes(S.group)):i,g=b.find(S=>S.get("kategorie")===p),O=parseFloat(g.get(d)),P={reference:{districtName:l,districtLevel:m},absolute:[],relative:[]};for(const S of v){const F=c.find(N=>N.kategorie===S.value);let y;S.valueType==="absolute"?y=parseFloat(F[d])/O:y=parseFloat(F[d]),P[S.valueType].push({group:F.group,category:F.kategorie,value:y,valueType:S.valueType})}return P}},3969:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(_,r)=>{for(var i in r)s(_,i,{get:r[i],enumerable:!0})},E=(_,r,i,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of j(r))!w.call(_,d)&&d!==i&&s(_,d,{get:()=>r[d],enumerable:!(c=u(r,d))||c.enumerable});return _},M=_=>E(s({},"__esModule",{value:!0}),_),L={};T(L,{updateArea:()=>f,updateBgf:()=>m,updateDensity:()=>e,updateGfz:()=>l,updateHousholdSize:()=>b,updateLivingSpace:()=>t,updateLivingSpaceRatio:()=>a,updateResidents:()=>n,updateUnits:()=>h}),D.exports=M(L);function f(_,r,i){const c=_,d=r.livingSpace,v=r.avgHouseholdSize,g=r.gfz,O=c*g,P=Math.round(100*(O*r.livingSpaceRatio)/d)/100,S=P*1e6/c,F=P/v;r.residents=P,r.populationDensity=S,r.bgf=O,r.housingUnits=F,i.residents=P,i.populationDensity=S,i.bgf=O,i.housingUnits=F}function h(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.livingSpace,P=r.avgHouseholdSize,S=r.livingSpaceRatio,F=_,y=F*P,N=y*1e6/g,B=y*(O/r.livingSpaceRatio),C=B/g,A=p(P,N,C,B,O,g,S,d,v);return A.length>0?(r.housingUnits=i.housingUnits,A):(r.residents=y,r.populationDensity=N,r.bgf=B,r.gfz=C,r.housingUnits=F,i.housingUnits=F,i.residents=y,i.populationDensity=N,i.bgf=B,i.gfz=C,[])}function n(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.livingSpace,P=r.avgHouseholdSize,S=r.livingSpaceRatio,F=_,y=_/P,N=F*1e6/g,B=F*(O/S),C=B/g,A=p(P,N,C,B,O,g,S,d,v);return A.length>0?(r.residents=i.residents,A):(r.housingUnits=y,r.populationDensity=N,r.bgf=B,r.gfz=C,r.residents=F,i.residents=F,i.housingUnits=y,i.populationDensity=N,i.bgf=B,i.gfz=C,[])}function e(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.livingSpace,P=r.avgHouseholdSize,S=r.livingSpaceRatio,F=_,y=_*g/1e6,N=y/P,B=y*(O/S),C=B/g,A=p(P,F,C,B,O,g,S,d,v);return A.length>0?(r.populationDensity=i.populationDensity,A):(r.housingUnits=N,r.residents=y,r.bgf=B,r.gfz=C,r.populationDensity=F,i.populationDensity=F,i.housingUnits=N,i.residents=y,i.bgf=B,i.gfz=C,[])}function t(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.avgHouseholdSize,P=r.livingSpaceRatio,S=r.gfz,F=S*g,y=_,N=F*P/y,B=N*1e6/g,C=N/O,A=p(O,B,S,F,y,g,P,d,v);return A.length>0?(r.livingSpace=i.livingSpace,A):(r.livingSpace=y,r.housingUnits=C,r.residents=N,r.populationDensity=B,r.bgf=F,r.livingSpace=y,i.livingSpace=y,i.housingUnits=C,i.residents=N,i.populationDensity=B,i.bgf=F,[])}function a(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.avgHouseholdSize,P=r.gfz,S=r.bgf,F=r.livingSpace,y=_,N=S*y/F,B=N*1e6/g,C=N/O,A=p(O,B,P,S,F,g,y,d,v);return A.length>0?(r.livingSpaceRatio=i.livingSpaceRatio,A):(r.housingUnits=C,r.residents=N,r.populationDensity=B,r.livingSpaceRatio=y,i.livingSpaceRatio=y,i.housingUnits=C,i.residents=N,i.populationDensity=B,[])}function l(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.avgHouseholdSize,P=r.livingSpace,S=r.livingSpaceRatio,F=_,y=F*g,N=y*S/P,B=N*1e6/g,C=N/O,A=p(O,B,F,y,P,g,S,d,v);return A.length>0?(r.gfz=i.gfz,A):(r.housingUnits=C,r.residents=N,r.populationDensity=B,r.bgf=y,r.gfz=F,i.gfz=F,i.housingUnits=C,i.residents=N,i.populationDensity=B,i.bgf=y,[])}function m(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.avgHouseholdSize,P=r.livingSpace,S=r.livingSpaceRatio,F=_,y=F/g,N=F*S/P,B=N*1e6/g,C=N/O,A=p(O,B,y,F,P,g,S,d,v);return A.length>0?(r.bgf=i.bgf,A):(r.housingUnits=C,r.residents=N,r.populationDensity=B,r.gfz=y,r.bgf=F,i.bgf=F,i.housingUnits=C,i.residents=N,i.populationDensity=B,i.gfz=y,[])}function b(_,r,i,c,d,v){if(c===0)return[];const g=r.area,O=r.livingSpace,P=r.residents,S=r.gfz,F=r.livingSpaceRatio,y=S*g,N=_,B=P*1e6/g,C=P/N,A=p(N,B,S,y,O,g,F,d,v);return A.length>0?(r.avgHouseholdSize=i.avgHouseholdSize,A):(r.housingUnits=C,r.populationDensity=B,r.bgf=y,r.avgHouseholdSize=N,i.avgHouseholdSize=N,i.housingUnits=C,i.populationDensity=B,i.bgf=y,[])}function p(_,r,i,c,d,v,g,O={householdSize:1,populationDensity:0,gfz:0,livingSpace:10,livingSpaceRatio:0},P={householdSize:6,populationDensity:5e4,gfz:4,livingSpace:100,livingSpaceRatio:1}){const S=[];return(_<O.householdSize||_>P.householdSize)&&S.push({id:"householdSize",val:_}),(r<O.populationDensity||r>P.populationDensity)&&S.push({id:"populationDensity",val:r}),(i<O.gfz||i>P.gfz)&&S.push({id:"gfz",val:i}),(c<O.gfz*v||c>P.gfz*v)&&S.push({id:"bgf",val:c}),(d<O.livingSpace||d>P.livingSpace)&&S.push({id:"livingSpace",val:d}),(g<O.livingSpaceRatio||g>=P.livingSpaceRatio)&&S.push({id:"livingSpaceRatio",val:g}),S}},3970:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(e,t)=>{for(var a in t)s(e,a,{get:t[a],enumerable:!0})},E=(e,t,a,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let m of j(t))!w.call(e,m)&&m!==a&&s(e,m,{get:()=>t[m],enumerable:!(l=u(t,m))||l.enumerable});return e},M=e=>E(s({},"__esModule",{value:!0}),e),L={};T(L,{default:()=>n}),D.exports=M(L);var f=o(40);function h(e){var t,a;return((a=(t=e.get("stats"))==null?void 0:t.find(l=>l.category==="Bev\xF6lkerung insgesamt"))==null?void 0:a.value)||Math.round(e.get("residents"))}function n(e){return[new f.Style({zIndex:0,fill:new f.Fill({color:[160,255,210,.5]}),stroke:new f.Stroke({width:4,color:[0,104,55,1],lineDash:[5,5]})}),new f.Style({zIndex:1,fill:new f.Fill({color:[0,0,0,0]}),stroke:new f.Stroke({width:0,color:[0,0,0,0]}),text:new f.Text({font:"12px Calibri, bold, sans-serif",fill:new f.Fill({color:"#000"}),stroke:new f.Stroke({color:"#fff",width:1}),text:h(e).toLocaleString("de-DE")+" EW",offsetY:20})}),new f.Style({zIndex:2,fill:new f.Fill({color:[0,0,0,0]}),stroke:new f.Stroke({width:0,color:[0,0,0,0]}),text:new f.Text({font:"12px Calibri, bold, sans-serif",fill:new f.Fill({color:"#000"}),stroke:new f.Stroke({color:"#fff",width:1}),text:Math.round(e.get("area")).toLocaleString("de-DE")+" m\xB2",offsetY:4})}),new f.Style({zIndex:3,fill:new f.Fill({color:[0,0,0,0]}),stroke:new f.Stroke({width:0,color:[0,0,0,0]}),text:new f.Text({font:"16px Calibri, sans-serif",fill:new f.Fill({color:[0,0,0]}),placement:"point",backgroundFill:new f.Fill({color:[255,255,255]}),padding:[5,10,5,10],text:e.get("name"),offsetY:-20,overflow:!0})})]}},3971:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=(m,b)=>{for(var p in b)u(m,p,{get:b[p],enumerable:!0})},L=(m,b,p,_)=>{if(b&&typeof b=="object"||typeof b=="function")for(let r of w(b))!E.call(m,r)&&r!==p&&u(m,r,{get:()=>b[r],enumerable:!(_=j(b,r))||_.enumerable});return m},f=(m,b,p)=>(p=m!=null?s(T(m)):{},L(b||!m||!m.__esModule?u(p,"default",{value:m,enumerable:!0}):p,m)),h=m=>L(u({},"__esModule",{value:!0}),m),n={};M(n,{default:()=>l}),D.exports=h(n);var e=f(o(3806)),t=f(o(3807)),a=f(o(3680)),l={namespaced:!0,state:a.default,mutations:t.default,getters:e.default}},3972:function(D){D.exports=JSON.parse('{"modules":{"tools":{"cosi":{"residentialSimulation":{"title":"Wohnungsbauquartiere anlegen","subTitle":"Quartier anlegen","help":"Lorem Ipsum","geom":"Geometrie","noGeomWarning":"Bitte erst Geometrie festlegen!","helpDrawGeom":"Polygon zeichnen oder ausw\xE4hlen","units":"Wohneinheiten","helpUnits":"Anzahl der Wohneinheiten festlegen","unitUnits":"Einheiten","bgf":"Bruttogeschossfl\xE4che (BGF)","helpBgf":"Bruttogeschossfl\xE4che (BGF) in m\xB2 festlegen","gfz":"Geschossfl\xE4chenzahl (GFZ)","helpGfz":"Geschossfl\xE4chenzahl (GFZ) anteilig an der BGF festlegen","unitGfz":"GFZ","livingSpace":"Wohnfl\xE4che pro Person","helpLivingSpace":"Wohnfl\xE4che pro Person festlegen","unitLivingSpace":"m\xB2 / EW","populationDensity":"Bev\xF6lkerungsdichte","helpPopulationDensity":"Bev\xF6lkerungsdichte in EW/km\xB2 festlegen","unitPopulationDensity":"EW / km\xB2","livingSpaceRatio":"Verh\xE4ltnis Wohnfl\xE4che / BGF","helpLivingSpaceRatio":"Verh\xE4ltnis Wohnfl\xE4che / BGF als Dezimalwert (z.B. 0.8) festlegen","unitLivingSpaceRatio":"WF / BGF","householdSize":"\xD8 Haushaltsgr\xF6\xDFe","helpHouseholdSize":" Durchschnittliche Haushaltsgr\xF6\xDFe festlegen","unitHouseholdSize":"Personen","visualizeDemographics":"Bev\xF6lkerungsverteilung","createFeature":"Anlegen","createFeatureHelp":"Wohnquartier anlegen - Statistische Daten werden dem umliegenden Gebiet zugerechnet","resetFeature":"Zur\xFCcksetzen","editFeature":"Wohnquartier bearbeiten","dateOfCompletion":"Jahr der Fertigstellung","valueError":"Die Operation w\xFCrde folgende ung\xFCltige Werte zu Folge haben:","bounds":"Grenzwerte:"},"referencePicker":{"reference":"Referenzgebiet","titleReference":"Referenzgebiet ausw\xE4hlen (optional)","pickReference":"Gebiet ausw\xE4hlen","helpPickReference":"Statistische Daten aus einem Referenzgebiet extrapolieren","errorPickReference":"Statistische Daten des Referenzgebiets konnten nicht geladen werden. Bitte versuchen Sie es erneut oder laden Sie die Anwendung neu.","noReference":"Ohne Referenzgebiet werden die Daten des umliegenden Gebietes herangezogen."},"statisticsTable":{"statsCategory":"Kategorie","statsValue":"Wert","statsType":"Typ","editStatsTable":"Statistische Daten bearbeiten","editStatsField":"Wert bearbeiten","editStatsInfo":"Bitte beachten Sie, dass nach der Ver\xE4nderung eines Wertes keine Sicherheit mehr besteht, dass relative und absolute Werte zueinander passen oder Abh\xE4ngigkeiten zwischen Werten realistisch abgebildet werden.","isNotNumber":"Muss eine Zahl sein"},"neighborhoodEditor":{"invalidDate":"Bitte geben Sie ein Datum im Format YYYY-MM ein","updateStats":"\xC4nderungen speichern","changeName":"Name \xE4ndern","confirmDelete":"M\xF6chten Sie das ausgew\xE4hlte Quartier wirklich l\xF6schen?"}}}}}')},3973:function(D){D.exports=JSON.parse('{"modules":{"tools":{"cosi":{"residentialSimulation":{"title":"Create Residential Projects","subTitle":"Create Residential","titleReference":"Select reference area (optional)","pickReference":"Select area","help":"Lorem Ipsum","createFeature":"Create"}}}}}')},4154:function(D,x,o){"use strict";o.r(x);var s=o(4155),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4155:function(D,x,o){var s=Object.defineProperty,u=Object.defineProperties,j=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertyNames,E=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,f=(p,_,r)=>_ in p?s(p,_,{enumerable:!0,configurable:!0,writable:!0,value:r}):p[_]=r,h=(p,_)=>{for(var r in _||(_={}))M.call(_,r)&&f(p,r,_[r]);if(E)for(var r of E(_))L.call(_,r)&&f(p,r,_[r]);return p},n=(p,_)=>u(p,w(_)),e=(p,_)=>{for(var r in _)s(p,r,{get:_[r],enumerable:!0})},t=(p,_,r,i)=>{if(_&&typeof _=="object"||typeof _=="function")for(let c of T(_))!M.call(p,c)&&c!==r&&s(p,c,{get:()=>_[c],enumerable:!(i=j(_,c))||i.enumerable});return p},a=p=>t(s({},"__esModule",{value:!0}),p),l={};e(l,{default:()=>b}),D.exports=a(l);var m=o(8),b={name:"ToolInfo",props:{title:{type:String,default:"Werkzeuginformationen (Link \xF6ffnen)"},url:{type:[String,Object],default:null},infoText:{type:String,default:void 0},summary:{type:String,default:null},locale:{type:String,default:"de"}},methods:n(h({},(0,m.mapActions)("Alerting",["addSingleAlert","cleanup"])),{showInfo(){return this.url?window.open(this.getUrl(),"_blank"):(this.infoText&&(this.cleanup(),this.addSingleAlert({category:"Info",content:this.infoText,displayClass:"info"})),null)},getUrl(){if(typeof this.url=="string")return this.url;const p=Object.keys(this.url).find(_=>_.substring(0,_.indexOf("-"))===this.locale.substring(0,_.indexOf("-")));return this.url[p]}})}},4156:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("div",[t("v-row",{attrs:{dense:"",justify:"end"}},[t("v-col",{attrs:{cols:"17"}},[e.summary?t("p",[e._v(`
                `+e._s(e.summary)+`
            `)]):e._e()]),e._v(" "),t("v-col",{attrs:{cols:"1"}},[e.infoText||e.url?t("v-btn",{staticClass:"info_btn",attrs:{title:e.title,depressed:"",right:"",icon:"","x-small":""},on:{click:e.showInfo}},[t("v-icon",[e._v("mdi-help-circle")])],1):e._e()],1)],1),e._v(" "),t("v-divider")],1)},h=[];f._withStripped=!0},4157:function(D,x,o){},4162:function(D,x,o){"use strict";o.r(x);var s=o(4163),u=o(4154);for(var j in u)["default"].indexOf(j)<0&&function(M){o.d(x,M,function(){return u[M]})}(j);var w=o(4164),T=o(1),E=Object(T.a)(u.default,s.render,s.staticRenderFns,!1,null,"0f052480",null);x.default=E.exports},4163:function(D,x,o){"use strict";var s=o(4156),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},4164:function(D,x,o){"use strict";var s=o(4157),u=o.n(s)},4183:function(D,x,o){"use strict";o.r(x);var s=o(4184),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4184:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(y,N,B)=>N in y?u(y,N,{enumerable:!0,configurable:!0,writable:!0,value:B}):y[N]=B,e=(y,N)=>{for(var B in N||(N={}))f.call(N,B)&&n(y,B,N[B]);if(M)for(var B of M(N))h.call(N,B)&&n(y,B,N[B]);return y},t=(y,N)=>j(y,T(N)),a=(y,N)=>{for(var B in N)u(y,B,{get:N[B],enumerable:!0})},l=(y,N,B,C)=>{if(N&&typeof N=="object"||typeof N=="function")for(let A of E(N))!f.call(y,A)&&A!==B&&u(y,A,{get:()=>N[A],enumerable:!(C=w(N,A))||C.enumerable});return y},m=(y,N,B)=>(B=y!=null?s(L(y)):{},l(N||!y||!y.__esModule?u(B,"default",{value:y,enumerable:!0}):B,y)),b=y=>l(u({},"__esModule",{value:!0}),y),p=(y,N,B)=>new Promise((C,A)=>{var G=U=>{try{V(B.next(U))}catch(K){A(K)}},z=U=>{try{V(B.throw(U))}catch(K){A(K)}},V=U=>U.done?C(U.value):Promise.resolve(U.value).then(G,z);V((B=B.apply(y,N)).next())}),_={};a(_,{default:()=>F}),D.exports=b(_);var r=o(8),i=m(o(317)),c=o(3750),d=m(o(21)),v=o(44),g=m(o(49)),O=o(62),P=o(3718),S=o(3649),F={name:"GeometryPicker",props:{geomField:{type:Object,required:!0},isGml:{type:Boolean,required:!1,default:!0},useIcons:{type:Boolean,required:!1,default:!0},id:{type:String,default:"geometry_picker"},additionalSelectLayerIds:{type:Array,default:()=>["importDrawLayer"]}},data(){return{geometry:{type:"",value:null},beautifyKey:i.default,locationPickerActive:!1,pickPolygonActive:!1,drawPolygonInteraction:null,drawLayer:null,polygonSelect:null,map:void 0}},computed:t(e(e({},(0,r.mapGetters)("Maps",["getLayerById","projectionCode"])),(0,r.mapGetters)("Tools/FeaturesList",["activeVectorLayerList"])),{geomCoords(){return this.geometry.value?JSON.stringify(this.geometry.value.getCoordinates()):void 0},geom(){return this.geometry.value}}),watch:{geom(y){this.$emit("updateGeometry",y)}},created(){return p(this,null,function*(){this.geomField.type&&(this.geometry.type=this.isGml?(0,c.getOlGeomTypeByGmlType)(this.geomField.type):this.geomField.type),this.map=mapCollection.getMap("2D"),yield this.createDrawingLayer()})},beforeDestroy(){this.unlisten(),this.clearDrawPolygon(),this.removePointMarker()},methods:t(e(e({},(0,r.mapActions)("MapMarker",["placingPointMarker","removePointMarker"])),(0,r.mapActions)("Maps",["addNewLayerIfNotExists"])),{createDrawingLayer(){return p(this,null,function*(){const y=yield this.addNewLayerIfNotExists({layerName:this.id+"_draw"});return y.setVisible(!0),this.drawLayer=y,y})},toggleLocationPicker(y){this.locationPickerActive=!this.locationPickerActive,this.geometry.type=this.isGml?(0,c.getOlGeomTypeByGmlType)(y):y,this.locationPickerActive?this.listen():(this.pickPolygonActive=!1,this.unlisten())},listen(){this.geometry.type==="Point"?(this.map.addEventListener("click",this.pickLocation),(0,S.onSearchbar)(this.pickLocationBySearchbar.bind(this))):this.geometry.type==="Polygon"?(this.drawPolygon(),(0,S.onSearchbar)(this.pickPolygonBySearchbar.bind(this))):this.locationPickerActive=!1},unlisten(){this.geometry.type==="Point"?this.map.removeEventListener("click",this.pickLocation):this.geometry.type==="Polygon"&&(this.map.removeInteraction(this.drawPolygonInteraction),this.map.removeInteraction(this.polygonSelect),this.drawPolygonInteraction=null,this.polygonSelect=null),(0,S.offSearchbar)()},pickLocation(y){this.geometry.value=new g.default(y.coordinate),this.placingPointMarker(y.coordinate)},resetLocation(){this.geometry.value=null,this.removePointMarker(),this.clearDrawPolygon()},pickLocationBySearchbar(){this.geometry.value=new g.default((0,P.getSearchResultsCoordinates)())},pickPolygonBySearchbar(){const y=(0,P.getSearchResultsGeometry)();y&&this.setGeometry(y)},togglePickPolygon(){this.pickPolygonActive=!this.pickPolygonActive,this.unlisten(),this.clearDrawPolygon(),this.pickPolygonActive?this.pickPolygon():this.drawPolygon()},pickPolygon(){const y=[...this.activeVectorLayerList,...this.additionalSelectLayerIds.map(N=>this.getLayerById({layerId:N}))];this.polygonSelect=new O.Select({layers:y,style:null}),this.map.addInteraction(this.polygonSelect),this.polygonSelect.on("select",this.onPolygonSelect.bind(this))},onPolygonSelect(y){const N=y.selected[0];let B=N?.getGeometry().clone(),C=B?.getType();C==="Circle"&&(B=(0,v.fromCircle)(B,64),C="Polygon"),(C==="Polygon"||C==="MultiPolygon")&&(this.geometry.value=B,this.setDrawPolygon(B),this.pickPolygonActive=!1)},drawPolygon(){this.drawPolygonInteraction=new O.Draw({source:this.drawLayer.getSource(),type:"Polygon"}),this.map.addInteraction(this.drawPolygonInteraction),this.drawPolygonInteraction.on("drawstart",this.onDrawPolygonStart.bind(this)),this.drawPolygonInteraction.on("drawend",this.onDrawPolygonEnd.bind(this))},clearDrawPolygon(){this.drawLayer.getSource().clear()},setDrawPolygon(y){this.clearDrawPolygon(),this.drawLayer.getSource().addFeature(new d.default({geometry:y}))},undoDrawPolygonStep(){this.drawPolygonInteraction.removeLastPoint()},onDrawPolygonStart(){this.clearDrawPolygon()},onDrawPolygonEnd(y){this.geometry.value=y.feature.getGeometry()},drawPolygonByCoords(y){try{const N=new v.Polygon(y);this.setDrawPolygon(N),this.geometry.value=N}catch{console.warn("GeometryPicker: The entered geometry is not a valid Polygon. Please check the List of Coordinates.")}},drawPointByCoords(y){try{this.geometry.value=new g.default(y),this.placingPointMarker(y)}catch{console.warn("GeometryPicker: The entered geometry is not a valid Point. Please check the List of Coordinates.")}},setGeomByInput(y){let N;try{N=JSON.parse(y)}catch{N=y?.split(",").map(C=>parseFloat(C))}this.geometry.type==="Point"&&this.drawPointByCoords(N),this.geometry.type==="Polygon"&&this.drawPolygonByCoords(N)},setGeometry(y){return p(this,null,function*(){const N=y?.getType(),B=y?.clone();yield this.$nextTick(),this.$set(this.geometry,"value",B),this.geometry.type==="Point"&&N==="Point"?this.placingPointMarker(B.getCoordinates()):this.geometry.type==="Polygon"&&(N==="Polygon"||N==="MultiPolygon")&&this.setDrawPolygon(B)})}})}},4208:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",{attrs:{title:e.beautifyKey(e.geomField.name)}},[e._v(`
            `+e._s(e.beautifyKey(e.geomField.name))+`
        `)])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("v-text-field",{attrs:{value:e.geomCoords,name:e.geomField.name,label:e.$t("additional:modules.tools.cosi.dataTypes.geometry"),dense:""},on:{change:e.setGeomByInput},scopedSlots:e._u([{key:"append",fn:function(){return[t("v-btn",{attrs:{dense:"","x-small":"",tile:"",color:e.locationPickerActive?"warning":"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioBuilder.chooseLocation")},on:{click:function(a){return e.toggleLocationPicker(e.geomField.type)}}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-lead-pencil")])],1):t("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.chooseLocation"))+`
                    `)])]),e._v(" "),e.geometry.type==="Polygon"?t("v-btn",{attrs:{dense:"","x-small":"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioBuilder.undo"),disabled:!e.locationPickerActive},on:{click:e.undoDrawPolygonStep}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-undo")])],1):t("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.undo"))+`
                    `)])]):e._e(),e._v(" "),e.geometry.type==="Polygon"?t("v-btn",{staticClass:"ms-1",attrs:{dense:"","x-small":"",tile:"",color:e.pickPolygonActive?"warning":"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioBuilder.pick"),disabled:!e.locationPickerActive},on:{click:e.togglePickPolygon}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-selection-ellipse-arrow-inside")])],1):t("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.pick"))+`
                    `)])]):e._e(),e._v(" "),t("v-btn",{staticClass:"ms-1",attrs:{dense:"","x-small":"",tile:"",color:"grey lighten-1",disabled:!e.geom,title:e.$t("additional:modules.tools.cosi.scenarioBuilder.resetLocation")},on:{click:e.resetLocation}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-delete-forever")])],1):t("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.resetLocation"))+`
                    `)])])]},proxy:!0}])})],1)],1)},h=[];f._withStripped=!0},4230:function(D,x,o){"use strict";o.r(x);var s=o(4231),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4231:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(O,P,S)=>P in O?u(O,P,{enumerable:!0,configurable:!0,writable:!0,value:S}):O[P]=S,e=(O,P)=>{for(var S in P||(P={}))f.call(P,S)&&n(O,S,P[S]);if(M)for(var S of M(P))h.call(P,S)&&n(O,S,P[S]);return O},t=(O,P)=>j(O,T(P)),a=(O,P)=>{for(var S in P)u(O,S,{get:P[S],enumerable:!0})},l=(O,P,S,F)=>{if(P&&typeof P=="object"||typeof P=="function")for(let y of E(P))!f.call(O,y)&&y!==S&&u(O,y,{get:()=>P[y],enumerable:!(F=w(P,y))||F.enumerable});return O},m=(O,P,S)=>(S=O!=null?s(L(O)):{},l(P||!O||!O.__esModule?u(S,"default",{value:O,enumerable:!0}):S,O)),b=O=>l(u({},"__esModule",{value:!0}),O),p={};a(p,{default:()=>g}),D.exports=b(p);var _=m(o(3728)),r=m(o(3729)),i=m(o(3730)),c=o(8),d=m(o(451)),v=m(o(3759)),g={name:"ScenarioManager",components:{Modal:d.default},data:()=>({newScenarioName:"",newScenarioValid:!0,createNewScenarioModalOpen:!1,confirmDialog:!1,confirmText:"",confirmAction:{function:()=>null,text:""}}),computed:t(e({},(0,c.mapGetters)("Tools/ScenarioBuilder",Object.keys(_.default))),{scenarioNames(){return this.scenarios.map(O=>O.name)},invalidScenarioName(){return this.newScenarioName.length===0||this.scenarioNames.includes(this.newScenarioName)},scenarioByName:()=>O=>(void 0).scenarios.find(P=>P.name===O),newScenarioRules(){return[O=>!!O||this.$t("additional:modules.tools.cosi.scenarioBuilder.required"),O=>!this.scenarioNames.includes(O)||this.$t("additional:modules.tools.cosi.scenarioManager.dublicateName")]},_activeScenario:{get(){return this.activeScenario},set(O){this.setActiveScenario(O)}}}),watch:{activeScenario(O,P){P&&P.hideScenario(),O&&O.restore()},createNewScenarioModalOpen(O){return O?document.addEventListener("keyup",this.checkKey):document.removeEventListener("keyup",this.checkKey)}},methods:t(e(e({},(0,c.mapMutations)("Tools/ScenarioBuilder",Object.keys(r.default))),(0,c.mapActions)("Tools/ScenarioBuilder",Object.keys(i.default))),{checkKey(O){O.code==="Enter"&&(this.invalidScenarioName||this.createNewScenario())},createNewScenario(){const O=new v.default(this.newScenarioName,this.guideLayer);this.scenarios.push(O),this.createNewScenarioModalOpen=!1,this.newScenarioName="",this.setActiveScenario(O)},deleteScenario(){this.activeScenario.prune(),this.setScenarios(this.scenarios.filter(O=>O!==this.activeScenario)),this.setActiveScenario(null),this.confirmDialog=!1},pruneActiveScenario(){this.activeScenario.prune(),this.confirmDialog=!1,this.$emit("pruneScenario")},pruneActiveScenarioNeighborhoods(){this.activeScenario.pruneNeighborhoods(),this.confirmDialog=!1,this.$emit("pruneScenario","neighborhoods")},pruneActiveScenarioSimulatedFeatures(){this.activeScenario.pruneSimulatedFeatures(),this.confirmDialog=!1,this.$emit("pruneScenario","simulated")},onDelete(){this.confirmDialog=!0,this.confirmText=this.$t("additional:modules.tools.cosi.scenarioManager.deleteScenarioWarning"),this.confirmAction.function=this.deleteScenario,this.confirmAction.text=this.$t("common:button.delete")},onPruneAll(){this.confirmDialog=!0,this.confirmText=this.$t("additional:modules.tools.cosi.scenarioManager.pruneAllFeaturesWarning"),this.confirmAction.function=this.pruneActiveScenario,this.confirmAction.text=this.$t("common:button.delete")},onPruneNeighborhoods(){this.confirmDialog=!0,this.confirmText=this.$t("additional:modules.tools.cosi.scenarioManager.pruneNeighborhoodsWarning"),this.confirmAction.function=this.pruneActiveScenarioNeighborhoods,this.confirmAction.text=this.$t("common:button.delete")},onPruneSimulation(){this.confirmDialog=!0,this.confirmText=this.$t("additional:modules.tools.cosi.scenarioManager.pruneSimulatedFeaturesWarning"),this.confirmAction.function=this.pruneActiveScenarioSimulatedFeatures,this.confirmAction.text=this.$t("common:button.delete")}})}},4255:function(D,x,o){"use strict";o.r(x);var s=o(4256),u=o(4183);for(var j in u)["default"].indexOf(j)<0&&function(E){o.d(x,E,function(){return u[E]})}(j);var w=o(1),T=Object(w.a)(u.default,s.render,s.staticRenderFns,!1,null,null,null);x.default=T.exports},4256:function(D,x,o){"use strict";var s=o(4208),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},4261:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"scenario-manager"}},[t("div",[t("span",{staticClass:"text-subtitle-2"},[e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.title"))+`
        `)])]),e._v(" "),t("div",{staticClass:"mb-2"},[e._v(`
        Anlegen und Verwalten der Szenarien f\xFCr fiktive Daten. In einem Szenario k\xF6nnen Einrichtungen und Wohnquartiere simuliert, sowie bestehende Einrichtungen ver\xE4ndert werden.
    `)]),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"6"}},[t("v-select",{attrs:{items:e.scenarios,"item-text":"name","item-value":"name","return-object":"","no-data-text":e.$t("additional:modules.tools.cosi.scenarioManager.noScenarios"),label:e.$t("additional:modules.tools.cosi.scenarioManager.selectScenarios"),title:e.$t("additional:modules.tools.cosi.scenarioManager.selectScenarios"),outlined:"",dense:"",clearable:""},model:{value:e._activeScenario,callback:function(a){e._activeScenario=a},expression:"_activeScenario"}})],1),e._v(" "),t("v-col",{staticClass:"flex",attrs:{cols:"6"}},[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioManager.createNewTitle")},on:{click:function(a){e.createNewScenarioModalOpen=!e.createNewScenarioModalOpen}}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-domain-plus")])],1):t("span",[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.createNewTitle"))+`
                `)])]),e._v(" "),t("v-menu",{attrs:{"open-on-hover":"",top:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:l}){return[t("v-btn",e._g(e._b({staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioManager.exportScenario"),disabled:!e.activeScenario},on:{click:function(m){e.activeScenario&&e.activeScenario.exportScenario()}}},"v-btn",l,!1),a),[e.useIcons?t("span",[t("v-icon",[e._v("mdi-download")])],1):t("span",[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.exportScenario"))+`
                        `)])])]}}])},[e._v(" "),t("v-list",[t("v-list-item",[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioManager.exportSimulatedFeatures"),disabled:!e.activeScenario},on:{click:function(a){e.activeScenario&&e.activeScenario.exportScenarioFeatures()}}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-map-marker-multiple")])],1):t("span",[e._v(`
                                `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.exportSimulatedFeatures"))+`
                            `)])])],1),e._v(" "),t("v-list-item",[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioManager.exportNeighborhoods"),disabled:!e.activeScenario},on:{click:function(a){e.activeScenario&&e.activeScenario.exportScenarioNeighborhoods()}}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-home")])],1):t("span",[e._v(`
                                `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.exportNeighborhoods"))+`
                            `)])])],1),e._v(" "),t("v-list-item",[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioManager.exportScenario"),disabled:!e.activeScenario},on:{click:function(a){e.activeScenario&&e.activeScenario.exportScenario()}}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-download")])],1):t("span",[e._v(`
                                `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.exportScenario"))+`
                            `)])])],1)],1)],1),e._v(" "),t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",disabled:!e._activeScenario,title:e.$t("additional:modules.tools.cosi.scenarioManager.deleteScenario")},on:{click:e.onDelete}},[e.useIcons?t("span",[t("v-icon",[e._v("mdi-delete-forever")])],1):t("span",[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.deleteScenario"))+`
                `)])])],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{staticClass:"flex",attrs:{cols:"12"}},[t("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:l}){return[t("v-btn",e._g(e._b({staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",disabled:!e.activeScenario,title:e.$t("additional:modules.tools.cosi.scenarioManager.helpPruneAllFeatures")},on:{click:e.onPruneAll}},"v-btn",l,!1),a),[t("v-icon",{attrs:{left:""}},[e._v(`
                            mdi-domain-remove
                        `)]),e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.pruneAllFeatures"))+`
                    `)],1)]}}])},[e._v(" "),t("v-list",[t("v-list-item",[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",disabled:!e.activeScenario,title:e.$t("additional:modules.tools.cosi.scenarioManager.helpPruneSimulatedFeatures")},on:{click:e.onPruneSimulation}},[t("v-icon",{attrs:{left:""}},[e._v(`
                                mdi-map-marker-remove
                            `)]),e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.pruneSimulatedFeatures"))+`
                        `)],1)],1),e._v(" "),t("v-list-item",[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",disabled:!e.activeScenario,title:e.$t("additional:modules.tools.cosi.scenarioManager.helpPruneNeighborhoods")},on:{click:e.onPruneNeighborhoods}},[t("v-icon",{attrs:{left:""}},[e._v(`
                                mdi-home-remove
                            `)]),e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.pruneNeighborhoods"))+`
                        `)],1)],1),e._v(" "),t("v-list-item",[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",disabled:!e.activeScenario,title:e.$t("additional:modules.tools.cosi.scenarioManager.helpPruneAllFeatures")},on:{click:e.onPruneAll}},[t("v-icon",{attrs:{left:""}},[e._v(`
                                mdi-domain-remove
                            `)]),e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.pruneAllFeatures"))+`
                        `)],1)],1)],1)],1)],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12"}},[e.activeScenario?e._e():t("div",[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.noActiveScenario"))+`
            `)])])],1),e._v(" "),t("Modal",{attrs:{"show-modal":e.createNewScenarioModalOpen},on:{modalHid:function(a){e.createNewScenarioModalOpen=!1},clickedOnX:function(a){e.createNewScenarioModalOpen=!1},clickedOutside:function(a){e.createNewScenarioModalOpen=!1}}},[t("h4",[e._v(" "+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.createNewTitle"))+" ")]),e._v(" "),t("div",{attrs:{id:"new-scenario-form"}},[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{required:"",dense:"",rules:e.newScenarioRules,label:e.$t("additional:modules.tools.cosi.scenarioManager.scenarioName")},model:{value:e.newScenarioName,callback:function(a){e.newScenarioName=a},expression:"newScenarioName"}}),e._v(" "),t("v-btn",{attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",type:"button",disabled:e.invalidScenarioName,title:e.$t("additional:modules.tools.cosi.scenarioManager.createNewTitle")},on:{click:e.createNewScenario}},[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.scenarioManager.createNewSubmit"))+`
                        `)])],1)],1)],1)],1)]),e._v(" "),t("v-snackbar",{attrs:{timeout:-1,color:"white",light:"",centered:""},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t("v-btn",e._b({attrs:{text:""},on:{click:e.confirmAction.function}},"v-btn",a,!1),[e._v(`
                `+e._s(e.confirmAction.text)+`
            `)]),e._v(" "),t("v-btn",e._b({attrs:{text:""},on:{click:function(l){e.confirmDialog=!1}}},"v-btn",a,!1),[e._v(`
                `+e._s(e.$t("common:button.cancel"))+`
            `)])]}}]),model:{value:e.confirmDialog,callback:function(a){e.confirmDialog=a},expression:"confirmDialog"}},[e._v(`
        `+e._s(e.confirmText)+`

        `)])],1)},h=[];f._withStripped=!0},4263:function(D,x,o){},4286:function(D,x){function o(s){var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}o.keys=function(){return[]},o.resolve=o,D.exports=o,o.id=4286},4410:function(D,x,o){"use strict";o.r(x);var s=o(4411),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4411:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(R,$,I)=>$ in R?u(R,$,{enumerable:!0,configurable:!0,writable:!0,value:I}):R[$]=I,e=(R,$)=>{for(var I in $||($={}))f.call($,I)&&n(R,I,$[I]);if(M)for(var I of M($))h.call($,I)&&n(R,I,$[I]);return R},t=(R,$)=>j(R,T($)),a=(R,$)=>{for(var I in $)u(R,I,{get:$[I],enumerable:!0})},l=(R,$,I,W)=>{if($&&typeof $=="object"||typeof $=="function")for(let k of E($))!f.call(R,k)&&k!==I&&u(R,k,{get:()=>$[k],enumerable:!(W=w($,k))||W.enumerable});return R},m=(R,$,I)=>(I=R!=null?s(L(R)):{},l($||!R||!R.__esModule?u(I,"default",{value:R,enumerable:!0}):I,R)),b=R=>l(u({},"__esModule",{value:!0}),R),p=(R,$,I)=>new Promise((W,k)=>{var X=J=>{try{H(I.next(J))}catch(Y){k(Y)}},Z=J=>{try{H(I.throw(J))}catch(Y){k(Y)}},H=J=>J.done?W(J.value):Promise.resolve(J.value).then(X,Z);H((I=I.apply(R,$)).next())}),_={};a(_,{default:()=>ee}),D.exports=b(_);var r=m(o(59)),i=o(41),c=o(8),d=m(o(3806)),v=m(o(3807)),g=m(o(4412)),O=m(o(4255)),P=o(3749),S=m(o(5431)),F=m(o(4822)),y=m(o(5434)),N=m(o(3671)),B=o(3969),C=m(o(3970)),A=m(o(21)),G=m(o(3722)),z=m(o(451)),V=m(o(3890)),U=o(3651),K=m(o(4162)),Q=m(o(5437)),q=m(o(316)),ee={name:"ResidentialSimulation",components:{Tool:r.default,ToolInfo:K.default,ScenarioManager:g.default,GeometryPicker:O.default,ReferenceDistrictPicker:S.default,StatisticsTable:F.default,Modal:z.default,NeighborhoodEditor:y.default,SimpleSlider:Q.default},data(){return{datePicker:!1,editStatsTable:!1,geometry:null,neighborhood:{name:"Mein Wohnquartier",area:0,residents:0,avgHouseholdSize:2.5,housingUnits:0,gfz:1,bgf:0,populationDensity:5e3,livingSpace:30,livingSpaceRatio:.8,stats:null,year:new Date().toISOString().substring(0,7)},fallbacks:{residents:0,avgHouseholdSize:2.5,housingUnits:0,gfz:1,bgf:0,populationDensity:5e3,livingSpace:30,livingSpaceRatio:.8},lowerBounds:{householdSize:1,populationDensity:0,gfz:0,livingSpace:10,livingSpaceRatio:0},upperBounds:{householdSize:6,populationDensity:5e4,gfz:4,livingSpace:100,livingSpaceRatio:1},baseStats:{reference:{},absolute:[],relative:[]},baseStatsChartData:{charts:[],options:{title:{display:!0,text:"",position:"top"},scales:{xAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:""}}],yAxes:[{ticks:{beginAtZero:!0,suggestedMax:.6},scaleLabel:{display:!0,labelString:""}}]}}},isCreated:!1,invalidValues:[],errorMsg:!1,isInitializing:!1}},computed:t(e(e(e(e({},(0,c.mapGetters)("Language",["currentLocale"])),(0,c.mapGetters)("Tools/ResidentialSimulation",Object.keys(d.default))),(0,c.mapGetters)("Tools/ScenarioBuilder",["activeScenario"])),(0,c.mapGetters)("Tools/DistrictSelector",{districtLevels:"districtLevels",districtLayer:"layer",selectedFeatures:"selectedFeatures",selectedAdminFeatures:"selectedAdminFeatures",selectedDistricts:"selectedDistricts",selectedDistrictLevel:"selectedDistrictLevel",mapping:"mapping"})),{geomField(){return{name:this.$t("additional:modules.tools.cosi.residentialSimulation.geom"),type:"Polygon"}},polygonArea(){var R;return((R=this.geometry)==null?void 0:R.getArea())||0},residents(){return this.neighborhood.residents},stats(){return this.neighborhood.stats},hasReference(){return Object.keys(this.baseStats.reference).length!==0}}),watch:{active(R){return p(this,null,function*(){if(R)this.geometry&&(yield this.$nextTick(),(0,P.geomPickerSetGeometry)(this.$refs["geometry-picker"],this.geometry));else{const $=(0,i.getComponent)(this.id);$&&$.set("isActive",!1),(0,P.geomPickerUnlisten)(this.$refs["geometry-picker"])}})},geometry(){return p(this,null,function*(){!this.hasReference&&this.geometry!==null&&this.getBaseStats(),this.neighborhood.area=this.polygonArea,this.updateArea(this.polygonArea)})},baseStats(){return p(this,null,function*(){var R,$;!this.hasReference&&this.geometry!==null&&this.getBaseStats(),(R=this.baseStats.reference)!=null&&R.districtName&&(($=this.baseStats.reference)!=null&&$.districtLevel)&&this.extrapolateNeighborhoodStatistics()})},residents(){this.extrapolateNeighborhoodStatistics()},neighborhood:{deep:!0,handler(){this.isCreated=!1}},invalidValues(R){R.length>0&&(this.errorMsg=!0,this.updateSliders())}},created(){this.$on("close",()=>{this.setActive(!1)})},mounted(){this.createDrawingLayer()},methods:t(e(e(e(e({},(0,c.mapMutations)("Tools/ResidentialSimulation",Object.keys(v.default))),(0,c.mapActions)("Maps",["addNewLayerIfNotExists"])),(0,c.mapActions)("Tools/ChartGenerator",["channelGraphData"])),(0,c.mapActions)("Tools/DistrictSelector",["getStatsByDistrict"])),{createDrawingLayer(){return p(this,null,function*(){const R=yield this.addNewLayerIfNotExists({layerName:this.id+"_layer"});return R.setVisible(!0),R.setStyle(C.default),R.setZIndex(20),this.setDrawingLayer(R),R})},getBaseStats(){return p(this,null,function*(){const R=(0,U.getContainingDistrictForExtent)(this.selectedDistrictLevel,this.geometry.getExtent()),$=yield this.getStatsByDistrict({id:R.getId(),districtLevel:this.selectedDistrictLevel}),I=(0,V.default)(R.getName(),this.selectedDistrictLevel.label,$,"Bev\xF6lkerung insgesamt",this.timelinePrefix,this.groupsList,this.mapping);I&&this.onPickReference(I)})},updateSliders(){return p(this,null,function*(){for(const R in this.neighborhood)this.$refs[R]instanceof q.default&&this.$refs[R].$forceUpdate()})},updateGeometry(R){this.geometry=R,(0,P.geomPickerUnlisten)(this.$refs["geometry-picker"])},updateArea(R){(0,B.updateArea)(R,this.neighborhood,this.fallbacks)},updateResidents(R){this.invalidValues=(0,B.updateResidents)(parseFloat(R),this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},updateUnits(R){this.invalidValues=(0,B.updateUnits)(R,this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},updateDensity(R){this.invalidValues=(0,B.updateDensity)(R,this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},updateLivingSpace(R){this.invalidValues=(0,B.updateLivingSpace)(R,this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},updateGfz(R){this.invalidValues=(0,B.updateGfz)(R,this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},updateBgf(R){this.invalidValues=(0,B.updateBgf)(R,this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},updateHousholdSize(R){this.invalidValues=(0,B.updateHousholdSize)(R,this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},updateLivingSpaceRatio(R){this.invalidValues=(0,B.updateLivingSpaceRatio)(R,this.neighborhood,this.fallbacks,this.polygonArea,this.lowerBounds,this.upperBounds)},onReferencePickerActive(){(0,P.geomPickerUnlisten)(this.$refs["geometry-picker"])},onPickReference(R){this.baseStatsChartData.charts=[],this.baseStats=R},extrapolateNeighborhoodStatistics(){this.baseStats.absolute.length!==0&&(this.neighborhood.stats=[...this.baseStats.absolute.map(R=>t(e({},R),{value:Math.round(R.value*this.neighborhood.residents)})),...this.baseStats.relative])},visualizeDemographics(R){const $=this.referenceDistrictCharts.map(I=>{const{id:W,name:k,scaleLabels:X,labels:Z,type:H}=I;return new N.default({id:W+"-"+R.reference.districtName,name:k,scaleLabels:X,data:{datasets:[this.getChartDataset(Z,R.reference.districtName)],labels:Z},type:H,options:this.baseStatsChartData.options,beginAtZero:!0})});this.channelGraphData($)},getChartDataset(R,$){return{borderColor:"darkblue",backgroundColor:"darkblue",data:R.map(I=>{var W;return(W=this.baseStats.absolute.find(k=>k.category===I))==null?void 0:W.value}),label:$}},createFeature(){return p(this,null,function*(){const R=new A.default(t(e({geometry:this.geometry},this.neighborhood),{baseStats:this.baseStats})),$=new G.default(R,this.drawingLayer,this.districtLevels);this.activeScenario.addNeighborhood($),this.isCreated=!0,(0,P.geomPickerClearDrawPolygon)(this.$refs["geometry-picker"])})},resetFeature(){this.neighborhood.name=this.defaults.name,this.neighborhood.avgHouseholdSize=this.defaults.avgHouseholdSize,this.neighborhood.gfz=this.defaults.gfz,this.neighborhood.populationDensity=this.defaults.populationDensity,this.neighborhood.livingSpace=this.defaults.livingSpace,this.neighborhood.year=new Date().toISOString().substring(0,7),this.fallbacks.avgHouseholdSize=this.defaults.avgHouseholdSize,this.fallbacks.gfz=this.defaults.gfz,this.fallbacks.populationDensity=this.defaults.populationDensity,this.fallbacks.livingSpace=this.defaults.livingSpace,this.resetBaseStats(),(0,P.geomPickerResetLocation)(this.$refs["geometry-picker"])},resetBaseStats(){this.baseStats={reference:{},absolute:[],relative:[]}},escapeEditStatsTable(){this.editStatsTable=!1}})}},4412:function(D,x,o){"use strict";o.r(x);var s=o(4413),u=o(4230);for(var j in u)["default"].indexOf(j)<0&&function(M){o.d(x,M,function(){return u[M]})}(j);var w=o(4414),T=o(1),E=Object(T.a)(u.default,s.render,s.staticRenderFns,!1,null,"78648abe",null);x.default=E.exports},4413:function(D,x,o){"use strict";var s=o(4261),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},4414:function(D,x,o){"use strict";var s=o(4263),u=o.n(s)},4415:function(D,x,o){"use strict";o.r(x);var s=o(4416),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4416:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(g,O,P)=>O in g?u(g,O,{enumerable:!0,configurable:!0,writable:!0,value:P}):g[O]=P,e=(g,O)=>{for(var P in O||(O={}))f.call(O,P)&&n(g,P,O[P]);if(M)for(var P of M(O))h.call(O,P)&&n(g,P,O[P]);return g},t=(g,O)=>j(g,T(O)),a=(g,O)=>{for(var P in O)u(g,P,{get:O[P],enumerable:!0})},l=(g,O,P,S)=>{if(O&&typeof O=="object"||typeof O=="function")for(let F of E(O))!f.call(g,F)&&F!==P&&u(g,F,{get:()=>O[F],enumerable:!(S=w(O,F))||S.enumerable});return g},m=(g,O,P)=>(P=g!=null?s(L(g)):{},l(O||!g||!g.__esModule?u(P,"default",{value:g,enumerable:!0}):P,g)),b=g=>l(u({},"__esModule",{value:!0}),g),p=(g,O,P)=>new Promise((S,F)=>{var y=C=>{try{B(P.next(C))}catch(A){F(A)}},N=C=>{try{B(P.throw(C))}catch(A){F(A)}},B=C=>C.done?S(C.value):Promise.resolve(C.value).then(y,N);B((P=P.apply(g,O)).next())}),_={};a(_,{default:()=>v}),D.exports=b(_);var r=o(62),i=o(8),c=m(o(3756)),d=m(o(3890)),v={name:"ReferenceDistrictPicker",props:{groupsList:{type:Array,required:!1,default:()=>[]},timelinePrefix:{type:String,required:!1,default:"jahr_"},basePopulationProp:{type:String,required:!1,default:"Bev\xF6lkerung insgesamt"},hasReference:{type:Boolean,default:!1},selectedName:{type:String,default:null}},data:()=>({select:null,referencePickerActive:!1,workingDistrictLevel:null,selectedStatsFeature:null,layer:null,checkbox:!1,map:void 0}),computed:t(e(e({},(0,i.mapGetters)("Maps",["getLayerById"])),(0,i.mapGetters)("Tools/DistrictSelector",["districtLevels","selectedDistrictLevel","mapping"])),{statsMapping(){return(0,c.default)(this.mapping)},namesOfDistricts:function(){var g;return(g=this.workingDistrictLevel)!=null&&g.nameList?this.workingDistrictLevel.nameList:[]}}),watch:{referencePickerActive(g){g?(this.listen(),this.$emit("referencePickerActive")):this.unlisten()},workingDistrictLevel(){var g;this.layer=this.getLayerById({layerId:(g=this.workingDistrictLevel)==null?void 0:g.layerId}),this.referencePickerActive&&(this.unlisten(),this.listen())},checkbox(){this.checkbox||this.$emit("resetReference")}},mounted(){this.map=mapCollection.getMap("2D"),this.workingDistrictLevel=this.selectedDistrictLevel},beforeDestroy(){this.unlisten()},methods:t(e(e({},(0,i.mapActions)("Tools/DistrictSelector",["getStatsByDistrict"])),(0,i.mapActions)("Alerting",["addSingleAlert"])),{togglePickReference(){this.referencePickerActive=!this.referencePickerActive},listen(){this.select=new r.Select({layers:[this.layer],style:null}),this.map.addInteraction(this.select),this.select.on("select",this.pickReference.bind(this))},unlisten(){this.map.removeInteraction(this.select),this.select=null},pickReference(g){return p(this,null,function*(){const O=g.selected[0],P=yield this.getStatsByDistrict({id:O.getId(),districtLevel:this.workingDistrictLevel});let S;P?S=(0,d.default)(O.get(this.workingDistrictLevel.keyOfAttrName),this.workingDistrictLevel.label,P,this.basePopulationProp,this.timelinePrefix,this.groupsList,this.mapping):(this.alertError(),S=null),S&&this.$emit("pickReference",S),this.referencePickerActive=!1})},findReference(g){return p(this,null,function*(){const O=this.workingDistrictLevel.districts.find(F=>F.getName()===g),P=yield this.getStatsByDistrict({id:O.getId(),districtLevel:this.workingDistrictLevel});let S;P?S=(0,d.default)(g,this.workingDistrictLevel.label,P,"Bev\xF6lkerung insgesamt",this.timelinePrefix,this.groupsList,this.mapping):(this.alertError(),S=null),S&&this.$emit("pickReference",S)})},alertError(){this.addSingleAlert({category:"Warnung",content:this.$t("additional:modules.tools.cosi.referencePicker.errorPickReference"),displayClass:"warning"})},visualizeDemographics(){this.$emit("visualizeDemographics")}})}},4417:function(D,x,o){"use strict";o.r(x);var s=o(4418),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4418:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(f,h)=>{for(var n in h)o(f,n,{get:h[n],enumerable:!0})},T=(f,h,n,e)=>{if(h&&typeof h=="object"||typeof h=="function")for(let t of u(h))!j.call(f,t)&&t!==n&&o(f,t,{get:()=>h[t],enumerable:!(e=s(h,t))||e.enumerable});return f},E=f=>T(o({},"__esModule",{value:!0}),f),M={};w(M,{default:()=>L}),D.exports=E(M);var L={name:"StatisticsTable",props:{value:{required:!0,type:Array}},data:()=>({snack:!1,snackColor:"",snackText:"",isNumber:f=>!isNaN(parseFloat(f))||(void 0).$t("additional:modules.tools.cosi.statisticsTable.isNotNumber")}),computed:{headers(){return[{text:this.$t("additional:modules.tools.cosi.statisticsTable.statsCategory"),value:"category"},{text:this.$t("additional:modules.tools.cosi.statisticsTable.statsValue"),value:"value"}]}},watch:{value:{deep:!0,handler(f){this.$emit("input",f)}}},methods:{save(){this.snack=!0,this.snackColor="success",this.snackText=this.$t("common:general.success")},cancel(){this.snack=!0,this.snackColor="warning",this.snackText=this.$t("common:general.cancelled")},open(){this.snack=!0,this.snackColor="info",this.snackText=this.$t("common:general.opened")},editStats(f,h){h.value=parseFloat(f)}}}},4419:function(D,x,o){"use strict";o.r(x);var s=o(4420),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4420:function(D,x,o){var s=Object.create,u=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,n=(d,v,g)=>v in d?u(d,v,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[v]=g,e=(d,v)=>{for(var g in v||(v={}))f.call(v,g)&&n(d,g,v[g]);if(M)for(var g of M(v))h.call(v,g)&&n(d,g,v[g]);return d},t=(d,v)=>j(d,T(v)),a=(d,v)=>{for(var g in v)u(d,g,{get:v[g],enumerable:!0})},l=(d,v,g,O)=>{if(v&&typeof v=="object"||typeof v=="function")for(let P of E(v))!f.call(d,P)&&P!==g&&u(d,P,{get:()=>v[P],enumerable:!(O=w(v,P))||O.enumerable});return d},m=(d,v,g)=>(g=d!=null?s(L(d)):{},l(v||!d||!d.__esModule?u(g,"default",{value:d,enumerable:!0}):g,d)),b=d=>l(u({},"__esModule",{value:!0}),d),p={};a(p,{default:()=>c}),D.exports=b(p);var _=o(8),r=m(o(4822)),i=m(o(451)),c={name:"NeighborhoodEditor",components:{Modal:i.default,StatisticsTable:r.default},props:{drawingLayer:{type:Object,default:void 0}},data:()=>({datePicker:!1,editDialog:!1,editModal:!1,selectedNeighborhood:{scenarioFeature:null,editFeature:null},confirmDialog:!1,map:void 0}),computed:t(e({},(0,_.mapGetters)("Tools/ScenarioBuilder",["activeScenario"])),{neighborhoodName(){var d;return(d=this.selectedNeighborhood.editFeature)==null?void 0:d.get("name")},neighborhoodYear(){var d;return(d=this.selectedNeighborhood.editFeature)==null?void 0:d.get("year")},neighborhoodStats(){var d;return(d=this.selectedNeighborhood.editFeature)==null?void 0:d.get("stats")},baseStats(){var d;return(d=this.selectedNeighborhood.editFeature)==null?void 0:d.get("baseStats")},confirmText(){return this.$t("additional:modules.tools.cosi.neighborhoodEditor.confirmDelete")}}),mounted(){this.map=mapCollection.getMap("2D"),this.map.addEventListener("click",this.openEditDialog.bind(this))},methods:{openEditDialog(d){this.selectedNeighborhood.editFeature=null,this.selectedNeighborhood.scenarioFeature=null,this.map.forEachFeatureAtPixel(d.pixel,v=>{this.selectedNeighborhood.scenarioFeature=this.activeScenario.getNeighborhood(v),this.selectedNeighborhood.editFeature=v.clone(),this.selectedNeighborhood.editFeature.set("stats",JSON.parse(JSON.stringify(v.get("stats")))),this.editDialog=!0},{layerFilter:v=>v===this.drawingLayer}),this.selectedNeighborhood.editFeature||(this.editDialog=!1)},editNeighborhood(){this.editModal=!0,this.editDialog=!1},updateSelectedNeighborhood(){this.selectedNeighborhood.scenarioFeature.setFeature(this.selectedNeighborhood.editFeature),this.escapeEditModal()},editProp(d,v){this.selectedNeighborhood.editFeature.set(v,d)},deleteNeighborhood(){this.activeScenario.removeNeighborhood(this.selectedNeighborhood.scenarioFeature.feature),this.confirmDialog=!1,this.editDialog=!1,this.selectedNeighborhood.editFeature=null,this.selectedNeighborhood.scenarioFeature=null},escapeEditModal(){this.selectedNeighborhood.editFeature=null,this.selectedNeighborhood.scenarioFeature=null,this.editModal=!1},visualizeDemographics(){this.$emit("visualizeDemographics",this.baseStats),this.editModal=!1}}}},4421:function(D,x,o){"use strict";o.r(x);var s=o(4422),u=o.n(s);for(var j in s)["default"].indexOf(j)<0&&function(w){o.d(x,w,function(){return s[w]})}(j);x.default=u.a},4422:function(D,x){var o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,w=(f,h)=>{for(var n in h)o(f,n,{get:h[n],enumerable:!0})},T=(f,h,n,e)=>{if(h&&typeof h=="object"||typeof h=="function")for(let t of u(h))!j.call(f,t)&&t!==n&&o(f,t,{get:()=>h[t],enumerable:!(e=s(h,t))||e.enumerable});return f},E=f=>T(o({},"__esModule",{value:!0}),f),M={};w(M,{default:()=>L}),D.exports=E(M);var L={name:"SimpleSlider",props:{id:{type:String,default:"simple-slider"},value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},unitLabel:{type:String,default:""},unitPosition:{type:String,default:void 0},locale:{type:String,default:"de-DE"}},computed:{_value(){return this.value},_unitPos(){return this.unitPosition?"float-"+this.unitPosition:""}},methods:{_input(f){this.$emit("input",parseFloat(f.target.value))}}}},4820:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("div",{class:e.active?"tool-wrap":""},[t("Tool",{attrs:{title:e.$t("additional:modules.tools.cosi.residentialSimulation.title"),icon:e.icon,active:e.active,"render-to-window":e.renderToWindow,"resizable-window":e.resizableWindow,"deactivate-gfi":e.deactivateGFI,"initial-width":e.width},scopedSlots:e._u([e.active?{key:"toolBody",fn:function(){return[t("ToolInfo",{attrs:{url:e.readmeUrl,locale:e.currentLocale}}),e._v(" "),t("v-app",{attrs:{absolute:""}},[t("v-main",{attrs:{id:"scenario-builder"}},[t("div",[t("ScenarioManager",{on:{pruneScenario:e.resetFeature}}),e._v(" "),t("v-divider"),e._v(" "),t("div",[t("span",{staticClass:"text-subtitle-2"},[e._v(`
                                `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.title"))+`
                            `)])]),e._v(" "),t("div",{staticClass:"mb-2"},[e._v(`
                            Neue fiktive Wohnquartiere mitsamt Bewohnerstruktur anlegen und die statistischen Daten im Gebiet entsprechend modifizieren.
                        `)]),e._v(" "),t("ReferenceDistrictPicker",{attrs:{"groups-list":e.groupsList,"timeline-prefix":e.timelinePrefix,"has-reference":e.hasReference,"selected-name":e.baseStats.reference.districtName,"base-population-prop":e.basePopulationProp},on:{referencePickerActive:e.onReferencePickerActive,pickReference:e.onPickReference,resetReference:e.resetBaseStats,visualizeDemographics:function(a){return e.visualizeDemographics(e.baseStats)}}}),e._v(" "),t("v-divider"),e._v(" "),t("div",{staticClass:"mb-5 overline"},[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.subTitle"))+`
                        `)]),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v("Name")])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("v-text-field",{attrs:{label:"Quartiername"},model:{value:e.neighborhood.name,callback:function(a){e.$set(e.neighborhood,"name",a)},expression:"neighborhood.name"}})],1)],1),e._v(" "),t("GeometryPicker",{ref:"geometry-picker",attrs:{"geom-field":e.geomField,"is-gml":!1},on:{updateGeometry:e.updateGeometry}}),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v("Grundfl\xE4che")])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("v-text-field",{attrs:{readonly:"",label:"Fl\xE4che",suffix:"m\xB2"},model:{value:e.polygonArea,callback:function(a){e.polygonArea=a},expression:"polygonArea"}})],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v("Bewohnerzahl insgesamt")])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("v-text-field",{attrs:{label:"Einwohner gesamt",suffix:"EW"},on:{input:e.updateResidents},model:{value:e.neighborhood.residents,callback:function(a){e.$set(e.neighborhood,"residents",a)},expression:"neighborhood.residents"}})],1)],1),e._v(" "),t("v-row",{attrs:{title:e.geometry?e.$t("additional:modules.tools.cosi.residentialSimulation.helpUnits"):e.$t("additional:modules.tools.cosi.residentialSimulation.noGeomWarning"),dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v(`
                                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.units"))+`
                                `)])],1),e._v(" "),t("v-col",{attrs:{cols:"9",title:e.$t("additional:modules.tools.cosi.residentialSimulation.helpUnits")}},[t("SimpleSlider",{ref:"housingUnits",attrs:{id:"housing-units",title:e.$t("additional:modules.tools.cosi.residentialSimulation.helpUnits"),value:e.neighborhood.housingUnits,disabled:!e.geometry,min:0,max:Math.ceil(e.polygonArea/5)||1,step:1,"unit-label":e.$t("additional:modules.tools.cosi.residentialSimulation.unitUnits"),"unit-position":"right",locale:e.currentLocale},on:{input:e.updateUnits}})],1)],1),e._v(" "),t("v-row",{attrs:{title:e.geometry?e.$t("additional:modules.tools.cosi.residentialSimulation.helpBgf"):e.$t("additional:modules.tools.cosi.residentialSimulation.noGeomWarning"),dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v(`
                                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.bgf"))+`
                                `)])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("SimpleSlider",{ref:"bgf",attrs:{id:"bgf",title:e.$t("additional:modules.tools.cosi.residentialSimulation.bgf"),value:e.neighborhood.bgf,disabled:!e.geometry,min:0,max:Math.ceil(e.polygonArea*4)||1,step:1,"unit-label":"m\xB2","unit-position":"right",locale:e.currentLocale},on:{input:e.updateBgf}})],1)],1),e._v(" "),t("v-row",{attrs:{title:e.geometry?e.$t("additional:modules.tools.cosi.residentialSimulation.helpHouseholdSize"):e.$t("additional:modules.tools.cosi.residentialSimulation.noGeomWarning"),dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v(`
                                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.householdSize"))+`
                                `)])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("SimpleSlider",{ref:"avgHouseholdSize",attrs:{id:"avg-household-size",title:e.$t("additional:modules.tools.cosi.residentialSimulation.helpHouseholdSize"),value:e.neighborhood.avgHouseholdSize,disabled:!e.geometry,min:1,max:5,step:.2,"unit-label":e.$t("additional:modules.tools.cosi.residentialSimulation.unitHouseholdSize"),"unit-position":"right",locale:e.currentLocale},on:{input:e.updateHousholdSize}})],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v("GFZ")])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("SimpleSlider",{ref:"gfz",attrs:{id:"gfz",title:e.$t("additional:modules.tools.cosi.residentialSimulation.helpGfz"),value:e.neighborhood.gfz,disabled:!e.geometry,min:0,max:4,step:.1,"unit-label":e.$t("additional:modules.tools.cosi.residentialSimulation.unitGfz"),"unit-position":"right",locale:e.currentLocale},on:{input:e.updateGfz}})],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v("Bev\xF6lkerungsdichte")])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("SimpleSlider",{ref:"populationDensity",attrs:{id:"population-density",title:e.$t("additional:modules.tools.cosi.residentialSimulation.helpPopulationDensity"),value:e.neighborhood.populationDensity,disabled:!e.geometry,min:0,max:5e4,step:1,"unit-label":e.$t("additional:modules.tools.cosi.residentialSimulation.unitPopulationDensity"),"unit-position":"right",locale:e.currentLocale},on:{input:e.updateDensity}})],1)],1),e._v(" "),t("v-row",{attrs:{title:e.geometry?e.$t("additional:modules.tools.cosi.residentialSimulation.helpLivingSpace"):e.$t("additional:modules.tools.cosi.residentialSimulation.noGeomWarning"),dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v(`
                                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.helpLivingSpace"))+`
                                `)])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("SimpleSlider",{ref:"livingSpace",attrs:{id:"living-space",title:e.$t("additional:modules.tools.cosi.residentialSimulation.helpLivingSpace"),value:e.neighborhood.livingSpace,disabled:!e.geometry,min:10,max:100,step:.1,"unit-label":e.$t("additional:modules.tools.cosi.residentialSimulation.unitLivingSpace"),"unit-position":"right",locale:e.currentLocale},on:{input:e.updateLivingSpace}})],1)],1),e._v(" "),t("v-row",{attrs:{title:e.geometry?e.$t("additional:modules.tools.cosi.residentialSimulation.helpLivingSpaceRatio"):e.$t("additional:modules.tools.cosi.residentialSimulation.noGeomWarning"),dense:""}},[t("v-col",{attrs:{cols:"3"}},[t("v-subheader",[e._v(`
                                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.livingSpaceRatio"))+`
                                `)])],1),e._v(" "),t("v-col",{attrs:{cols:"9"}},[t("SimpleSlider",{ref:"livingSpaceRatio",attrs:{id:"living-space-ratio",title:e.$t("additional:modules.tools.cosi.residentialSimulation.helpLivingSpaceRatio"),value:e.neighborhood.livingSpaceRatio,disabled:!e.geometry,min:0,max:1,step:.01,"unit-label":e.$t("additional:modules.tools.cosi.residentialSimulation.unitLivingSpaceRatio"),"unit-position":"right",locale:e.currentLocale},on:{input:e.updateLivingSpaceRatio}})],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12"}},[t("v-menu",{ref:"datePicker",attrs:{"close-on-content-click":!1,"return-value":e.neighborhood.year,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},on:{"update:returnValue":function(a){return e.$set(e.neighborhood,"year",a)},"update:return-value":function(a){return e.$set(e.neighborhood,"year",a)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:l}){return[t("v-text-field",e._g(e._b({attrs:{label:e.$t("additional:modules.tools.cosi.residentialSimulation.dateOfCompletion"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.neighborhood.year,callback:function(m){e.$set(e.neighborhood,"year",m)},expression:"neighborhood.year"}},"v-text-field",l,!1),a))]}}],null,!1,2328590691),model:{value:e.datePicker,callback:function(a){e.datePicker=a},expression:"datePicker"}},[e._v(" "),t("v-date-picker",{attrs:{type:"month","no-title":"",scrollable:""},model:{value:e.neighborhood.year,callback:function(a){e.$set(e.neighborhood,"year",a)},expression:"neighborhood.year"}},[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(a){e.datePicker=!1}}},[e._v(`
                                            `+e._s(e.$t("common:button.cancel"))+`
                                        `)]),e._v(" "),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(a){return e.$refs.datePicker.save(e.neighborhood.year)}}},[e._v(`
                                            OK
                                        `)])],1)],1)],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{staticClass:"flex",attrs:{cols:"12"}},[t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1"},on:{click:e.resetFeature}},[t("v-icon",[e._v("mdi-eraser")]),e._v(" "),t("span",[e._v(`
                                        `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.resetFeature"))+`
                                    `)])],1),e._v(" "),t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",disabled:!e.neighborhood.stats||e.geometry===null},on:{click:function(a){e.editStatsTable=!0}}},[t("v-icon",[e._v("mdi-pencil")]),e._v(" "),t("span",[e._v(`
                                        `+e._s(e.$t("additional:modules.tools.cosi.statisticsTable.editStatsTable"))+`
                                    `)])],1),e._v(" "),t("v-btn",{staticClass:"flex-item",attrs:{dense:"",small:"",tile:"",color:"primary",title:e.$t("additional:modules.tools.cosi.residentialSimulation.createFeatureHelp"),disabled:!e.activeScenario||e.geometry===null||!e.neighborhood.stats||e.isCreated},on:{click:e.createFeature}},[t("v-icon",[e._v("mdi-home-plus")]),e._v(" "),t("span",[e._v(`
                                        `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.createFeature"))+`
                                    `)])],1)],1)],1)],1),e._v(" "),t("Modal",{attrs:{"show-modal":e.editStatsTable},on:{modalHid:function(a){e.editStatsTable=!1},clickedOnX:e.escapeEditStatsTable,clickedOutside:e.escapeEditStatsTable}},[t("v-container",[t("v-card-title",{attrs:{"primary-title":""}},[e._v(`
                                `+e._s(e.$t("additional:modules.tools.cosi.statisticsTable.editStatsTable"))+" : "+e._s(e.neighborhood.name)+`
                            `)]),e._v(" "),t("v-subheader",[e._v(`
                                `+e._s(e.$t("additional:modules.tools.cosi.referencePicker.reference"))+" ("+e._s(e.baseStats.reference.districtLevel)+"): "+e._s(e.baseStats.reference.districtName)+`
                            `)]),e._v(" "),t("div",{staticClass:"stats-table-modal"},[e.neighborhood.stats&&e.geometry!==null?t("StatisticsTable",{model:{value:e.neighborhood.stats,callback:function(a){e.$set(e.neighborhood,"stats",a)},expression:"neighborhood.stats"}}):e._e()],1)],1)],1)],1),e._v(" "),t("v-snackbar",{attrs:{timeout:5e3,color:"error","multi-line":""},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t("v-btn",e._b({attrs:{text:""},on:{click:function(l){e.errorMsg=!1}}},"v-btn",a,!1),[t("v-icon",[e._v("mdi-close")])],1)]}}],null,!1,1643206730),model:{value:e.errorMsg,callback:function(a){e.errorMsg=a},expression:"errorMsg"}},[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.valueError"))),t("br"),e._v(" "),e._l(e.invalidValues,function(a){return t("div",{key:a.id},[t("small",[t("span",[t("i",[e._v(e._s(e.$t(`additional:modules.tools.cosi.residentialSimulation.${a.id}`)))]),e._v(": "+e._s(a.val.toLocaleString(e.currentLocale))+" ")]),e._v(" "),t("span",[e._v("- "+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.bounds"))+": "+e._s(e.lowerBounds[a.id])+" - "+e._s(e.upperBounds[a.id]))])])])})],2)],1)]},proxy:!0}:null],null,!0)}),e._v(" "),t("NeighborhoodEditor",{attrs:{"drawing-layer":e.drawingLayer},on:{visualizeDemographics:e.visualizeDemographics}})],1)},h=[];f._withStripped=!0},4821:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("v-form",[t("v-row",{attrs:{dense:""}},[t("v-col",[t("div",{staticClass:"overline float-left"},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.referencePicker.titleReference"))+`
            `)]),e._v(" "),t("v-checkbox",{staticClass:"mt-0 pl-2",model:{value:e.checkbox,callback:function(a){e.checkbox=a},expression:"checkbox"}})],1)],1),e._v(" "),e.checkbox?t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12"}},[t("v-select",{attrs:{items:e.districtLevels,"item-text":"label","return-object":"",label:e.$t("additional:modules.tools.cosi.districtSelector.districtLevel"),title:e.$t("additional:modules.tools.cosi.districtSelector.districtLevel"),"append-icon":"mdi-layers",outlined:"",dense:""},model:{value:e.workingDistrictLevel,callback:function(a){e.workingDistrictLevel=a},expression:"workingDistrictLevel"}})],1)],1):e._e(),e._v(" "),e.checkbox?t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"7"}},[t("v-btn",{attrs:{dense:"",small:"",tile:"",color:e.referencePickerActive?"primary":"grey lighten-1",title:e.$t("additional:modules.tools.cosi.referencePicker.pickReference")},on:{click:e.togglePickReference}},[t("v-icon",[e._v("mdi-eyedropper")]),e._v(" "),t("span",[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.referencePicker.pickReference"))+`
                `)])],1),e._v(" "),e.hasReference?t("v-btn",{attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.residentialSimulation.visualizeDemographics")},on:{click:e.visualizeDemographics}},[t("v-icon",[e._v("mdi-chart-bell-curve")]),e._v(" "),t("span",[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.visualizeDemographics"))+`
                `)])],1):e._e()],1),e._v(" "),t("v-col",{attrs:{cols:"5"}},[t("v-autocomplete",{attrs:{value:e.selectedName,items:e.namesOfDistricts,label:e.workingDistrictLevel.label,outlined:"",dense:""},on:{change:e.findReference}})],1)],1):t("div",{staticClass:"mt-1"},[t("div",{staticClass:"mb-2"},[e.hasReference?t("v-btn",{attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.residentialSimulation.visualizeDemographics")},on:{click:e.visualizeDemographics}},[t("v-icon",[e._v("mdi-chart-bell-curve")]),e._v(" "),t("span",[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.visualizeDemographics"))+`
                `)])],1):e._e()],1),e._v(" "),t("div",[e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.referencePicker.noReference"))+`
        `)])])],1)},h=[];f._withStripped=!0},4822:function(D,x,o){"use strict";o.r(x);var s=o(5433),u=o(4417);for(var j in u)["default"].indexOf(j)<0&&function(E){o.d(x,E,function(){return u[E]})}(j);var w=o(1),T=Object(w.a)(u.default,s.render,s.staticRenderFns,!1,null,null,null);x.default=T.exports},4823:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("div",[t("v-data-table",{attrs:{headers:e.headers,items:e.value,"group-by":"group",dense:"","items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.value",fn:function({item:a}){return[t("v-edit-dialog",{attrs:{"return-value":a.value,rules:[e.isNumber],large:"",persistent:"","save-text":e.$t("common:button.save"),"cancel-text":e.$t("common:button.cancel")},on:{"update:returnValue":function(l){return e.$set(a,"value",l)},"update:return-value":function(l){return e.$set(a,"value",l)},save:function(l){return e.save(a)},cancel:e.cancel,open:e.open},scopedSlots:e._u([{key:"input",fn:function(){return[t("div",{staticClass:"mt-4 text-h6"},[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.statisticsTable.editStatsField"))+`
                    `)]),e._v(" "),t("v-text-field",{attrs:{value:a.value,type:"number","single-line":""},on:{change:function(l){return e.editStats(l,a)}}}),e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.statisticsTable.editStatsInfo"))+`
                `)]},proxy:!0}],null,!0)},[t("div",[e._v(e._s(a.value))])])]}}])}),e._v(" "),t("v-snackbar",{attrs:{timeout:3e3,color:e.snackColor},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t("v-btn",e._b({attrs:{text:""},on:{click:function(l){e.snack=!1}}},"v-btn",a,!1),[e._v(`
                `+e._s(e.$t("common:button.close"))+`
            `)])]}}]),model:{value:e.snack,callback:function(a){e.snack=a},expression:"snack"}},[e._v(`
        `+e._s(e.snackText)+`

        `)])],1)},h=[];f._withStripped=!0},4824:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("v-app",[t("v-snackbar",{attrs:{timeout:-1,color:"white",light:"",centered:""},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t("v-btn",e._b({attrs:{text:""},on:{click:e.deleteNeighborhood}},"v-btn",a,!1),[e._v(`
                `+e._s(e.$t("common:button.delete"))+`
            `)]),e._v(" "),t("v-btn",e._b({attrs:{text:""},on:{click:function(l){e.confirmDialog=!1}}},"v-btn",a,!1),[e._v(`
                `+e._s(e.$t("common:button.cancel"))+`
            `)])]}}]),model:{value:e.confirmDialog,callback:function(a){e.confirmDialog=a},expression:"confirmDialog"}},[e._v(`
        `+e._s(e.confirmText)+`

        `)]),e._v(" "),t("v-snackbar",{attrs:{timeout:-1,color:"grey"},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t("v-btn",e._b({attrs:{text:""},on:{click:function(l){e.confirmDialog=!0}}},"v-btn",a,!1),[e._v(`
                `+e._s(e.$t("common:button.delete"))+`
            `)]),e._v(" "),t("v-btn",e._b({attrs:{text:""},on:{click:e.editNeighborhood}},"v-btn",a,!1),[e._v(`
                `+e._s(e.$t("common:button.edit"))+`
            `)]),e._v(" "),t("v-btn",e._b({attrs:{text:""},on:{click:function(l){e.editDialog=!1}}},"v-btn",a,!1),[t("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.editDialog,callback:function(a){e.editDialog=a},expression:"editDialog"}},[e._v(`
        `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.editFeature"))+`

        `)]),e._v(" "),e.selectedNeighborhood.editFeature?t("Modal",{attrs:{"show-modal":e.editModal},on:{modalHid:e.escapeEditModal,clickedOnX:e.escapeEditModal,clickedOutside:e.escapeEditModal}},[t("v-app",[t("v-container",[t("v-card-title",{attrs:{"primary-title":""}},[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.statisticsTable.editStatsTable"))+" : "+e._s(e.neighborhoodName)+`
                `)]),e._v(" "),t("v-card-subtitle",[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.referencePicker.reference"))+" ("+e._s(e.baseStats.reference.districtLevel)+"): "+e._s(e.baseStats.reference.districtName)+`
                `)]),e._v(" "),t("v-card-text",[t("v-row",{attrs:{dense:""}},[t("v-col",{staticClass:"flex",attrs:{cols:"12"}},[t("v-text-field",{attrs:{value:e.neighborhoodYear,label:e.$t("additional:modules.tools.cosi.residentialSimulation.dateOfCompletion"),rules:[a=>!!a||e.$t("additional:modules.tools.cosi.scenarioBuilder.required"),a=>a.match(/^\d{4}\-(0?[1-9]|1[012])$/)!==null||e.$t("additional:modules.tools.cosi.neighborhoodEditor.invalidDate")],"prepend-icon":"mdi-calendar"},on:{change:function(a){return e.editProp(a,"year")}}}),e._v(" "),t("v-text-field",{attrs:{value:e.neighborhoodName,label:e.$t("additional:modules.tools.cosi.neighborhoodEditor.changeName"),rules:[a=>!!a||e.$t("additional:modules.tools.cosi.scenarioBuilder.required")],"prepend-icon":"mdi-home"},on:{change:function(a){return e.editProp(a,"name")}}})],1)],1)],1),e._v(" "),t("div",{staticClass:"stats-table-modal"},[t("StatisticsTable",{attrs:{value:e.neighborhoodStats}})],1),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{dense:"",small:"",tile:"",color:"primary",title:e.$t("additional:modules.tools.cosi.neighborhoodEditor.updateStats")},on:{click:e.updateSelectedNeighborhood}},[t("v-icon",[e._v("mdi-pencil")]),e._v(" "),t("span",[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.neighborhoodEditor.updateStats"))+`
                        `)])],1),e._v(" "),t("v-btn",{attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("common:button.cancel")},on:{click:e.escapeEditModal}},[t("v-icon",[e._v("mdi-close")]),e._v(" "),t("span",[e._v(`
                            `+e._s(e.$t("common:button.cancel"))+`
                        `)])],1),e._v(" "),t("v-btn",{attrs:{dense:"",small:"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.residentialSimulation.visualizeDemographics")},on:{click:e.visualizeDemographics}},[t("v-icon",[e._v("mdi-chart-bell-curve")]),e._v(" "),t("span",[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.residentialSimulation.visualizeDemographics"))+`
                        `)])],1)],1)],1)],1)],1):e._e()],1)},h=[];f._withStripped=!0},4825:function(D,x,o){},4826:function(D,x,o){var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,T=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of j(e))!w.call(n,l)&&l!==t&&s(n,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return n},M=n=>E(s({},"__esModule",{value:!0}),n),L={};T(L,{render:()=>f,staticRenderFns:()=>h}),D.exports=M(L);var f=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:e.id}},[t("label",{staticClass:"slider-label",attrs:{for:e.id+"-slider"}},[t("input",{ref:"input-number",attrs:{id:e.id+"-number",type:"number",disabled:e.disabled,min:e.min,max:e.max},domProps:{value:e._value},on:{input:e._input}}),e._v(" "),t("small",{class:e._unitPos},[e._v(`
            `+e._s(e.unitLabel)+`
        `)])]),e._v(" "),t("input",{ref:"input-slider",attrs:{id:e.id+"-slider",type:"range",title:e._value.toLocaleString(e.locale),disabled:e.disabled,min:e.min,max:e.max,step:e.step},domProps:{value:e._value},on:{input:e._input}}),e._v(" "),t("div",[t("small",{staticClass:"float-left"},[e._v(`
            `+e._s(e.min.toLocaleString(e.locale))+`
        `)]),e._v(" "),t("small",{staticClass:"float-right"},[e._v(`
            `+e._s(e.max.toLocaleString(e.locale))+`
        `)])]),e._v(" "),e._t("default")],2)},h=[];f._withStripped=!0},4827:function(D,x,o){},4828:function(D,x,o){},5429:function(D,x,o){"use strict";o.r(x);var s=o(5430),u=o(4410);for(var j in u)["default"].indexOf(j)<0&&function(M){o.d(x,M,function(){return u[M]})}(j);var w=o(5440),T=o(1),E=Object(T.a)(u.default,s.render,s.staticRenderFns,!1,null,null,null);x.default=E.exports},5430:function(D,x,o){"use strict";var s=o(4820),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},5431:function(D,x,o){"use strict";o.r(x);var s=o(5432),u=o(4415);for(var j in u)["default"].indexOf(j)<0&&function(E){o.d(x,E,function(){return u[E]})}(j);var w=o(1),T=Object(w.a)(u.default,s.render,s.staticRenderFns,!1,null,null,null);x.default=T.exports},5432:function(D,x,o){"use strict";var s=o(4821),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},5433:function(D,x,o){"use strict";var s=o(4823),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},5434:function(D,x,o){"use strict";o.r(x);var s=o(5435),u=o(4419);for(var j in u)["default"].indexOf(j)<0&&function(M){o.d(x,M,function(){return u[M]})}(j);var w=o(5436),T=o(1),E=Object(T.a)(u.default,s.render,s.staticRenderFns,!1,null,"0347d769",null);x.default=E.exports},5435:function(D,x,o){"use strict";var s=o(4824),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},5436:function(D,x,o){"use strict";var s=o(4825),u=o.n(s)},5437:function(D,x,o){"use strict";o.r(x);var s=o(5438),u=o(4421);for(var j in u)["default"].indexOf(j)<0&&function(M){o.d(x,M,function(){return u[M]})}(j);var w=o(5439),T=o(1),E=Object(T.a)(u.default,s.render,s.staticRenderFns,!1,null,"77786616",null);x.default=E.exports},5438:function(D,x,o){"use strict";var s=o(4826),u=o.n(s);o.o(s,"render")&&o.d(x,"render",function(){return s.render}),o.o(s,"staticRenderFns")&&o.d(x,"staticRenderFns",function(){return s.staticRenderFns})},5439:function(D,x,o){"use strict";var s=o(4827),u=o.n(s)},5440:function(D,x,o){"use strict";var s=o(4828),u=o.n(s)}}]);
