(window.webpackJsonp=window.webpackJsonp||[]).push([[95,214,215,522,523,524,525,526,527],{257:function(y,b,o){var p=Object.create,d=Object.defineProperty,j=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,x=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,g=(S,a)=>{for(var s in a)d(S,s,{get:a[s],enumerable:!0})},A=(S,a,s,t)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of O(a))!D.call(S,r)&&r!==s&&d(S,r,{get:()=>a[r],enumerable:!(t=j(a,r))||t.enumerable});return S},f=(S,a,s)=>(s=S!=null?p(x(S)):{},A(a||!S||!S.__esModule?d(s,"default",{value:S,enumerable:!0}):s,S)),m=S=>A(d({},"__esModule",{value:!0}),S),v={};g(v,{default:()=>h}),y.exports=m(v);var _=f(o(5727)),P=f(o(4074)),E=f(o(4075)),M=f(o(4076)),h={component:_.default,store:P.default,locales:{de:E.default,en:M.default}}},3700:function(y,b){var o=Object.defineProperty,p=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,O=(m,v)=>{for(var _ in v)o(m,_,{get:v[_],enumerable:!0})},x=(m,v,_,P)=>{if(v&&typeof v=="object"||typeof v=="function")for(let E of d(v))!j.call(m,E)&&E!==_&&o(m,E,{get:()=>v[E],enumerable:!(P=p(v,E))||P.enumerable});return m},D=m=>x(o({},"__esModule",{value:!0}),m),g={};O(g,{default:()=>f}),y.exports=D(g);var f={active:!1,id:"streetsmart",name:"additional:menu.tools.streetsmart",icon:"bi-camera-fill",renderToWindow:!1,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!1,initialWidth:500,serviceId:"streetsmart",streetsmartAPIVersion:"22.2",reactVersion:"16.12.0",timeTravelVisible:!1,toggle3DCursor:!1,toggleAddressesVisible:!1,cycloLayerID:null,styleId:"defaultMapMarkerPoint",mapMarkerStyleId:"defaultMapMarkerPoint",lastCoordinates:[],lastYaw:0}},3765:function(y,b){var o=Object.defineProperty,p=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,O=(f,m)=>{for(var v in m)o(f,v,{get:m[v],enumerable:!0})},x=(f,m,v,_)=>{if(m&&typeof m=="object"||typeof m=="function")for(let P of d(m))!j.call(f,P)&&P!==v&&o(f,P,{get:()=>m[P],enumerable:!(_=p(m,P))||_.enumerable});return f},D=f=>x(o({},"__esModule",{value:!0}),f),g={};O(g,{default:()=>A}),y.exports=D(g);function A(f){return new Promise((m,v)=>{const _=document.createElement("script");_.type="text/javascript",_.onload=m,_.onerror=v,_.src=f,document.head.append(_)})}},3845:function(y,b,o){var p=Object.create,d=Object.defineProperty,j=Object.defineProperties,O=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(n,u,c)=>u in n?d(n,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[u]=c,_=(n,u)=>{for(var c in u||(u={}))f.call(u,c)&&v(n,c,u[c]);if(g)for(var c of g(u))m.call(u,c)&&v(n,c,u[c]);return n},P=(n,u)=>j(n,x(u)),E=(n,u)=>{for(var c in u)d(n,c,{get:u[c],enumerable:!0})},M=(n,u,c,i)=>{if(u&&typeof u=="object"||typeof u=="function")for(let l of D(u))!f.call(n,l)&&l!==c&&d(n,l,{get:()=>u[l],enumerable:!(i=O(u,l))||i.enumerable});return n},h=(n,u,c)=>(c=n!=null?p(A(n)):{},M(u||!n||!n.__esModule?d(c,"default",{value:n,enumerable:!0}):c,n)),S=n=>M(d({},"__esModule",{value:!0}),n),a={};E(a,{default:()=>e}),y.exports=S(a);var s=o(10),t=h(o(3700)),e=P(_({},(0,s.generateSimpleGetters)(t.default)),{currentLocale(n,u,c,i){let l=i["Language/currentLocale"];return l==="en"?l="en-US":l==="pt"?l="pt-BR":l="de",l}})},3846:function(y,b,o){var p=Object.create,d=Object.defineProperty,j=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,f=(t,r,e)=>r in t?d(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,m=(t,r)=>{for(var e in r||(r={}))g.call(r,e)&&f(t,e,r[e]);if(x)for(var e of x(r))A.call(r,e)&&f(t,e,r[e]);return t},v=(t,r)=>{for(var e in r)d(t,e,{get:r[e],enumerable:!0})},_=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of O(r))!g.call(t,u)&&u!==e&&d(t,u,{get:()=>r[u],enumerable:!(n=j(r,u))||n.enumerable});return t},P=(t,r,e)=>(e=t!=null?p(D(t)):{},_(r||!t||!t.__esModule?d(e,"default",{value:t,enumerable:!0}):e,t)),E=t=>_(d({},"__esModule",{value:!0}),t),M={};v(M,{default:()=>s}),y.exports=E(M);var h=o(10),S=P(o(3700)),s=m({},(0,h.generateSimpleMutations)(S.default))},3881:function(y,b,o){(function(p,d){var j=Object.create,O=Object.defineProperty,x=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,g=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,f=(a,s)=>{for(var t in s)O(a,t,{get:s[t],enumerable:!0})},m=(a,s,t,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let e of D(s))!A.call(a,e)&&e!==t&&O(a,e,{get:()=>s[e],enumerable:!(r=x(s,e))||r.enumerable});return a},v=(a,s,t)=>(t=a!=null?j(g(a)):{},m(s||!a||!a.__esModule?O(t,"default",{value:a,enumerable:!0}):t,a)),_=a=>m(O({},"__esModule",{value:!0}),a),P=(a,s,t)=>new Promise((r,e)=>{var n=i=>{try{c(t.next(i))}catch(l){e(l)}},u=i=>{try{c(t.throw(i))}catch(l){e(l)}},c=i=>i.done?r(i.value):Promise.resolve(i.value).then(n,u);c((t=t.apply(a,s)).next())}),E={};f(E,{default:()=>S}),y.exports=_(E);var M=v(o(3765)),S={loadPackages({state:a},s){const t=`https://streetsmart.cyclomedia.com/api/v${a.streetsmartAPIVersion}/StreetSmartApi.js`,r=`https://unpkg.com/react@${a.reactVersion}/umd/react.production.min.js`,e=`https://unpkg.com/react-dom@${a.reactVersion}/umd/react-dom.production.min.js`;try{(0,M.default)(r).then(()=>(0,M.default)(e)).then(()=>(0,M.default)(t)).then(()=>s?s():null).catch(n=>console.error("loading of package failed:",n))}catch(n){console.error("loading of package failed:",n)}},setPosition({state:a,commit:s,dispatch:t,rootGetters:r},e){if(a.active&&e){const n=r["Maps/getView"].getProjection().getCode(),u=!e[0]||!e[1]?e.coordinate:[e[0],e[1]];try{t("MapMarker/placingPointMarker",u,{root:!0}),StreetSmartApi.open({coordinate:u},{viewerType:[StreetSmartApi.ViewerType.PANORAMA],srs:n,panoramaViewer:{replace:!0,timeTravelVisible:a.timeTravelVisible,closable:!1,recordingsVisible:!0}}).then(c=>{if(c&&c[0]){s("setLastCoordinates",u);const i=StreetSmartApi.getViewers();i[0].toggle3DCursor(a.toggle3DCursor),i[0].toggleAddressesVisible(a.toggleAddressesVisible)}else t("Alerting/addSingleAlert",p.t("additional:modules.tools.streetsmart.noData"),{root:!0}),t("MapMarker/placingPointMarker",a.lastCoordinates,{root:!0})}).catch(c=>{console.warn("Error opening panorama viewer: "+c),t("Alerting/addSingleAlert",p.t("additional:modules.tools.streetsmart.createViewFailed"),{root:!0})})}catch(c){console.error("Create streetSmart view failed: ",c),t("Alerting/addSingleAlert",p.t("additional:modules.tools.streetsmart.createViewFailed"),{root:!0})}}},initApi({state:a,dispatch:s,getters:t,rootGetters:r}){const e=r.getRestServiceById(a.serviceId),n=r["Maps/getView"].getProjection().getCode(),u=t.currentLocale;if(e){const c={targetElement:document.getElementById("streetsmart"),username:e.params.username,password:e.params.password,apiKey:e.params.apiKey,srs:e.params.srs?e.params.srs:n,locale:u||e.params.locale};typeof StreetSmartApi>"u"?(console.warn("Cannot start Streetsmart-View. StreetSmartApi is not available."),s("Alerting/addSingleAlert",p.t("additional:modules.tools.streetsmart.createViewFailedMoreInfo"),{root:!0})):StreetSmartApi.init(c).then(function(){s("onInitSuccess"),a.cycloLayerID&&d.trigger("ModelList","showModelInTree",a.cycloLayerID)}).catch(function(i){console.warn("Failed to create component(s) through API: "+i),s("Alerting/addSingleAlert",p.t("additional:modules.tools.streetsmart.createViewFailedMoreInfo"),{root:!0})})}else console.warn("Cannot start Streetsmart-View. No service in rest-services found for serviceId ",a.serviceId),s("Alerting/addSingleAlert",p.t("additional:modules.tools.streetsmart.createViewFailedMoreInfo"),{root:!0})},destroyApi({state:a,dispatch:s,commit:t}){s("MapMarker/removePointMarker",null,{root:!0}),t("MapMarker/setPointStyleId",a.mapMarkerStyleId,{root:!0}),s("removeListener"),StreetSmartApi.destroy({targetElement:document.getElementById("streetsmart")}),a.cycloLayerID&&d.trigger("ModelList","setModelAttributesById",a.cycloLayerID,{isSelected:!1})},moveAndRotateMarker(a,s){return P(this,arguments,function*({dispatch:t,getters:r},e){yield t("MapMarker/placingPointMarker",e.detail.recording.xyz,{root:!0}),t("MapMarker/rotatePointMarker",e.detail.recording.relativeYaw+r.lastYaw,{root:!0}),d.trigger("MapView","setCenter",[e.detail.recording.xyz[0],e.detail.recording.xyz[1]])})},rotateMarker({commit:a,dispatch:s},t){const r=StreetSmartApi.getViewers(),e=r[0].getRecording();s("MapMarker/placingPointMarker",e.xyz,{root:!0}),a("setLastCoordinates",e.xyz),s("MapMarker/rotatePointMarker",t.detail.yaw,{root:!0}),a("setLastYaw",t.detail.yaw)},addListener({dispatch:a}){StreetSmartApi.on(StreetSmartApi.Events.viewer.VIEWER_ADDED,s=>{s.detail.viewer.on(StreetSmartApi.Events.panoramaViewer.RECORDING_CLICK,function(t){a("moveAndRotateMarker",t)}),s.detail.viewer.on(StreetSmartApi.Events.panoramaViewer.VIEW_CHANGE,function(t){a("rotateMarker",t)}),s.detail.viewer.on(StreetSmartApi.Events.panoramaViewer.TILE_LOAD_ERROR,function(t){console.warn(t)})})},removeListener({dispatch:a}){typeof StreetSmartApi<"u"&&typeof StreetSmartApi.on=="function"&&StreetSmartApi.on(StreetSmartApi.Events.viewer.VIEWER_ADDED,s=>{s.detail.viewer.off(StreetSmartApi.Events.panoramaViewer.RECORDING_CLICK,function(t){a("moveAndRotateMarker",t)}),s.detail.viewer.off(StreetSmartApi.Events.panoramaViewer.VIEW_CHANGE,function(t){a("rotateMarker",t)}),s.detail.viewer.off(StreetSmartApi.Events.panoramaViewer.TILE_LOAD_ERROR,function(t){console.warn(t)})})},onInitSuccess({state:a,dispatch:s,commit:t,rootGetters:r,rootState:e}){s("addListener"),t("setMapMarkerStyleId",e.MapMarker.pointStyleId),t("MapMarker/setPointStyleId",a.styleId,{root:!0}),s("setPosition",r["Maps/getView"].getCenter())}}}).call(this,o(6),o(3))},4074:function(y,b,o){var p=Object.create,d=Object.defineProperty,j=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,f=(r,e,n)=>e in r?d(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,m=(r,e)=>{for(var n in e||(e={}))g.call(e,n)&&f(r,n,e[n]);if(x)for(var n of x(e))A.call(e,n)&&f(r,n,e[n]);return r},v=(r,e)=>{for(var n in e)d(r,n,{get:e[n],enumerable:!0})},_=(r,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of O(e))!g.call(r,c)&&c!==n&&d(r,c,{get:()=>e[c],enumerable:!(u=j(e,c))||u.enumerable});return r},P=(r,e,n)=>(n=r!=null?p(D(r)):{},_(e||!r||!r.__esModule?d(n,"default",{value:r,enumerable:!0}):n,r)),E=r=>_(d({},"__esModule",{value:!0}),r),M={};v(M,{default:()=>t}),y.exports=E(M);var h=P(o(3881)),S=P(o(3846)),a=P(o(3845)),s=P(o(3700)),t={namespaced:!0,state:m({},s.default),mutations:S.default,actions:h.default,getters:a.default}},4075:function(y){y.exports=JSON.parse('{"menu":{"tools":{"streetsmart":"360\xB0 Panorama"}},"modules":{"tools":{"streetsmart":{"title":"360\xB0 Panorama","noData":"F\xFCr diese Position sind keine Panoramadaten verf\xFCgbar. Die Markierung wird auf die letzte Position zur\xFCckgesetzt.","createViewFailed":"Die Erstellung der Panorama-Ansicht ist fehlgeschlagen.","createViewFailedMoreInfo":"Die Panorama-Ansicht kann nicht angezeigt werden. Details dazu finden Sie in  der Entwickler-Konsole."}}}}')},4076:function(y){y.exports=JSON.parse('{"menu":{"tools":{"streetsmart":"360\xB0 panorama"}},"modules":{"tools":{"vueAddon":{"title":"360\xB0 panorama","noData":"No panorama data available for this position. Marker is set back to last position.","createViewFailed":"Failed to create streetsmart view.","createViewFailedMoreInfo":"The panorama view cannot be displayed. You can find details about this in the developer console."}}}}')},4588:function(y,b,o){"use strict";o.r(b);var p=o(4589),d=o.n(p);for(var j in p)["default"].indexOf(j)<0&&function(O){o.d(b,O,function(){return p[O]})}(j);b.default=d.a},4589:function(y,b,o){var p=Object.create,d=Object.defineProperty,j=Object.defineProperties,O=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(i,l,w)=>l in i?d(i,l,{enumerable:!0,configurable:!0,writable:!0,value:w}):i[l]=w,_=(i,l)=>{for(var w in l||(l={}))f.call(l,w)&&v(i,w,l[w]);if(g)for(var w of g(l))m.call(l,w)&&v(i,w,l[w]);return i},P=(i,l)=>j(i,x(l)),E=(i,l)=>{for(var w in l)d(i,w,{get:l[w],enumerable:!0})},M=(i,l,w,C)=>{if(l&&typeof l=="object"||typeof l=="function")for(let I of D(l))!f.call(i,I)&&I!==w&&d(i,I,{get:()=>l[I],enumerable:!(C=O(l,I))||C.enumerable});return i},h=(i,l,w)=>(w=i!=null?p(A(i)):{},M(l||!i||!i.__esModule?d(w,"default",{value:i,enumerable:!0}):w,i)),S=i=>M(d({},"__esModule",{value:!0}),i),a=(i,l,w)=>new Promise((C,I)=>{var N=L=>{try{V(w.next(L))}catch(R){I(R)}},T=L=>{try{V(w.throw(L))}catch(R){I(R)}},V=L=>L.done?C(L.value):Promise.resolve(L.value).then(N,T);V((w=w.apply(i,l)).next())}),s={};E(s,{default:()=>c}),y.exports=S(s);var t=o(8),r=o(41),e=h(o(59)),n=h(o(3845)),u=h(o(3846)),c={name:"StreetSmart",components:{ToolTemplate:e.default},data(){return{apiIsLoaded:!1}},computed:_(_(_({},(0,t.mapGetters)("Tools/StreetSmart",Object.keys(n.default))),(0,t.mapGetters)("Maps",["clickCoordinate"])),(0,t.mapGetters)("MapMarker",["markerPoint"])),watch:{active(i){i?this.$nextTick(()=>{this.apiIsLoaded&&this.initApi()}):this.close()},clickCoordinate(i,l){i!==l&&this.setPosition(i)},"markerPoint.values_.visible":function(i){if(this.active&&i){const l=this.markerPoint.getSource().getFeatures();l&&l[0]&&this.setPosition(l[0].getGeometry().getCoordinates())}}},created(){return a(this,null,function*(){yield this.loadPackages(this.apiLoadFinished),this.$on("close",this.close)})},methods:P(_(_({},(0,t.mapMutations)("Tools/StreetSmart",Object.keys(u.default))),(0,t.mapActions)("Tools/StreetSmart",["loadPackages","initApi","setPosition","destroyApi"])),{apiLoadFinished(){this.apiIsLoaded=!0,this.active&&this.initApi()},close(){const i=(0,r.getComponent)("streetSmart");this.destroyApi(),this.setActive(!1),i&&i.set("isActive",!1)}})}},4995:function(y,b,o){var p=Object.defineProperty,d=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,O=Object.prototype.hasOwnProperty,x=(v,_)=>{for(var P in _)p(v,P,{get:_[P],enumerable:!0})},D=(v,_,P,E)=>{if(_&&typeof _=="object"||typeof _=="function")for(let M of j(_))!O.call(v,M)&&M!==P&&p(v,M,{get:()=>_[M],enumerable:!(E=d(_,M))||E.enumerable});return v},g=v=>D(p({},"__esModule",{value:!0}),v),A={};x(A,{render:()=>f,staticRenderFns:()=>m}),y.exports=g(A);var f=function(){var _=this,P=_._self._c;return P("ToolTemplate",{attrs:{title:_.$t(_.name),icon:_.icon,active:_.active,"render-to-window":_.renderToWindow,"resizable-window":_.resizableWindow,"deactivate-gfi":_.deactivateGFI,"initial-width":_.initialWidth},scopedSlots:_._u([{key:"toolBody",fn:function(){return[_.apiIsLoaded?_._e():P("div",{staticClass:"centered-box-wrapper loader-is-loading",attrs:{id:"sidebarloader"}},[P("div",{staticClass:"default",attrs:{id:"loader-spinner-itself"}})]),_._v(" "),_.active?P("div",{attrs:{id:"streetsmart"}}):_._e()]},proxy:!0}])})},m=[];f._withStripped=!0},4996:function(y,b,o){},4997:function(y,b,o){},5727:function(y,b,o){"use strict";o.r(b);var p=o(5728),d=o(4588);for(var j in d)["default"].indexOf(j)<0&&function(A){o.d(b,A,function(){return d[A]})}(j);var O=o(5729),x=o(5730),D=o(1),g=Object(D.a)(d.default,p.render,p.staticRenderFns,!1,null,"507ca5c3",null);b.default=g.exports},5728:function(y,b,o){"use strict";var p=o(4995),d=o.n(p);o.o(p,"render")&&o.d(b,"render",function(){return p.render}),o.o(p,"staticRenderFns")&&o.d(b,"staticRenderFns",function(){return p.staticRenderFns})},5729:function(y,b,o){"use strict";var p=o(4996),d=o.n(p)},5730:function(y,b,o){"use strict";var p=o(4997),d=o.n(p)}}]);
