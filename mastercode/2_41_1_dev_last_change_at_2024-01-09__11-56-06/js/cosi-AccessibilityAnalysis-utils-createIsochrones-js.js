(window.webpackJsonp=window.webpackJsonp||[]).push([[244,248,388,405],{3747:function(M,K){function y(d,c,I){return typeof c!="string"||typeof I!="string"?(console.error(`utils/features/transform: The second and the third parameter must both be a string, but got ${typeof c} and ${typeof I}`),!1):!Array.isArray(d)||d.length<1?(console.error("utils/features/transform: The first parameter must be an non-empty array"),!1):(d.forEach(function(x){const J=x.getGeometry();J&&J.transform(c,I)}),d)}M.exports={transformFeatures:y}},3773:function(M,K){function y(d,c){if(!Array.isArray(d))return console.error("addons/cosi/utils/array/splitIntoChunks: The first parameter must be an array, but got "+typeof d),!1;if(typeof c!="number")return console.error("addons/cosi/utils/array/splitIntoChunks: The second parameter must be a number, but got "+typeof c),!1;const I=[];for(let x=0;x<d.length;x+=c){const J=d.slice(x,x+c);I.push(J)}return I}M.exports={splitIntoChunks:y}},3885:function(M,K,y){var d=Object.create,c=Object.defineProperty,I=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,J=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty,z=(a,s)=>{for(var r in s)c(a,r,{get:s[r],enumerable:!0})},D=(a,s,r,i)=>{if(s&&typeof s=="object"||typeof s=="function")for(let u of x(s))!L.call(a,u)&&u!==r&&c(a,u,{get:()=>s[u],enumerable:!(i=I(s,u))||i.enumerable});return a},k=(a,s,r)=>(r=a!=null?d(J(a)):{},D(s||!a||!a.__esModule?c(r,"default",{value:a,enumerable:!0}):r,a)),$=a=>D(c({},"__esModule",{value:!0}),a),R=(a,s,r)=>new Promise((i,u)=>{var C=E=>{try{U(r.next(E))}catch(e){u(e)}},S=E=>{try{U(r.throw(E))}catch(e){u(e)}},U=E=>E.done?i(E.value):Promise.resolve(E.value).then(C,S);U((r=r.apply(a,s)).next())}),B={};z(B,{default:()=>m}),M.exports=$(B);var o=k(y(25)),t=k(y(450)),_=y(3773);function g(a,s,r,i,u,C){return R(this,null,function*(){const S=[],U=new t.default,E=(0,_.splitIntoChunks)(s,5),e=C||"https://api.openrouteservice.org/v2/";for(let n=0;n<E.length;n++){const l=e+"isochrones/",h={locations:E[n],range_type:r,range:i},f=l+a.trim(),v={Accept:"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8","Content-Type":"application/json"};e==="https://api.openrouteservice.org/v2/"&&(v.Authorization="5b3ce3597851110001cf6248ef277cc626c440eb819e9299870c194c"),S.push(o.default.post(f+"/geojson",JSON.stringify(h),{headers:v,cancelToken:u&&u.token}).then(w=>w.data).catch(w=>{console.error("Error: ",w)}))}return Promise.all(S).then(n=>{const l=[];return n.forEach(h=>{h&&l.push(...U.readFeatures(h))}),l})})}var m=g},4120:function(M,K,y){var d=Object.create,c=Object.defineProperty,I=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,J=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty,z=(e,n)=>{for(var l in n)c(e,l,{get:n[l],enumerable:!0})},D=(e,n,l,h)=>{if(n&&typeof n=="object"||typeof n=="function")for(let f of x(n))!L.call(e,f)&&f!==l&&c(e,f,{get:()=>n[f],enumerable:!(h=I(n,f))||h.enumerable});return e},k=(e,n,l)=>(l=e!=null?d(J(e)):{},D(n||!e||!e.__esModule?c(l,"default",{value:e,enumerable:!0}):l,e)),$=e=>D(c({},"__esModule",{value:!0}),e),R=(e,n,l)=>new Promise((h,f)=>{var v=O=>{try{F(l.next(O))}catch(T){f(T)}},w=O=>{try{F(l.throw(O))}catch(T){f(T)}},F=O=>O.done?h(O.value):Promise.resolve(O.value).then(v,w);F((l=l.apply(e,n)).next())}),B={};z(B,{createIsochrones:()=>S,getFilterPoly:()=>u,setFilterPoly:()=>C}),M.exports=$(B);var o=k(y(3885)),t=y(3747),_=y(4158),g=k(y(4171)),m=k(y(4260)),a=k(y(25)),s=k(y(450));let r,i;function u(){return i}function C(e,n){n==="MultiPolygon"?i=(0,_.multiPolygon)(e):i=(0,_.polygon)(e)}function S(e,n){return R(this,arguments,function*({transportType:l,coordinates:h,scaleUnit:f,distance:v,maxDistance:w,batchSize:F,baseUrl:O,projectionCode:T},G){let b;return h.length===1?(G(50),b=yield U(l,h[0],f,v,w,O,T),G(100),b):E({transportType:l,coordinates:h,scaleUnit:f,distance:v,maxDistance:w,selectedFacilityNames:null,batchSize:F||200,progress:G,baseUrl:O,projectionCode:T})})}function U(e,n,l,h,f,v,w){return R(this,null,function*(){r&&r.cancel(),r=a.default.CancelToken.source();const F=l==="time"?h*60:h,O=l==="time"?f*60:f,T=[F/3,F*2/3,F],G=yield(0,o.default)(e,[n],l,f?[...T,O]:T,r,v),b=G.reverse(),N="Erreichbarkeit ab einem Referenzpunkt";let P=b;return P=(0,t.transformFeatures)(P,"EPSG:4326",w),P.forEach(j=>{j.set("featureType",N),j.set("coordinate",[n])}),P})}function E(e){return R(this,null,function*(){e.progress(1),r&&r.cancel(),r=a.default.CancelToken.source();const n=e.scaleUnit==="time"?e.distance*60:e.distance,l=e.scaleUnit==="time"?e.maxDistance*60:e.maxDistance,h=[n,n*2/3,n/3],f=e.maxDistance?[l,...h]:h,v=f.length,w=[],F=[],O=i===void 0?e.coordinates:e.coordinates.filter(b=>(0,m.default)(b,i));for(let b=0;b<O.length;b+=e.batchSize){const N=O.slice(b,b+e.batchSize);w.push(N)}let T=0,G=[];for(const b of w){try{const N=yield(0,o.default)(e.transportType,b,e.scaleUnit,f,r,e.baseUrl),P=N.reverse(),j=[];for(let p=0;p<v;p++)j.push([]);for(let p=0;p<P.length;p=p+v)j[p%v].push(P[p]),j[(p+1)%v].push(P[p+1]),j[(p+2)%v].push(P[p+2]),v===4&&j[(p+3)%v].push(P[p+3]);F.push(j)}catch(N){if(N.response.data.error.code!==3099)throw N}e.progress((T+1)/w.length*90),T++}if(F.length){const b=new s.default;for(let N=0;N<v;N++){let P=F.map(A=>A[N]),j,p;P=[].concat(...P),j=b.writeFeatureObject(P[0]);for(let A=0;A<P.length;A++)try{j=(0,g.default)(j,b.writeFeatureObject(P[A]))}catch(V){console.error(V)}p=new s.default().readFeatures(JSON.stringify(j)),p=(0,t.transformFeatures)(p,"EPSG:4326",e.projectionCode);const Q="Erreichbarkeit im Gebiet";p.forEach(A=>{A.set("featureType",Q),A.set("value",P[0].get("value")),A.set("mode",e.transportType),A.set("unit",e.scaleUnit),A.set("topic",e.selectedFacilityNames)}),G=G.concat(p)}}return e.progress(100),G})}},4260:function(M,K,y){var d=Object.defineProperty,c=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,J=(o,t)=>{for(var _ in t)d(o,_,{get:t[_],enumerable:!0})},L=(o,t,_,g)=>{if(t&&typeof t=="object"||typeof t=="function")for(let m of I(t))!x.call(o,m)&&m!==_&&d(o,m,{get:()=>t[m],enumerable:!(g=c(t,m))||g.enumerable});return o},z=o=>L(d({},"__esModule",{value:!0}),o),D={};J(D,{default:()=>$}),M.exports=z(D);var k=y(4168);function $(o,t,_){if(_===void 0&&(_={}),!o)throw new Error("point is required");if(!t)throw new Error("polygon is required");var g=(0,k.getCoord)(o),m=(0,k.getGeom)(t),a=m.type,s=t.bbox,r=m.coordinates;if(s&&B(g,s)===!1)return!1;a==="Polygon"&&(r=[r]);for(var i=!1,u=0;u<r.length&&!i;u++)if(R(g,r[u][0],_.ignoreBoundary)){for(var C=!1,S=1;S<r[u].length&&!C;)R(g,r[u][S],!_.ignoreBoundary)&&(C=!0),S++;C||(i=!0)}return i}function R(o,t,_){var g=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var m=0,a=t.length-1;m<t.length;a=m++){var s=t[m][0],r=t[m][1],i=t[a][0],u=t[a][1],C=o[1]*(s-i)+r*(i-o[0])+u*(o[0]-s)===0&&(s-o[0])*(i-o[0])<=0&&(r-o[1])*(u-o[1])<=0;if(C)return!_;var S=r>o[1]!=u>o[1]&&o[0]<(i-s)*(o[1]-r)/(u-r)+s;S&&(g=!g)}return g}function B(o,t){return t[0]<=o[0]&&t[1]<=o[1]&&t[2]>=o[0]&&t[3]>=o[1]}}}]);
