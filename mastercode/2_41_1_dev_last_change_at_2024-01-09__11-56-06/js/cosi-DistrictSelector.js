(window.webpackJsonp=window.webpackJsonp||[]).push([[46,136,137,286,287,288,289,293,398,422,427,429],{213:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,x=(u,s)=>{for(var i in s)c(u,i,{get:s[i],enumerable:!0})},j=(u,s,i,y)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of w(s))!I.call(u,p)&&p!==i&&c(u,p,{get:()=>s[p],enumerable:!(y=S(s,p))||y.enumerable});return u},b=(u,s,i)=>(i=u!=null?a(B(u)):{},j(s||!u||!u.__esModule?c(i,"default",{value:u,enumerable:!0}):i,u)),A=u=>j(c({},"__esModule",{value:!0}),u),l={};x(l,{default:()=>D}),P.exports=A(l);var e=b(o(5395)),d=b(o(3942)),O=b(o(3945)),f=b(o(3946)),D={component:e.default,store:d.default,locales:{de:O.default,en:f.default}}},3649:function(P,L,o){(function(a){var c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.prototype.hasOwnProperty,I=(m,F)=>{for(var G in F)c(m,G,{get:F[G],enumerable:!0})},x=(m,F,G,$)=>{if(F&&typeof F=="object"||typeof F=="function")for(let N of w(F))!B.call(m,N)&&N!==G&&c(m,N,{get:()=>F[N],enumerable:!($=S(F,N))||$.enumerable});return m},j=m=>x(c({},"__esModule",{value:!0}),m),b={};I(b,{addByMouseHover:()=>U,addFolder:()=>t,addModelsByAttributes:()=>i,addVectorLayer:()=>r,closeAllExpandedFolder:()=>u,getCollection:()=>y,getItemByAttributes:()=>p,getItemsByAttributes:()=>g,getModelByAttributes:()=>f,getServiceUrl:()=>e,groupBy:()=>W,offSearchbar:()=>l,onFeaturesLoaded:()=>M,onResetFeatures:()=>E,onSearchbar:()=>A,onShowAllFeatures:()=>O,onShowFeaturesById:()=>d,removeItem:()=>n,removeModelsById:()=>s,renderTree:()=>D}),P.exports=j(b);function A(m){a.on("Searchbar","hit",m)}function l(){a.off("Searchbar","hit")}function e(m){return a.request("RestReader","getServiceById",m).get("url")}function d(m){a.on("ModelList","showFeaturesById",m)}function O(m){a.on("ModelList","showAllFeatures",m)}function f(m){return a.request("ModelList","getModelByAttributes",m)}function D(){a.trigger("ModelList","renderTree")}function u(){a.trigger("ModelList","closeAllExpandedFolder")}function s(m){a.trigger("ModelList","removeModelsById",m)}function i(m){a.trigger("ModelList","addModelsByAttributes",m)}function y(){return a.request("ModelList","getCollection")}function p(m){return a.request("Parser","getItemByAttributes",m)}function g(m){return a.request("Parser","getItemsByAttributes",m)}function t(m,F,G,$){a.trigger("Parser","addFolder",m,F,G,$)}function r(m,F,G,$,N,R,_){a.trigger("Parser","addVectorLayer",m,F,G,$,N,R,_)}function n(m){a.trigger("Parser","removeItem",m)}function M(m){a.on("VectorLayer","featuresLoaded",m)}function E(m){a.on("VectorLayer","resetFeatures",m)}function U(m){a.trigger("MouseHover","add",m)}function W(m,F){return a.request("Util","groupBy",m,F)}}).call(this,o(3))},3650:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,x=(l,e,d,O)=>{if(e&&typeof e=="object"||typeof e=="function")for(let f of w(e))!I.call(l,f)&&f!==d&&c(l,f,{get:()=>e[f],enumerable:!(O=S(e,f))||O.enumerable});return l},j=(l,e,d)=>(d=l!=null?a(B(l)):{},x(e||!l||!l.__esModule?c(d,"default",{value:l,enumerable:!0}):d,l)),b=j(o(106));function A(l){var e;if(typeof l!="object"||l===null||typeof l.getSource!="function"||typeof((e=l.getSource())==null?void 0:e.getFeatures)!="function")return console.error("utils/layer/getLayerSource: layer must be a layer with a vector source",l),null;const d=l.getSource();return d.constructor===b.default?d.getSource():d}P.exports={getLayerSource:A}},3660:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,x=(s,i,y,p)=>{if(i&&typeof i=="object"||typeof i=="function")for(let g of w(i))!I.call(s,g)&&g!==y&&c(s,g,{get:()=>i[g],enumerable:!(p=S(i,g))||p.enumerable});return s},j=(s,i,y)=>(y=s!=null?a(B(s)):{},x(i||!s||!s.__esModule?c(y,"default",{value:s,enumerable:!0}):y,s)),b=o(3650),A=j(o(316)),l=o(3649),e=j(o(318)),d=o(5);function O(s,i){s.forEachFeature(y=>{y.getGeometry()!==void 0&&!i.intersectsCoordinate((0,d.getCenter)(y.getGeometry().getExtent()))&&s.removeFeature(y)})}function f(s,i,y,p,g){const t=(0,b.getLayerSource)(s.layer),r=p.typ;t&&(t.clear(),t.getListeners("featuresloadend")&&delete t.listeners_.featuresloadend,r==="WFS"&&t.setUrl(y),r!=="VectorBase"?(t.refresh(),i&&t.on("featuresloadend",function(n){p.renderer==="webgl"&&e.afterLoading(n.target.getFeatures(),s.attributes.styleId,s.attributes.excludeTypesFromParsing,s.attributes.isPointLayer),O(n.target,i),g&&g.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource")})):(t.addFeatures(p.features),i&&(O(t,i),g&&g.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource"))))}function D(s){const i=this instanceof A.default?this:void 0,y=[...(0,l.getItemsByAttributes)({typ:"WFS",isBaseLayer:!1}),...(0,l.getItemsByAttributes)({typ:"GeoJSON",isBaseLayer:!1}),...(0,l.getItemsByAttributes)({typ:"VectorBase",isBaseLayer:!1}),...(0,l.getItemsByAttributes)({typ:"OAF",isBaseLayer:!1})];u(y,s,i)}function u(s,i,y){const p=(0,l.getCollection)(),g=y?.$store.getters["Maps/projectionCode"]||"EPSG:25832";s.forEach(function(t){const r=p.get({id:t.id});if(r){let n=`${r.attributes.url}?service=WFS&version=${r.attributes.version}&request=GetFeature&typeName=${r.attributes.featureType}&srsName=${g}`;n+=i?`&bbox=${i.getExtent().toString()},${g}`:"",r.set("bboxGeometry",i),f(r,i,n,t,y)}else t.bboxGeometry=i})}P.exports={setBBoxToGeom:D,setBboxGeometryToLayer:u}},3668:function(P,L,o){var a=Object.defineProperty,c=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,B=(l,e)=>{for(var d in e)a(l,d,{get:e[d],enumerable:!0})},I=(l,e,d,O)=>{if(e&&typeof e=="object"||typeof e=="function")for(let f of S(e))!w.call(l,f)&&f!==d&&a(l,f,{get:()=>e[f],enumerable:!(O=c(e,f))||O.enumerable});return l},x=l=>I(a({},"__esModule",{value:!0}),l),j={};B(j,{default:()=>A}),P.exports=x(j);var b=o(5);function A(l,e=0){if(!Array.isArray(l))return console.error("utils/features/calculateExtent: The first parameter must be an array, but got "+typeof l),!1;if(typeof e!="number")return console.error("utils/features/calculateExtent: The second parameter must be a number, but got "+typeof e),!1;if(l.length>0){let d=(0,b.createEmpty)();return l.forEach(O=>{O.getGeometry()&&(d=(0,b.extend)(d,O.getGeometry().getExtent()))}),(0,b.isEmpty)(d)?!1:(0,b.buffer)(d,parseFloat(e))}return!1}},3674:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,x=(f,D)=>{for(var u in D)c(f,u,{get:D[u],enumerable:!0})},j=(f,D,u,s)=>{if(D&&typeof D=="object"||typeof D=="function")for(let i of w(D))!I.call(f,i)&&i!==u&&c(f,i,{get:()=>D[i],enumerable:!(s=S(D,i))||s.enumerable});return f},b=(f,D,u)=>(u=f!=null?a(B(f)):{},j(D||!f||!f.__esModule?c(u,"default",{value:f,enumerable:!0}):u,f)),A=f=>j(c({},"__esModule",{value:!0}),f),l={};x(l,{default:()=>O}),P.exports=A(l);var e=b(o(4176)),O={active:!1,deactivateGFI:!0,districtLevels:[],extent:[],boundingGeometry:void 0,icon:"bi-image",id:"districtSelector",isVisibleInMenu:!0,name:"Gebiet ausw\xE4hlen",renderToWindow:!0,resizableWindow:!1,selectedDistrictLevel:{},selectedDistrictLevelId:"",selectedDistrictsCollection:null,selectedDistrictNames:[],additionalInfoLayers:{},bufferValue:0,loadend:!1,mapping:null,mappingPath:void 0,mappingInit:e.default,readmeUrl:{"en-US":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/018districtselector.md","de-DE":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/018gebietsauswahl.md"},remoteMetadata:{},toolToOpen:void 0,enableBuffer:!0}},3710:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,x=(u,s)=>{for(var i in s)c(u,i,{get:s[i],enumerable:!0})},j=(u,s,i,y)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of w(s))!I.call(u,p)&&p!==i&&c(u,p,{get:()=>s[p],enumerable:!(y=S(s,p))||y.enumerable});return u},b=(u,s,i)=>(i=u!=null?a(B(u)):{},j(s||!u||!u.__esModule?c(i,"default",{value:u,enumerable:!0}):i,u)),A=u=>j(c({},"__esModule",{value:!0}),u),l={};x(l,{default:()=>D}),P.exports=A(l);var e=b(o(4222)),d=b(o(450)),O=b(o(286));const f={utm32:"EPSG:25832",wgs84:"EPSG:4326"};function D(u,s=0,i=f.utm32){if(!(Array.isArray(u)&&typeof parseFloat(s)=="number"))return console.error(`getBoundingGeometry: ${u} has to be defined and an array. ${s} has to be defined and a number`),!1;const y=parseFloat(s),p=new d.default,g=u.map(E=>E.clone().getGeometry().transform(i,f.wgs84)),t=new O.default(g),r=p.writeGeometryObject(t),n=(0,e.default)(r,y,{units:"meters"}),M=n.features.map(E=>p.readGeometry(E.geometry).transform(f.wgs84,i));return new O.default(M)}},3795:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.defineProperties,w=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,l=(t,r,n)=>r in t?c(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,e=(t,r)=>{for(var n in r||(r={}))b.call(r,n)&&l(t,n,r[n]);if(x)for(var n of x(r))A.call(r,n)&&l(t,n,r[n]);return t},d=(t,r)=>S(t,B(r)),O=(t,r)=>{for(var n in r)c(t,n,{get:r[n],enumerable:!0})},f=(t,r,n,M)=>{if(r&&typeof r=="object"||typeof r=="function")for(let E of I(r))!b.call(t,E)&&E!==n&&c(t,E,{get:()=>r[E],enumerable:!(M=w(r,E))||M.enumerable});return t},D=(t,r,n)=>(n=t!=null?a(j(t)):{},f(r||!t||!t.__esModule?c(n,"default",{value:t,enumerable:!0}):n,t)),u=t=>f(c({},"__esModule",{value:!0}),t),s={};O(s,{default:()=>g}),P.exports=u(s);var i=o(10),y=D(o(3674)),g=d(e({},(0,i.generateSimpleGetters)(y.default)),{keyOfAttrName:(t,{selectedDistrictLevel:r})=>r.keyOfAttrName,keyOfAttrNameStats:(t,{selectedDistrictLevel:r})=>r.stats.keyOfAttrName,label:(t,{selectedDistrictLevel:r})=>r.label,layer:(t,{selectedDistrictLevel:r})=>r.layer,metadataUrls:(t,{selectedDistrictLevel:r})=>r.stats.metadataUrls,selectedFeatures:(t,{selectedDistrictsCollection:r})=>!r||r.getLength()===0?[]:r.getArray(),selectedAdminFeatures:(t,{selectedDistricts:r})=>r.map(n=>n.adminFeature),selectedDistricts:(t,{selectedDistrictLevel:r})=>r.districts.filter(n=>n.isSelected===!0),selectedStatFeatures:(t,{selectedDistricts:r})=>r.map(n=>n.statFeatures).flat()})},3796:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.defineProperties,w=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,l=(t,r,n)=>r in t?c(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,e=(t,r)=>{for(var n in r||(r={}))b.call(r,n)&&l(t,n,r[n]);if(x)for(var n of x(r))A.call(r,n)&&l(t,n,r[n]);return t},d=(t,r)=>S(t,B(r)),O=(t,r)=>{for(var n in r)c(t,n,{get:r[n],enumerable:!0})},f=(t,r,n,M)=>{if(r&&typeof r=="object"||typeof r=="function")for(let E of I(r))!b.call(t,E)&&E!==n&&c(t,E,{get:()=>r[E],enumerable:!(M=w(r,E))||M.enumerable});return t},D=(t,r,n)=>(n=t!=null?a(j(t)):{},f(r||!t||!t.__esModule?c(n,"default",{value:t,enumerable:!0}):n,t)),u=t=>f(c({},"__esModule",{value:!0}),t),s={};O(s,{default:()=>g}),P.exports=u(s);var i=o(10),y=D(o(3674)),g=d(e({},(0,i.generateSimpleMutations)(y.default)),{addCategoryToMapping(t,{category:r,group:n,valueType:M="relative",isTemp:E=!0,calculation:U=void 0}){t.mapping.find(m=>m.value===r&&m.group===n)||t.mapping.push(e({category:r,value:r,group:n,valueType:M,isTemp:E,calculation:U},Object.fromEntries(t.districtLevels.map(m=>[m.stats.keyOfAttrName,!0]))))},removeCategoryFromMapping(t,{category:r,group:n}){t.mapping=t.mapping.filter(M=>!(M.value===r&&M.group===n))},resetMapping(t){t.mapping=t.mappingInit},addRemoteMetadata(t,{layerId:r,metadata:n}){t.remoteMetadata[r]=n}})},3941:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,x=(p,g)=>{for(var t in g)c(p,t,{get:g[t],enumerable:!0})},j=(p,g,t,r)=>{if(g&&typeof g=="object"||typeof g=="function")for(let n of w(g))!I.call(p,n)&&n!==t&&c(p,n,{get:()=>g[n],enumerable:!(r=S(g,n))||r.enumerable});return p},b=(p,g,t)=>(t=p!=null?a(B(p)):{},j(g||!p||!p.__esModule?c(t,"default",{value:p,enumerable:!0}):t,p)),A=p=>j(c({},"__esModule",{value:!0}),p),l={};x(l,{getFeatureStyle:()=>u,getSelectedFillStyle:()=>s,getSelectedStrokeStyle:()=>i,styleSelectedDistrictLevels:()=>y}),P.exports=A(l);var e=o(40),d=o(153),O=o(3649),f=b(o(21));const D={fill:{color:[255,255,255,0]},stroke:{color:[51,153,204,1],width:3}};function u(p,g){if(typeof p!="function"){console.error("getFeatureStyle: First parameter 'styleFunction' must be a function, but got "+typeof p);return}if(!(g instanceof f.default)){console.error("getFeatureStyle: Second parameter 'feature' must be an instance of ol feature, but got "+g);return}const t=p(g);if(t)return Array.isArray(t)?t[0]:t}function s(p,g,t,r){var n,M;if(!Array.isArray(t))return console.error("getSelectedFillStyle: Third parameter defaultColor must be an array of objects, but got "+typeof t),null;if(typeof r!="number")return console.error("getSelectedFillStyle: Fourth parameter opacity must be a number, but got "+typeof r),null;const E=(0,d.asArray)(((n=p?.getFill())==null?void 0:n.getColor())||((M=g?.fill)==null?void 0:M.color)||t);return new e.Fill({color:[E[0],E[1],E[2],r]})}function i(p,g,t=[51,153,204,1],r=3){var n,M;return p?.getStroke()?p.getStroke():new e.Stroke({color:((n=g?.stroke)==null?void 0:n.color)||t,width:((M=g?.stroke)==null?void 0:M.width)||r})}function y(p,g,t=D,r=.6){if(!Array.isArray(p)){console.error("styleSelectedDistrictLevels: District levels must be an array of objects");return}p.forEach(n=>{const M=n.layer.getSource().getFeatures();if(n.layerId===g&&M.length>0){const E=n.layer.getStyleFunction(),U=u(E,M[0]),W=new e.Style({fill:s(U,t,D.fill.color,r),stroke:i(U,t)});n.layer.getSource().getFeatures().forEach(m=>{m.setStyle()}),n.layer.setStyle(()=>W)}else{const E=(0,O.getModelByAttributes)({id:n.layerId});E&&E.styling()}})}},3942:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,B=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,x=(u,s)=>{for(var i in s)c(u,i,{get:s[i],enumerable:!0})},j=(u,s,i,y)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of w(s))!I.call(u,p)&&p!==i&&c(u,p,{get:()=>s[p],enumerable:!(y=S(s,p))||y.enumerable});return u},b=(u,s,i)=>(i=u!=null?a(B(u)):{},j(s||!u||!u.__esModule?c(i,"default",{value:u,enumerable:!0}):i,u)),A=u=>j(c({},"__esModule",{value:!0}),u),l={};x(l,{default:()=>D}),P.exports=A(l);var e=b(o(3795)),d=b(o(3796)),O=b(o(3674)),f=b(o(3943)),D={namespaced:!0,state:O.default,mutations:d.default,getters:e.default,actions:f.default}},3945:function(P){P.exports=JSON.parse('{"modules":{"tools":{"cosi":{"districtSelector":{"title":"Gebiet ausw\xE4hlen","dropdownLabel":"Bitte w\xE4hlen Sie einen Bezugsrahmen aus","districtLevel":"Bezugsrahmen","multiDropdownLabel":"Gebiete","inputLabel":"Puffer[m] (optional)","additionalLayer":"Hilfsebenen einblenden","description":"Klicken Sie in der Karte auf ein oder mehrere Gebiete, um Ihr Planungsgebiet zu bestimmen. Alternativ k\xF6nnen Sie die Gebiete \xFCber die Auswahlliste festlegen. Anschlie\xDFend best\xE4tigen Sie Ihre Auswahl mit einem Klick auf den Button \\"Auswahl best\xE4tigen\\".","buttonConfirm":"Auswahl best\xE4tigen","buttonReset":"Auswahl zur\xFCcksetzen","help":"Vor Beginn der Analyse/Planung k\xF6nnen Sie hier ein Planungsgebiet ausw\xE4hlen. Die empirischen Daten werden f\xFCr diese Gebiete geladen. Alternativ k\xF6nnen Sie \xFCber das Werkzeug <strong>&quot;Vergleichbare Gebiete ermitteln&quot;</strong> Gebiete nach bestimmten Parametern ausw\xE4hlen. Mit dem <strong>Puffer</strong> k\xF6nnen Sie w\xE4hlen in welchem Radius um das gew\xE4hlte Gebiet ausgew\xE4hlte Einrichtungen angezeigt werden. Die Analysefunktionen werden davon nicht beeinflusst.","warning":"<strong>Sie haben noch keine Gebiete ausgew\xE4hlt. Es werden keine Datens\xE4tze geladen.</strong> Sie k\xF6nnen trotzdem Fachdaten-Ebenen f\xFCr die gesamte Stadt anzeigen lassen und Gebiete nach Parametern ermitteln.","additionalInfoLayersHelp":"Mithilfe der Checkbox k\xF6nnen Sie zus\xE4tzliche Layer zur Orientierung einblenden. Die Layer k\xF6nnen ebenfalls \xFCber den Themenbaum ein- und ausgeschaltet werden."}}}}}')},3946:function(P){P.exports=JSON.parse('{"modules":{"tools":{"cosi":{"districtSelector":{"title":"Select Area","dropdownLabel":"Please select an administrative level to work on","districtLevel":"Administrative Level","multiDropdownLabel":"Areas","inputLabel":"Buffer[m] (optional)","additionalLayer":"Show Guidelayers","description":"Click on one or more areas in the map to define your planning area. Alternatively, you can define the areas via the selection list. Then confirm your selection by clicking on the \\"Confirm selection\\" button.","buttonConfirm":"Confirm Selection","buttonReset":"Reset Selection","help":"Before starting the analysis / planning, you can select a planning area here. The empirical data will be loaded for these areas. Alternatively, you can use the <strong>\\"District Query\\"</strong> tool to select areas according to specific parameters. With the <strong>buffer</strong> you can choose in which radius around the selected area selected facilities are displayed. The analysis functions are not affected by this.","warning":"<strong>You have not selected any areas yet.</strong> No data sets are loaded. You can still display subject data levels for the entire city and identify areas by parameters.","additionalInfoLayersHelp":"You can display additional info layers as guidance by clicking the checkbox. The layers can also be toggled using the layer tree."}}}}}')},4154:function(P,L,o){"use strict";o.r(L);var a=o(4155),c=o.n(a);for(var S in a)["default"].indexOf(S)<0&&function(w){o.d(L,w,function(){return a[w]})}(S);L.default=c.a},4155:function(P,L,o){var a=Object.defineProperty,c=Object.defineProperties,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,b=(s,i,y)=>i in s?a(s,i,{enumerable:!0,configurable:!0,writable:!0,value:y}):s[i]=y,A=(s,i)=>{for(var y in i||(i={}))x.call(i,y)&&b(s,y,i[y]);if(I)for(var y of I(i))j.call(i,y)&&b(s,y,i[y]);return s},l=(s,i)=>c(s,w(i)),e=(s,i)=>{for(var y in i)a(s,y,{get:i[y],enumerable:!0})},d=(s,i,y,p)=>{if(i&&typeof i=="object"||typeof i=="function")for(let g of B(i))!x.call(s,g)&&g!==y&&a(s,g,{get:()=>i[g],enumerable:!(p=S(i,g))||p.enumerable});return s},O=s=>d(a({},"__esModule",{value:!0}),s),f={};e(f,{default:()=>u}),P.exports=O(f);var D=o(8),u={name:"ToolInfo",props:{title:{type:String,default:"Werkzeuginformationen (Link \xF6ffnen)"},url:{type:[String,Object],default:null},infoText:{type:String,default:void 0},summary:{type:String,default:null},locale:{type:String,default:"de"}},methods:l(A({},(0,D.mapActions)("Alerting",["addSingleAlert","cleanup"])),{showInfo(){return this.url?window.open(this.getUrl(),"_blank"):(this.infoText&&(this.cleanup(),this.addSingleAlert({category:"Info",content:this.infoText,displayClass:"info"})),null)},getUrl(){if(typeof this.url=="string")return this.url;const s=Object.keys(this.url).find(i=>i.substring(0,i.indexOf("-"))===this.locale.substring(0,i.indexOf("-")));return this.url[s]}})}},4156:function(P,L,o){var a=Object.defineProperty,c=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,B=(l,e)=>{for(var d in e)a(l,d,{get:e[d],enumerable:!0})},I=(l,e,d,O)=>{if(e&&typeof e=="object"||typeof e=="function")for(let f of S(e))!w.call(l,f)&&f!==d&&a(l,f,{get:()=>e[f],enumerable:!(O=c(e,f))||O.enumerable});return l},x=l=>I(a({},"__esModule",{value:!0}),l),j={};B(j,{render:()=>b,staticRenderFns:()=>A}),P.exports=x(j);var b=function(){var e=this,d=e._self._c;return d("div",[d("v-row",{attrs:{dense:"",justify:"end"}},[d("v-col",{attrs:{cols:"17"}},[e.summary?d("p",[e._v(`
                `+e._s(e.summary)+`
            `)]):e._e()]),e._v(" "),d("v-col",{attrs:{cols:"1"}},[e.infoText||e.url?d("v-btn",{staticClass:"info_btn",attrs:{title:e.title,depressed:"",right:"",icon:"","x-small":""},on:{click:e.showInfo}},[d("v-icon",[e._v("mdi-help-circle")])],1):e._e()],1)],1),e._v(" "),d("v-divider")],1)},A=[];b._withStripped=!0},4157:function(P,L,o){},4162:function(P,L,o){"use strict";o.r(L);var a=o(4163),c=o(4154);for(var S in c)["default"].indexOf(S)<0&&function(x){o.d(L,x,function(){return c[x]})}(S);var w=o(4164),B=o(1),I=Object(B.a)(c.default,a.render,a.staticRenderFns,!1,null,"0f052480",null);L.default=I.exports},4163:function(P,L,o){"use strict";var a=o(4156),c=o.n(a);o.o(a,"render")&&o.d(L,"render",function(){return a.render}),o.o(a,"staticRenderFns")&&o.d(L,"staticRenderFns",function(){return a.staticRenderFns})},4164:function(P,L,o){"use strict";var a=o(4157),c=o.n(a)},4383:function(P,L,o){"use strict";o.r(L);var a=o(4384),c=o.n(a);for(var S in a)["default"].indexOf(S)<0&&function(w){o.d(L,w,function(){return a[w]})}(S);L.default=c.a},4384:function(P,L,o){var a=Object.create,c=Object.defineProperty,S=Object.defineProperties,w=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,l=(_,v,h)=>v in _?c(_,v,{enumerable:!0,configurable:!0,writable:!0,value:h}):_[v]=h,e=(_,v)=>{for(var h in v||(v={}))b.call(v,h)&&l(_,h,v[h]);if(x)for(var h of x(v))A.call(v,h)&&l(_,h,v[h]);return _},d=(_,v)=>S(_,B(v)),O=(_,v)=>{for(var h in v)c(_,h,{get:v[h],enumerable:!0})},f=(_,v,h,T)=>{if(v&&typeof v=="object"||typeof v=="function")for(let C of I(v))!b.call(_,C)&&C!==h&&c(_,C,{get:()=>v[C],enumerable:!(T=w(v,C))||T.enumerable});return _},D=(_,v,h)=>(h=_!=null?a(j(_)):{},f(v||!_||!_.__esModule?c(h,"default",{value:_,enumerable:!0}):h,_)),u=_=>f(c({},"__esModule",{value:!0}),_),s={};O(s,{default:()=>R}),P.exports=u(s);var i=D(o(59)),y=o(41),p=o(3737),g=D(o(3668)),t=D(o(3710)),r=o(3660),n=o(8),M=D(o(3795)),E=D(o(3796)),U=o(62),W=o(83),m=o(40),F=o(3941),G=o(1202),$=D(o(4162)),N=o(3649),R={name:"DistrictSelector",components:{Tool:i.default,ToolInfo:$.default},data(){return{bufferVal:0,dragBoxButtonColor:"grey lighten-1",visibleInfoLayers:[],districtLevelLayersLoaded:!1}},computed:d(e(e(e(e(e({},(0,n.mapGetters)("Language",["currentLocale"])),(0,n.mapGetters)("Tools/DistrictSelector",Object.keys(M.default))),(0,n.mapGetters)("Maps",["getVisibleLayerList"])),(0,n.mapState)(["easyReadMode"])),(0,n.mapGetters)("Tools/AreaSelector",{areaSelectorGeom:"geometry"})),{selectedNames:{get(){return this.selectedDistrictNames},set(_){this.setSelectedDistrictNames(_)}},selectedLevelId:{get(){return this.selectedDistrictLevelId},set(_){this.setSelectedDistrictLevelId(_)}},layerList(){return mapCollection.getMap("2D").getLayers().getArray()}}),watch:{active(_){if(_)this.select.setActive(!0),document.addEventListener("keyup",this.checkKey),this.selectedNames.length===0&&(0,F.styleSelectedDistrictLevels)(this.districtLevels,this.selectedLevelId,this.selectedDistrictLevel.activeStyle);else{const v=(0,y.getComponent)(this.id);this.updateExtent(),this.dragBox.setActive(!1),this.select.setActive(!1),this.selectedFeatures.length>0&&this.addNewSelection({selection:this.selectedFeatures,source:this.$t("additional:modules.tools.cosi.districtSelector.title"),id:this.label+": "+this.selectedFeatures[0].getProperties()[this.keyOfAttrName]+", +"+(this.selectedFeatures.length-1)}),document.removeEventListener("keyup",this.checkKey),v&&v.set("isActive",!1),this.$watch("$store.state.Tools.Print.active",h=>{h?(0,F.styleSelectedDistrictLevels)(this.districtLevels,this.selectedLevelId,{fill:{color:[255,255,255,0]},stroke:{color:[51,153,204,1],width:3}},0):this.selectedNames.length&&(0,F.styleSelectedDistrictLevels)(this.districtLevels,this.selectedLevelId,{fill:{color:[255,255,255,0]},stroke:{color:[51,153,204,1],width:3}},.6)}),this.selectedNames.length===0&&(0,F.styleSelectedDistrictLevels)(this.districtLevels),this.selectedNames.length&&typeof this.toolToOpen=="string"&&this.$store.dispatch("Tools/setToolActive",{id:this.toolToOpen,active:!0})}},layerList:function(_){(0,p.prepareDistrictLevels)(this.districtLevels,_)},selectedDistrictsCollection:"transferFeatures",selectedLevelId:["clearFeatures","changeSelectedDistrictLevel"],visibleInfoLayers(){this.toggleAdditionalLayers()},getVisibleLayerList(_){this.checkAdditionalLayers(_)},easyReadMode(){(this.selectedNames.length!==0||this.active)&&(0,F.styleSelectedDistrictLevels)(this.districtLevels,this.selectedLevelId,this.selectedDistrictLevel.activeStyle)}},created(){this.$on("close",()=>{this.setActive(!1)}),(0,p.prepareDistrictLevels)(this.districtLevels,this.layerList),this.selectedLevelId=this.districtLevels[0].layerId,this.setNonReactiveData(),this.initializeAdditionalInfoLayers()},mounted(){(0,N.onFeaturesLoaded)(_=>{!this.districtLevelLayersLoaded&&this.selectedLevelId===_&&((0,F.styleSelectedDistrictLevels)(this.districtLevels,this.selectedLevelId,this.selectedDistrictLevel.activeStyle),this.districtLevelLayersLoaded=!0,this.$forceUpdate())}),this.active&&document.addEventListener("keyup",this.checkKey),this.loadMapping()},methods:d(e(e(e(e(e(e({},(0,n.mapMutations)("Tools/DistrictSelector",Object.keys(E.default))),(0,n.mapMutations)("Tools/Filter",["setFilterGeometry"])),(0,n.mapActions)("Alerting",["addSingleAlert","cleanup"])),(0,n.mapActions)("Tools/DistrictSelector",["loadStatFeatures","loadMapping"])),(0,n.mapActions)("Maps",["addInteraction","removeInteraction","zoomToExtent","resetView"])),(0,n.mapActions)("Tools/SelectionManager",["addNewSelection"])),{checkKey(_){_.code==="Enter"&&this.setActive(!1)},clearFeatures(){this.select.getFeatures().clear()},changeSelectedDistrictLevel(_){const v=this.getDistrictLevelById(_);this.setSelectedDistrictLevel(v),(0,F.styleSelectedDistrictLevels)(this.districtLevels,_,v.activeStyle)},getDistrictLevelById(_){return this.districtLevels.find(v=>v.layerId===_)},registerDragBoxListener(_,v){_.on("boxend",h=>{const T=h.target.getGeometry().getExtent();this.getDistrictLevelById(this.selectedLevelId).layer.getSource().forEachFeatureIntersectingExtent(T,z=>{v.push(z)})}),_.on("boxstart",()=>this.clearFeatures())},registerFeatureCollectionListener(_){_.on("change:length",v=>{const h=v.target.getArray().map(T=>T.get(this.keyOfAttrName));this.setSelectedDistrictsCollection(v.target),this.selectedNames=[...new Set(h)]}),_.on("remove",v=>{const h=this.selectedDistrictLevel.districts.find(T=>T.adminFeature.getId()===v.element.getId());h.isSelected=!1}),_.on("add",v=>{const h=this.selectedDistrictLevel.districts.find(T=>T.adminFeature.getId()===v.element.getId());h.isSelected=!0})},showAlert(_,v="Info",h="info"){this.addSingleAlert({category:v,content:_,displayClass:h})},setNonReactiveData(){this.select=new U.Select({filter:(_,v)=>v.get("id")===this.selectedLevelId,style:new m.Style({fill:new m.Fill({color:"rgba(255, 255, 255, 0)"}),stroke:new m.Stroke({color:"#3399CC",width:5})}),addCondition:W.singleClick,removeCondition:W.singleClick}),this.registerFeatureCollectionListener(this.select.getFeatures()),this.addInteraction(this.select),this.dragBox=new U.DragBox,this.dragBox.setActive(!1),this.registerDragBoxListener(this.dragBox,this.select.getFeatures()),this.addInteraction(this.dragBox)},toggleDragBox(){this.dragBox.getActive()?(this.dragBox.setActive(!1),this.dragBoxButtonColor="grey lighten-1"):(this.dragBox.setActive(!0),this.dragBoxButtonColor="primary")},transferFeatures(_){_.get("fromExternal")&&(this.selectedNames.length===0&&!this.active&&(0,F.styleSelectedDistrictLevels)(this.districtLevels,this.selectedDistrictLevel.layerId,this.selectedDistrictLevel.activeStyle),this.select.getFeatures().clear(),_.forEach(v=>{this.select.getFeatures().push(v)}),this.updateExtent(_.get("zoomToExtent")))},updateExtent(_=!0){const v=(0,g.default)(this.selectedFeatures,parseInt(this.bufferVal,10)),h=(0,t.default)(this.selectedFeatures,this.bufferVal),T=this.selectedDistrictLevel.districts.filter(C=>C.isSelected===!0);v?(this.setBufferValue(this.bufferVal),this.setExtent(v),this.setBoundingGeometry(h),r.setBBoxToGeom.call(this,this.areaSelectorGeom||h),this.setFilterGeometry(this.areaSelectorGeom||h),_&&this.zoomToExtent({extent:v,options:{}}),this.loadStatFeatures({districts:T,districtLevel:this.selectedDistrictLevel,getStatFeatures:G.getFeaturePOST})):(this.setExtent([]),this.resetView(),this.setBoundingGeometry(void 0),r.setBBoxToGeom.call(this,this.areaSelectorGeom||void 0),this.setFilterGeometry(this.areaSelectorGeom||!1),this.showAlert(this.$t("additional:modules.tools.cosi.districtSelector.warning"),"Warnung","warning"))},toggleAdditionalLayers(){for(const _ in this.additionalInfoLayers){const v=this.visibleInfoLayers.includes(_);for(const h of this.additionalInfoLayers[_]){const T=(0,N.getModelByAttributes)({id:h});T&&T.set("isSelected",v)}}},checkAdditionalLayers(_){let v,h,T,C;for(const z in this.additionalInfoLayers){h=[];for(const k of this.additionalInfoLayers[z])v=_.some(J=>typeof J?.get=="function"&&J.get("id")===k),h=h.includes(v)?h:[...h,v];h.length===1||h.includes(!0)?(T=this.visibleInfoLayers.includes(z),C=h[0],C&&!T?this.visibleInfoLayers.push(z):!C&&T&&(this.visibleInfoLayers=this.visibleInfoLayers.filter(k=>k!==z))):this.visibleInfoLayers=[]}},initializeAdditionalInfoLayers(){for(const _ in this.additionalInfoLayers)for(const v of this.additionalInfoLayers[_])(0,N.getModelByAttributes)({id:v})||(0,N.addModelsByAttributes)({id:v})},updateSelectedFeatures(_){if(this.clearFeatures(),_.length>0){const v=this.layer.getSource().getFeatures(),h={};_.forEach(T=>{h[T]=!0}),v.forEach(T=>{Object.prototype.hasOwnProperty.call(h,T.get(this.keyOfAttrName))&&this.select.getFeatures().push(T)})}}})}},4798:function(P,L,o){var a=Object.defineProperty,c=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,B=(l,e)=>{for(var d in e)a(l,d,{get:e[d],enumerable:!0})},I=(l,e,d,O)=>{if(e&&typeof e=="object"||typeof e=="function")for(let f of S(e))!w.call(l,f)&&f!==d&&a(l,f,{get:()=>e[f],enumerable:!(O=c(e,f))||O.enumerable});return l},x=l=>I(a({},"__esModule",{value:!0}),l),j={};B(j,{render:()=>b,staticRenderFns:()=>A}),P.exports=x(j);var b=function(){var e=this,d=e._self._c;return d("Tool",{attrs:{title:e.$t("additional:modules.tools.cosi.districtSelector.title"),icon:e.icon,active:e.active,"render-to-window":e.renderToWindow,"resizable-window":e.resizableWindow,"deactivate-gfi":e.deactivateGFI},scopedSlots:e._u([e.active?{key:"toolBody",fn:function(){return[d("v-app",{attrs:{id:"district-selector"}},[d("ToolInfo",{attrs:{url:e.readmeUrl,locale:e.currentLocale,summary:e.$t("additional:modules.tools.cosi.districtSelector.description")}}),e._v(" "),d("form",[d("v-select",{attrs:{items:e.districtLevels,label:e.$t("additional:modules.tools.cosi.districtSelector.dropdownLabel"),"item-text":"label","item-value":"layerId",outlined:"",dense:""},model:{value:e.selectedLevelId,callback:function(O){e.selectedLevelId=O},expression:"selectedLevelId"}}),e._v(" "),d("v-autocomplete",{attrs:{value:e.selectedNames,items:e.selectedDistrictLevel.nameList,label:e.$t("additional:modules.tools.cosi.districtSelector.multiDropdownLabel"),outlined:"",dense:"",multiple:"","small-chips":"","deletable-chips":""},on:{input:e.updateSelectedFeatures}}),e._v(" "),e.enableBuffer?d("v-text-field",{attrs:{label:e.$t("additional:modules.tools.cosi.districtSelector.inputLabel"),outlined:"",dense:"",type:"number",step:"250",min:"0"},model:{value:e.bufferVal,callback:function(O){e.bufferVal=O},expression:"bufferVal"}}):e._e(),e._v(" "),Object.keys(e.additionalInfoLayers).length?d("div",[d("span",{staticClass:"text-subtitle-2"},[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.districtSelector.additionalLayer"))+`
                    `)]),e._v(" "),d("v-icon",{attrs:{small:""},on:{click:function(O){e.showAlert(e.$t("additional:modules.tools.cosi.districtSelector.additionalInfoLayersHelp"))}}},[e._v(`
                        mdi-help-circle
                    `)])],1):e._e(),e._v(" "),d("v-row",{attrs:{dense:""}},e._l(e.additionalInfoLayers,function(O,f){return d("v-col",{key:f},[d("v-checkbox",{attrs:{value:f,multiple:"",dense:"","hide-details":"",type:"checkbox",label:`${f}`},model:{value:e.visibleInfoLayers,callback:function(D){e.visibleInfoLayers=D},expression:"visibleInfoLayers"}})],1)}),1),e._v(" "),d("v-divider"),e._v(" "),d("v-btn",{attrs:{tile:"",depressed:"",color:"grey lighten-1"},on:{click:function(O){return e.setActive(!1)}}},[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.districtSelector.buttonConfirm"))+`
                `)]),e._v(" "),d("v-btn",{attrs:{tile:"",depressed:"",color:"grey lighten-1"},on:{click:e.clearFeatures}},[e._v(`
                    `+e._s(e.$t("additional:modules.tools.cosi.districtSelector.buttonReset"))+`
                `)]),e._v(" "),d("v-btn",{attrs:{tile:"",depressed:"",color:e.dragBoxButtonColor},on:{click:e.toggleDragBox}},[d("v-icon",[e._v("mdi-pencil")])],1)],1)],1)]},proxy:!0}:null],null,!0)})},A=[];b._withStripped=!0},4799:function(P,L,o){P.exports={"gridBreakpoints-xs":"0","gridBreakpoints-sm":"576px","gridBreakpoints-md":"768px","gridBreakpoints-lg":"992px","gridBreakpoints-xl":"1200px","gridBreakpoints-xxl":"1400px"}},5395:function(P,L,o){"use strict";o.r(L);var a=o(5396),c=o(4383);for(var S in c)["default"].indexOf(S)<0&&function(x){o.d(L,x,function(){return c[x]})}(S);var w=o(5397),B=o(1),I=Object(B.a)(c.default,a.render,a.staticRenderFns,!1,null,null,null);L.default=I.exports},5396:function(P,L,o){"use strict";var a=o(4798),c=o.n(a);o.o(a,"render")&&o.d(L,"render",function(){return a.render}),o.o(a,"staticRenderFns")&&o.d(L,"staticRenderFns",function(){return a.staticRenderFns})},5397:function(P,L,o){"use strict";var a=o(4799),c=o.n(a)}}]);
