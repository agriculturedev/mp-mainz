(window.webpackJsonp=window.webpackJsonp||[]).push([[87,201,202,480,481,482,483,484],{251:function(h,M,l){var f=Object.create,c=Object.defineProperty,x=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,R=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,b=(m,y)=>{for(var F in y)c(m,F,{get:y[F],enumerable:!0})},E=(m,y,F,d)=>{if(y&&typeof y=="object"||typeof y=="function")for(let o of g(y))!D.call(m,o)&&o!==F&&c(m,o,{get:()=>y[o],enumerable:!(d=x(y,o))||d.enumerable});return m},O=(m,y,F)=>(F=m!=null?f(R(m)):{},E(y||!m||!m.__esModule?c(F,"default",{value:m,enumerable:!0}):F,m)),j=m=>E(c({},"__esModule",{value:!0}),m),p={};b(p,{default:()=>H}),h.exports=j(p);var e=O(l(5676)),i=O(l(4046)),_=O(l(4047)),w=O(l(4048)),H={component:e.default,store:i.default,locales:{de:_.default,en:w.default}}},3694:function(h,M){var l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,g=(j,p)=>{for(var e in p)l(j,e,{get:p[e],enumerable:!0})},R=(j,p,e,i)=>{if(p&&typeof p=="object"||typeof p=="function")for(let _ of c(p))!x.call(j,_)&&_!==e&&l(j,_,{get:()=>p[_],enumerable:!(i=f(p,_))||i.enumerable});return j},D=j=>R(l({},"__esModule",{value:!0}),j),b={};g(b,{default:()=>O}),h.exports=D(b);var O={active:!1,id:"refugeehomes",name:"additional:menu.tools.refugeehomes",icon:"house-fill",renderToWindow:!1,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!0,initialWidth:600,layerIds:["4553","4554","10964","10965","4556","4557","9097","23737"],featureAttributes:["bemerkung","bezirk","platzzahl","stadtteil","bezeichnung","geplante_inbetriebnahme","pfad","geom"],features:[],filteredFeatures:[],ranking:["zea_bestehend","nur_ea_bestehend","oeru_bestehend","oeru_geplant","perspektive_wohnen_bestehend","perspektive_wohnen_geplant","standorte_schutzsuchende_ukraine"]}},3836:function(h,M,l){var f=Object.create,c=Object.defineProperty,x=Object.defineProperties,g=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,p=(t,r,n)=>r in t?c(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,e=(t,r)=>{for(var n in r||(r={}))O.call(r,n)&&p(t,n,r[n]);if(b)for(var n of b(r))j.call(r,n)&&p(t,n,r[n]);return t},i=(t,r)=>x(t,R(r)),_=(t,r)=>{for(var n in r)c(t,n,{get:r[n],enumerable:!0})},w=(t,r,n,A)=>{if(r&&typeof r=="object"||typeof r=="function")for(let P of D(r))!O.call(t,P)&&P!==n&&c(t,P,{get:()=>r[P],enumerable:!(A=g(r,P))||A.enumerable});return t},H=(t,r,n)=>(n=t!=null?f(E(t)):{},w(r||!t||!t.__esModule?c(n,"default",{value:t,enumerable:!0}):n,t)),m=t=>w(c({},"__esModule",{value:!0}),t),y={};_(y,{default:()=>a}),h.exports=m(y);var F=l(10),d=H(l(3694)),a=i(e({},(0,F.generateSimpleGetters)(d.default)),{getParameterValue:()=>t=>t.result[t.property],hasDistrict:()=>t=>{var r,n;let A,P="";return Object.prototype.hasOwnProperty.call(Config,"zoomTo")&&((r=Config.zoomTo[0])!=null&&r.allowedValues)&&(A=(n=Config.zoomTo[0])==null?void 0:n.allowedValues),A&&t&&A.includes(t.toUpperCase())&&(P=t.toUpperCase()),A&&typeof t=="string"&&t?.length===1&&Number(t)<8&&(P=A[Number(t)-1]),P}})},3837:function(h,M,l){var f=Object.create,c=Object.defineProperty,x=Object.defineProperties,g=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,p=(t,r,n)=>r in t?c(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,e=(t,r)=>{for(var n in r||(r={}))O.call(r,n)&&p(t,n,r[n]);if(b)for(var n of b(r))j.call(r,n)&&p(t,n,r[n]);return t},i=(t,r)=>x(t,R(r)),_=(t,r)=>{for(var n in r)c(t,n,{get:r[n],enumerable:!0})},w=(t,r,n,A)=>{if(r&&typeof r=="object"||typeof r=="function")for(let P of D(r))!O.call(t,P)&&P!==n&&c(t,P,{get:()=>r[P],enumerable:!(A=g(r,P))||A.enumerable});return t},H=(t,r,n)=>(n=t!=null?f(E(t)):{},w(r||!t||!t.__esModule?c(n,"default",{value:t,enumerable:!0}):n,t)),m=t=>w(c({},"__esModule",{value:!0}),t),y={};_(y,{default:()=>a}),h.exports=m(y);var F=l(10),d=H(l(3694)),a=i(e({},(0,F.generateSimpleMutations)(d.default)),{addFeature:(t,r)=>{r&&t.features.push(r)},addFilteredFeature:(t,r)=>{r&&t.filteredFeatures.push(r)}})},3877:function(h,M,l){(function(f,c){var x=Object.create,g=Object.defineProperty,R=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,b=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,O=(d,o)=>{for(var a in o)g(d,a,{get:o[a],enumerable:!0})},j=(d,o,a,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of D(o))!E.call(d,r)&&r!==a&&g(d,r,{get:()=>o[r],enumerable:!(t=R(o,r))||t.enumerable});return d},p=(d,o,a)=>(a=d!=null?x(b(d)):{},j(o||!d||!d.__esModule?g(a,"default",{value:d,enumerable:!0}):a,d)),e=d=>j(g({},"__esModule",{value:!0}),d),i=(d,o,a)=>new Promise((t,r)=>{var n=s=>{try{P(a.next(s))}catch(u){r(u)}},A=s=>{try{P(a.throw(s))}catch(u){r(u)}},P=s=>s.done?t(s.value):Promise.resolve(s.value).then(n,A);P((a=a.apply(d,o)).next())}),_={};O(_,{default:()=>F}),h.exports=e(_);var w=p(l(60)),H=p(l(25));function m(d,o,a){const t=d.match(new RegExp(o+"(.*)"+a));return t===null?"app":t[1]}var F={requestRawLayerList({getters:d,dispatch:o}){d.layerIds.forEach(a=>i(this,null,function*(){const t=yield w.default.getLayerWhere({id:a}),r=yield o("buildAndGetRequestUrl",t);yield o("sendRequest",r)}))},sendRequest({dispatch:d},o){(0,H.default)({url:o,type:"GET",timeout:6e3}).then(a=>{d("parseFeatures",a.data)}).catch(()=>{d("Alerting/addSingleAlert",o+" "+f.t("additional:modules.tools.refugeehomes.requestAlert"),{root:!0})})},buildAndGetRequestUrl(d,o){const a="?service=WFS&request=GetFeature&version=2.0.0&typeNames=",t=o.url,r=o.featureType;return t+a+r},initURLParameter({dispatch:d,getters:o}){const a={};if(new URLSearchParams(window.location.search).forEach(function(r,n){a[n.toUpperCase()]=decodeURIComponent(r.toUpperCase())}),a?.BEZIRK){const r=o.getParameterValue({result:a,property:"BEZIRK"});let n="";n=o.hasDistrict(r),n===""?d("Alerting/addSingleAlert","<strong>"+f.t("additional:modules.tools.refugeehomes.wrongDistrictName")+"</strong><br><small>"+f.t("additional:modules.tools.refugeehomes.wrongDistrictNameMessage")+r+".</small>",{root:!0}):c.trigger("RefugeesTable","showFeaturesByBezirk",n,!0)}},parseFeatures({getters:d,dispatch:o,commit:a,rootGetters:t},r){const n=new DOMParser().parseFromString(r,"text/xml"),A=n.getElementsByTagName("wfs:member"),P=m(r,"</",":bezeichnung");let s,u,v,N;[...A].forEach(T=>{s={id:T.childNodes[1].getAttribute("gml:id")},d.featureAttributes.forEach(L=>{if(u=T.getElementsByTagName(P+":"+L)[0],typeof u<"u"){if(L==="pfad"){const C=u.innerHTML.split("|");s[L]=C}else L==="geom"?(v=T.getElementsByTagName("gml:pos")[0],N=v.innerHTML.split(" "),s[L]=[parseFloat(N[0]),parseFloat(N[1])]):s[L]=u.innerHTML;s.featureType=T.childNodes[1].localName,s.imgSrc=t.imagePath+s.featureType+".svg"}}),o("scaleImages",s),a("addFeature",s)})},scaleImages(d,o){const a=o.platzzahl;return a===0?o.imgHeight=30:a<100?o.imgHeight=20:a>=250?o.imgHeight=30:o.imgHeight=25,o}}}).call(this,l(6),l(3))},4046:function(h,M,l){var f=Object.create,c=Object.defineProperty,x=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,O=(o,a,t)=>a in o?c(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t,j=(o,a)=>{for(var t in a||(a={}))b.call(a,t)&&O(o,t,a[t]);if(R)for(var t of R(a))E.call(a,t)&&O(o,t,a[t]);return o},p=(o,a)=>{for(var t in a)c(o,t,{get:a[t],enumerable:!0})},e=(o,a,t,r)=>{if(a&&typeof a=="object"||typeof a=="function")for(let n of g(a))!b.call(o,n)&&n!==t&&c(o,n,{get:()=>a[n],enumerable:!(r=x(a,n))||r.enumerable});return o},i=(o,a,t)=>(t=o!=null?f(D(o)):{},e(a||!o||!o.__esModule?c(t,"default",{value:o,enumerable:!0}):t,o)),_=o=>e(c({},"__esModule",{value:!0}),o),w={};p(w,{default:()=>d}),h.exports=_(w);var H=i(l(3877)),m=i(l(3837)),y=i(l(3836)),F=i(l(3694)),d={namespaced:!0,state:j({},F.default),mutations:m.default,actions:H.default,getters:y.default}},4047:function(h){h.exports=JSON.parse('{"menu":{"tools":{"refugeehomes":"Fl\xFCchtlingsunterk\xFCnfte"}},"modules":{"tools":{"refugeehomes":{"title":"Fl\xFCchtlingsunterk\xFCnfte","existingAccommodations":"Bestehende Standorte","plannedAccommodations":"Geplante Standorte","symbol":"Symbol","district":"Stadtteil","description":"Bezeichnung","places":"Pl\xE4tze","notes":"Bemerkungen","attachments":"Anlagen","plan":"Plan","requestAlert":"nicht erreichbar","districtTitle":"Bezirk:","wrongDistrictName":"Der parametrisierte Aufruf des Portals ist leider fehlgeschlagen!","wrongDistrictNameMessage":"Folgender Bezirk konnte nicht gefunden werden: "}}}}')},4048:function(h){h.exports=JSON.parse('{"menu":{"tools":{"refugeehomes":"Refugee Homes"}},"modules":{"tools":{"refugeehomes":{"title":"Refugee Homes","existingAccommodations":"Existing Accommodations","plannedAccommodations":"Planned Accommodations","symbol":"Symbol","district":"District","description":"Description","places":"Places","notes":"Notes","attachments":"Attachments","plan":"Plan","requestAlert":"not available","districtTitle":"District:","wrongDistrictName":"Sorry, the parameterized call to the portal failed!","wrongDistrictNameMessage":"The following district could not be found: "}}}}')},4554:function(h,M,l){"use strict";l.r(M);var f=l(4555),c=l.n(f);for(var x in f)["default"].indexOf(x)<0&&function(g){l.d(M,g,function(){return f[g]})}(x);M.default=c.a},4555:function(h,M,l){(function(f,c){var x=Object.create,g=Object.defineProperty,R=Object.defineProperties,D=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable,i=(s,u,v)=>u in s?g(s,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):s[u]=v,_=(s,u)=>{for(var v in u||(u={}))p.call(u,v)&&i(s,v,u[v]);if(O)for(var v of O(u))e.call(u,v)&&i(s,v,u[v]);return s},w=(s,u)=>R(s,b(u)),H=(s,u)=>{for(var v in u)g(s,v,{get:u[v],enumerable:!0})},m=(s,u,v,N)=>{if(u&&typeof u=="object"||typeof u=="function")for(let T of E(u))!p.call(s,T)&&T!==v&&g(s,T,{get:()=>u[T],enumerable:!(N=D(u,T))||N.enumerable});return s},y=(s,u,v)=>(v=s!=null?x(j(s)):{},m(u||!s||!s.__esModule?g(v,"default",{value:s,enumerable:!0}):v,s)),F=s=>m(g({},"__esModule",{value:!0}),s),d={};H(d,{default:()=>P}),h.exports=F(d);var o=l(8),a=l(41),t=y(l(59)),r=y(l(3836)),n=y(l(3837)),A=l(166),P={name:"RefugeeHomes",components:{ToolTemplate:t.default},data(){return{hoverActive:!0,existingLocationActive:!0,allFeatures:null,selectedFeatures:[],districtName:"",loaded:!1}},computed:_(_(_({},(0,o.mapGetters)("Tools/RefugeeHomes",Object.keys(r.default))),(0,o.mapGetters)("Maps",["getLayers"])),(0,o.mapGetters)("MapMarker",["markerPoint"])),watch:{active(s){s||this.close()},allFeatures(s){s?this.selectedFeatures=this.sortFeatures(this.features,this.ranking):this.selectedFeatures=this.filteredFeatures[0]},existingLocationActive(s){let u;this.allFeatures?u=this.sortFeatures(this.features,this.ranking):u=this.filteredFeatures[0],s?this.selectedFeatures=u?.filter(function(v){return v.featureType.indexOf("geplant")===-1}):this.selectedFeatures=u?.filter(function(v){return v.featureType.indexOf("geplant")!==-1})},features(){this.loaded===!0&&this.initURLParameter()},filteredFeatures(){this.filteredFeatures[0]&&this.filteredFeatures[0][0]&&(this.districtName=this.filteredFeatures[0][0].bezirk)}},mounted(){this.$nextTick(()=>{f.Events.listenTo(c.channel("RefugeesTable"),{showAllFeatures:()=>{this.setActive(!0),this.loaded=!1,this.allFeatures=!0,this.$store.commit("Tools/RefugeeHomes/setFilteredFeatures",[]),this.setActive(!0),this.selectedFeatures=this.features,this.removeHighlightLayer()},showFeaturesByBezirk:(s,u=!1)=>{u===!1&&(this.$store.commit("ZoomTo/setZoomToGeometry",s,{root:!0}),this.$store.dispatch("ZoomTo/zoomToFeatures",{},{root:!0})),this.removeHighlightLayer(),this.$store.commit("Tools/RefugeeHomes/setFilteredFeatures",[]),this.allFeatures=!1,this.filterFeaturesByBezirk(s),this.setActive(!0)}}),this.loaded=!0})},beforeMount(){this.requestRawLayerList()},created(){this.$on("close",this.close)},methods:w(_(_(_({},(0,o.mapMutations)("Tools/RefugeeHomes",Object.keys(n.default))),(0,o.mapActions)("Tools/RefugeeHomes",["requestRawLayerList","initURLParameter"])),(0,o.mapActions)("Maps",["removeAllHighlightedFeatures"])),{isWebLink:A.isWebLink,removeHighlightLayer:function(){this.getLayers.forEach(s=>{s?.get("name")===void 0&&mapCollection.getMap("2D").removeLayer(s)})},filterFeaturesByBezirk:function(s){var u;let v=s;s.includes("-")&&(v=s.split("-")[1]);const N=(u=this.features)==null?void 0:u.filter(L=>{var C,S;return((C=L?.bezirk)==null?void 0:C.toUpperCase().trim())===v.toUpperCase().trim()||((S=L?.bezirk)==null?void 0:S.toUpperCase().trim())===s.toUpperCase().trim()}),T=this.sortFeatures(N,this.ranking);this.addFilteredFeature(T),this.selectedFeatures=this.filteredFeatures[0]},sortFeatures:function(s,u){const v=[];let N=[];return N=s.sort((T,L)=>T.stadtteil-L.stadtteil),u.forEach(T=>{N.forEach(L=>{L.featureType===T&&v.push(L)})}),v},toggleMarker(s){this.hoverActive&&(!Array.isArray(s)||this.lastMarker===s?(this.lastMarker=null,this.$store.dispatch("MapMarker/removePointMarker")):(this.lastMarker=s,this.$store.dispatch("MapMarker/placingPointMarker",s)))},markerControl(s,u){this.hoverActive=s,s||(this.$store.dispatch("Maps/setCenter",u),this.$store.dispatch("Maps/setZoomLevel",4))},close(){this.setActive(!1),this.$store.dispatch("Maps/resetView"),this.$store.dispatch("MapMarker/removePointMarker"),this.removeHighlightLayer();const s=(0,a.getComponent)(this.$store.state.Tools.RefugeeHomes.id);s&&s.set("isActive",!1)}})}}).call(this,l(13),l(3))},4961:function(h,M,l){var f=Object.defineProperty,c=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,R=(p,e)=>{for(var i in e)f(p,i,{get:e[i],enumerable:!0})},D=(p,e,i,_)=>{if(e&&typeof e=="object"||typeof e=="function")for(let w of x(e))!g.call(p,w)&&w!==i&&f(p,w,{get:()=>e[w],enumerable:!(_=c(e,w))||_.enumerable});return p},b=p=>D(f({},"__esModule",{value:!0}),p),E={};R(E,{render:()=>O,staticRenderFns:()=>j}),h.exports=b(E);var O=function(){var e=this,i=e._self._c;return i("ToolTemplate",{attrs:{title:e.$t(e.name),icon:e.icon,active:e.active,"render-to-window":e.renderToWindow,"resizable-window":e.resizableWindow,"deactivate-gfi":e.deactivateGFI,"initial-width":e.initialWidth},scopedSlots:e._u([{key:"toolBody",fn:function(){return[e.active?i("div",{staticClass:"container",attrs:{id:"refugeehomes"}},[e.allFeatures?i("h4",[e._v(`
                Hamburg
            `)]):i("h4",[e._v(`
                `+e._s(e.$t("additional:modules.tools.refugeehomes.districtTitle"))+" "+e._s(e.districtName)+`
            `)]),e._v(" "),i("ul",{staticClass:"nav nav-pills nav-fill"},[i("li",{staticClass:"nav-item",attrs:{role:"button",tabindex:"0"},on:{click:function(_){e.existingLocationActive=!0},keydown:function(_){e.existingLocationActive=!0}}},[i("a",{staticClass:"nav-link",class:{active:e.existingLocationActive}},[e._v(`
                        `+e._s(e.$t("additional:modules.tools.refugeehomes.existingAccommodations"))+`
                    `)])]),e._v(" "),i("li",{staticClass:"nav-item",attrs:{role:"button",tabindex:"0"},on:{click:function(_){e.existingLocationActive=!1},keydown:function(_){e.existingLocationActive=!1}}},[i("a",{staticClass:"nav-link",class:{active:!e.existingLocationActive}},[e._v(`
                        `+e._s(e.$t("additional:modules.tools.refugeehomes.plannedAccommodations"))+`
                    `)])])]),e._v(" "),i("div",{staticClass:"tab-content"},[i("div",[i("table",{staticClass:"table table-striped"},[i("thead",[i("tr",[i("th",[e._v(e._s(e.$t("additional:modules.tools.refugeehomes.symbol")))]),e._v(" "),i("th",[e._v(e._s(e.$t("additional:modules.tools.refugeehomes.district")))]),e._v(" "),i("th",[e._v(e._s(e.$t("additional:modules.tools.refugeehomes.description")))]),e._v(" "),i("th",[e._v(e._s(e.$t("additional:modules.tools.refugeehomes.places")))]),e._v(" "),i("th",[e._v(e._s(e.$t("additional:modules.tools.refugeehomes.notes")))]),e._v(" "),e.existingLocationActive===!1?i("th",[e._v(`
                                    `+e._s(e.$t("additional:modules.tools.refugeehomes.plan"))+`
                                `)]):e._e(),e._v(" "),i("th",[e._v(e._s(e.$t("additional:modules.tools.refugeehomes.attachments")))])])]),e._v(" "),e._l(e.selectedFeatures,function(_,w){return i("tbody",{key:w,attrs:{id:_.id}},[i("tr",{on:{click:function(H){return e.markerControl(!1,_.geom)},mouseover:function(H){return e.toggleMarker(_.geom)},focusin:function(H){return e.toggleMarker(_.geom)},mouseleave:function(H){return e.markerControl(!0)},focusout:function(H){return e.toggleMarker(_.geom)}}},[i("td",[i("img",{attrs:{src:_.imgSrc,height:_.imgHeight,alt:"featureimage"}})]),e._v(" "),i("td",[e._v(e._s(_.stadtteil))]),e._v(" "),i("td",[e._v(e._s(_.bezeichnung))]),e._v(" "),i("td",[e._v(e._s(_.platzzahl))]),e._v(" "),i("td",[e._v(e._s(_.bemerkung))]),e._v(" "),e.existingLocationActive===!1?i("td",[e._v(`
                                    `+e._s(_.geplante_inbetriebnahme)+`
                                `)]):e._e(),e._v(" "),e.isWebLink(_.pfad)?i("td",e._l(_.pfad,function(H,m){return i("div",{key:m},[i("a",{staticClass:"float-end",attrs:{href:_.pfad[m],target:"_blank"}},[e._v(`
                                            `+e._s(e.$t("additional:modules.tools.refugeehomes.attachments"))+" "+e._s(m+1)+`
                                        `)]),e._v(" "),m>0?i("br"):e._e()])}),0):e._e()])])})],2)])])]):e._e()]},proxy:!0}])})},j=[];O._withStripped=!0},4962:function(h,M,l){},5676:function(h,M,l){"use strict";l.r(M);var f=l(5677),c=l(4554);for(var x in c)["default"].indexOf(x)<0&&function(b){l.d(M,b,function(){return c[b]})}(x);var g=l(5678),R=l(1),D=Object(R.a)(c.default,f.render,f.staticRenderFns,!1,null,"3727ae72",null);M.default=D.exports},5677:function(h,M,l){"use strict";var f=l(4961),c=l.n(f);l.o(f,"render")&&l.d(M,"render",function(){return f.render}),l.o(f,"staticRenderFns")&&l.d(M,"staticRenderFns",function(){return f.staticRenderFns})},5678:function(h,M,l){"use strict";var f=l(4962),c=l.n(f)}}]);
