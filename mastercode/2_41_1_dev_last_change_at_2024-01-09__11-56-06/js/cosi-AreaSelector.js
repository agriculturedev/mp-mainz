(window.webpackJsonp=window.webpackJsonp||[]).push([[36,200,211,251,252,253,254,399,408,416,417,422,427,429],{207:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(p,t)=>{for(var a in t)u(p,a,{get:t[a],enumerable:!0})},L=(p,t,a,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let P of S(t))!M.call(p,P)&&P!==a&&u(p,P,{get:()=>t[P],enumerable:!(s=m(t,P))||s.enumerable});return p},h=(p,t,a)=>(a=p!=null?o(E(p)):{},L(t||!p||!p.__esModule?u(a,"default",{value:p,enumerable:!0}):a,p)),G=p=>L(u({},"__esModule",{value:!0}),p),i={};D(i,{default:()=>c}),w.exports=G(i);var e=h(r(5151)),l=h(r(3919)),_=h(r(3920)),d=h(r(3921)),c={component:e.default,store:l.default,locales:{de:_.default,en:d.default}}},3649:function(w,O,r){(function(o){var u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,M=(n,f)=>{for(var x in f)u(n,x,{get:f[x],enumerable:!0})},D=(n,f,x,g)=>{if(f&&typeof f=="object"||typeof f=="function")for(let j of S(f))!E.call(n,j)&&j!==x&&u(n,j,{get:()=>f[j],enumerable:!(g=m(f,j))||g.enumerable});return n},L=n=>D(u({},"__esModule",{value:!0}),n),h={};M(h,{addByMouseHover:()=>$,addFolder:()=>y,addModelsByAttributes:()=>a,addVectorLayer:()=>b,closeAllExpandedFolder:()=>p,getCollection:()=>s,getItemByAttributes:()=>P,getItemsByAttributes:()=>v,getModelByAttributes:()=>d,getServiceUrl:()=>e,groupBy:()=>U,offSearchbar:()=>i,onFeaturesLoaded:()=>T,onResetFeatures:()=>B,onSearchbar:()=>G,onShowAllFeatures:()=>_,onShowFeaturesById:()=>l,removeItem:()=>A,removeModelsById:()=>t,renderTree:()=>c}),w.exports=L(h);function G(n){o.on("Searchbar","hit",n)}function i(){o.off("Searchbar","hit")}function e(n){return o.request("RestReader","getServiceById",n).get("url")}function l(n){o.on("ModelList","showFeaturesById",n)}function _(n){o.on("ModelList","showAllFeatures",n)}function d(n){return o.request("ModelList","getModelByAttributes",n)}function c(){o.trigger("ModelList","renderTree")}function p(){o.trigger("ModelList","closeAllExpandedFolder")}function t(n){o.trigger("ModelList","removeModelsById",n)}function a(n){o.trigger("ModelList","addModelsByAttributes",n)}function s(){return o.request("ModelList","getCollection")}function P(n){return o.request("Parser","getItemByAttributes",n)}function v(n){return o.request("Parser","getItemsByAttributes",n)}function y(n,f,x,g){o.trigger("Parser","addFolder",n,f,x,g)}function b(n,f,x,g,j,I,N){o.trigger("Parser","addVectorLayer",n,f,x,g,j,I,N)}function A(n){o.trigger("Parser","removeItem",n)}function T(n){o.on("VectorLayer","featuresLoaded",n)}function B(n){o.on("VectorLayer","resetFeatures",n)}function $(n){o.trigger("MouseHover","add",n)}function U(n,f){return o.request("Util","groupBy",n,f)}}).call(this,r(3))},3650:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(i,e,l,_)=>{if(e&&typeof e=="object"||typeof e=="function")for(let d of S(e))!M.call(i,d)&&d!==l&&u(i,d,{get:()=>e[d],enumerable:!(_=m(e,d))||_.enumerable});return i},L=(i,e,l)=>(l=i!=null?o(E(i)):{},D(e||!i||!i.__esModule?u(l,"default",{value:i,enumerable:!0}):l,i)),h=L(r(106));function G(i){var e;if(typeof i!="object"||i===null||typeof i.getSource!="function"||typeof((e=i.getSource())==null?void 0:e.getFeatures)!="function")return console.error("utils/layer/getLayerSource: layer must be a layer with a vector source",i),null;const l=i.getSource();return l.constructor===h.default?l.getSource():l}w.exports={getLayerSource:G}},3654:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(_,d,c,p)=>{if(d&&typeof d=="object"||typeof d=="function")for(let t of S(d))!M.call(_,t)&&t!==c&&u(_,t,{get:()=>d[t],enumerable:!(p=m(d,t))||p.enumerable});return _},L=(_,d,c)=>(c=_!=null?o(E(_)):{},D(d||!_||!_.__esModule?u(c,"default",{value:_,enumerable:!0}):c,_)),h=L(r(21)),G=r(58),i=L(r(18));function e(_,d=!1,c="EPSG:25832",p="EPSG:4326"){if(!(0,i.default)(_)||!(_ instanceof h.default))return console.error("utils/features/convertToGeoJson: The first parameter must be an ol feature object, but got "+typeof _),!1;if(typeof d!="boolean")return console.error("utils/features/convertToGeoJson: The second parameter must be a boolean, but got "+typeof d),!1;if(typeof c!="string"||typeof p!="string")return console.error("utils/features/convertToGeoJson: The third and the fourth parameter must both be a string, but got "+typeof c+" and "+typeof p),!1;const t=new G.GeoJSON({dataProjection:p,featureProjection:c});return d?t.writeFeature(_):t.writeFeatureObject(_)}function l(_,d=!1,c="EPSG:25832",p="EPSG:4326"){if(!Array.isArray(_))return console.error("utils/features/convertToGeoJson: The first parameter must be an array, but got "+typeof _),!1;if(typeof d!="boolean")return console.error("utils/features/convertToGeoJson: The second parameter must be a boolean, but got "+typeof d),!1;if(typeof c!="string"||typeof p!="string")return console.error("utils/features/convertToGeoJson: The third and the fourth parameter must both be a string, but got "+typeof c+" and "+typeof p),!1;const t=new G.GeoJSON({dataProjection:p,featureProjection:c});return d?t.writeFeatures(_):t.writeFeaturesObject(_)}w.exports={featureToGeoJson:e,featuresToGeoJsonCollection:l}},3660:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(t,a,s,P)=>{if(a&&typeof a=="object"||typeof a=="function")for(let v of S(a))!M.call(t,v)&&v!==s&&u(t,v,{get:()=>a[v],enumerable:!(P=m(a,v))||P.enumerable});return t},L=(t,a,s)=>(s=t!=null?o(E(t)):{},D(a||!t||!t.__esModule?u(s,"default",{value:t,enumerable:!0}):s,t)),h=r(3650),G=L(r(316)),i=r(3649),e=L(r(318)),l=r(5);function _(t,a){t.forEachFeature(s=>{s.getGeometry()!==void 0&&!a.intersectsCoordinate((0,l.getCenter)(s.getGeometry().getExtent()))&&t.removeFeature(s)})}function d(t,a,s,P,v){const y=(0,h.getLayerSource)(t.layer),b=P.typ;y&&(y.clear(),y.getListeners("featuresloadend")&&delete y.listeners_.featuresloadend,b==="WFS"&&y.setUrl(s),b!=="VectorBase"?(y.refresh(),a&&y.on("featuresloadend",function(A){P.renderer==="webgl"&&e.afterLoading(A.target.getFeatures(),t.attributes.styleId,t.attributes.excludeTypesFromParsing,t.attributes.isPointLayer),_(A.target,a),v&&v.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource")})):(y.addFeatures(P.features),a&&(_(y,a),v&&v.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource"))))}function c(t){const a=this instanceof G.default?this:void 0,s=[...(0,i.getItemsByAttributes)({typ:"WFS",isBaseLayer:!1}),...(0,i.getItemsByAttributes)({typ:"GeoJSON",isBaseLayer:!1}),...(0,i.getItemsByAttributes)({typ:"VectorBase",isBaseLayer:!1}),...(0,i.getItemsByAttributes)({typ:"OAF",isBaseLayer:!1})];p(s,t,a)}function p(t,a,s){const P=(0,i.getCollection)(),v=s?.$store.getters["Maps/projectionCode"]||"EPSG:25832";t.forEach(function(y){const b=P.get({id:y.id});if(b){let A=`${b.attributes.url}?service=WFS&version=${b.attributes.version}&request=GetFeature&typeName=${b.attributes.featureType}&srsName=${v}`;A+=a?`&bbox=${a.getExtent().toString()},${v}`:"",b.set("bboxGeometry",a),d(b,a,A,y,s)}else y.bboxGeometry=a})}w.exports={setBBoxToGeom:c,setBboxGeometryToLayer:p}},3666:function(w,O){var r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,m=Object.prototype.hasOwnProperty,S=(G,i)=>{for(var e in i)r(G,e,{get:i[e],enumerable:!0})},E=(G,i,e,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let _ of u(i))!m.call(G,_)&&_!==e&&r(G,_,{get:()=>i[_],enumerable:!(l=o(i,_))||l.enumerable});return G},M=G=>E(r({},"__esModule",{value:!0}),G),D={};S(D,{default:()=>h}),w.exports=M(D);var h={active:!1,id:"areaSelector",name:"Manuelle Fl\xE4chenauswahl f\xFCr Fachdaten",icon:"bi-bounding-box-circles",renderToWindow:!0,resizableWindow:!1,isVisibleInMenu:!0,deactivateGFI:!1,geometry:null,readmeUrl:{"en-US":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/018gebietsauswahl.en.md","de-DE":"https://bitbucket.org/geowerkstatt-hamburg/addons/src/dev/cosi/manuals/018gebietsauswahl.md"}}},3718:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(t,a)=>{for(var s in a)u(t,s,{get:a[s],enumerable:!0})},L=(t,a,s,P)=>{if(a&&typeof a=="object"||typeof a=="function")for(let v of S(a))!M.call(t,v)&&v!==s&&u(t,v,{get:()=>a[v],enumerable:!(P=m(a,v))||P.enumerable});return t},h=(t,a,s)=>(s=t!=null?o(E(t)):{},L(a||!t||!t.__esModule?u(s,"default",{value:t,enumerable:!0}):s,t)),G=t=>L(u({},"__esModule",{value:!0}),t),i={};D(i,{getSearchResultsCoordinates:()=>c,getSearchResultsGeometry:()=>p}),w.exports=G(i);var e=h(r(12)),l=h(r(5)),_=h(r(7));function d(t){const a=t.getGeometry().getInteriorPoints();if(a.getPoints().length===1)return a.getPoints()[0].getCoordinates().slice(0,2);if(a.getPoints().length>1){const s=t.getGeometry();return l.getCenter(s.getExtent())}return null}function c(t){const a=_.default.getters["Maps/projectionCode"],s=_.default.getters["MapMarker/markerPoint"],P=_.default.getters["MapMarker/markerPolygon"];let v=s.getSource().getFeatures(),y;return v.length===1&&(y=v[0].getGeometry().getCoordinates()),v=P.getSource().getFeatures(),v.length===1&&(y=d(v[0])),y&&t&&(y=e.transform(y,a,t)),y}function p(){const t=_.default.getters["MapMarker/markerPoint"].getSource().getFeatures(),a=_.default.getters["MapMarker/markerPolygon"].getSource().getFeatures();return t.length===1?t[0].getGeometry():a.length===1?a[0].getGeometry():null}},3749:function(w,O,r){var o=Object.defineProperty,u=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,E=(_,d)=>{for(var c in d)o(_,c,{get:d[c],enumerable:!0})},M=(_,d,c,p)=>{if(d&&typeof d=="object"||typeof d=="function")for(let t of m(d))!S.call(_,t)&&t!==c&&o(_,t,{get:()=>d[t],enumerable:!(p=u(d,t))||p.enumerable});return _},D=_=>M(o({},"__esModule",{value:!0}),_),L={};E(L,{geomPickerClearDrawPolygon:()=>i,geomPickerGetFeature:()=>l,geomPickerResetLocation:()=>G,geomPickerSetGeometry:()=>e,geomPickerUnlisten:()=>h}),w.exports=D(L);function h(_){_&&(_.locationPickerActive=!1,_.unlisten())}function G(_){_&&_.resetLocation()}function i(_){_.clearDrawPolygon()}function e(_,d){_.setGeometry(d)}function l(_,d=!0){var c;const p=(c=_?.drawLayer)==null?void 0:c.getSource().getFeatures()[0];return d?p?.clone():p}},3750:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(c,p)=>{for(var t in p)u(c,t,{get:p[t],enumerable:!0})},L=(c,p,t,a)=>{if(p&&typeof p=="object"||typeof p=="function")for(let s of S(p))!M.call(c,s)&&s!==t&&u(c,s,{get:()=>p[s],enumerable:!(a=m(p,s))||a.enumerable});return c},h=(c,p,t)=>(t=c!=null?o(E(c)):{},L(p||!c||!c.__esModule?u(t,"default",{value:c,enumerable:!0}):t,c)),G=c=>L(u({},"__esModule",{value:!0}),c),i={};D(i,{default:()=>_,getOlGeomTypeByGmlType:()=>d}),w.exports=G(i);var e=h(r(44)),l=h(r(49));function _(c){return typeof c!="string"?(console.error(`Type must be a string. Got ${typeof c} instead.`),null):c.includes("gml:")?c.includes("Point")?l.default:c.includes("Polygon")?e.default:null:(console.warn(`Type must be part of GML namespace, e.g.: gml:PointPropertyType. Got ${c} instead.`),null)}function d(c){return typeof c!="string"?(console.error(`Type must be a string. Got ${typeof c} instead.`),null):c.includes("gml:")?c.includes("Point")?"Point":c.includes("Polygon")?"Polygon":null:(console.warn(`Type must be part of GML namespace, e.g.: gml:PointPropertyType. Got ${c} instead.`),null)}},3780:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,h=(s,P,v)=>P in s?u(s,P,{enumerable:!0,configurable:!0,writable:!0,value:v}):s[P]=v,G=(s,P)=>{for(var v in P||(P={}))D.call(P,v)&&h(s,v,P[v]);if(E)for(var v of E(P))L.call(P,v)&&h(s,v,P[v]);return s},i=(s,P)=>{for(var v in P)u(s,v,{get:P[v],enumerable:!0})},e=(s,P,v,y)=>{if(P&&typeof P=="object"||typeof P=="function")for(let b of S(P))!D.call(s,b)&&b!==v&&u(s,b,{get:()=>P[b],enumerable:!(y=m(P,b))||y.enumerable});return s},l=(s,P,v)=>(v=s!=null?o(M(s)):{},e(P||!s||!s.__esModule?u(v,"default",{value:s,enumerable:!0}):v,s)),_=s=>e(u({},"__esModule",{value:!0}),s),d={};i(d,{default:()=>a}),w.exports=_(d);var c=r(10),p=l(r(3666)),a=G({},(0,c.generateSimpleGetters)(p.default))},3781:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.defineProperties,S=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,i=(y,b,A)=>b in y?u(y,b,{enumerable:!0,configurable:!0,writable:!0,value:A}):y[b]=A,e=(y,b)=>{for(var A in b||(b={}))h.call(b,A)&&i(y,A,b[A]);if(D)for(var A of D(b))G.call(b,A)&&i(y,A,b[A]);return y},l=(y,b)=>m(y,E(b)),_=(y,b)=>{for(var A in b)u(y,A,{get:b[A],enumerable:!0})},d=(y,b,A,T)=>{if(b&&typeof b=="object"||typeof b=="function")for(let B of M(b))!h.call(y,B)&&B!==A&&u(y,B,{get:()=>b[B],enumerable:!(T=S(b,B))||T.enumerable});return y},c=(y,b,A)=>(A=y!=null?o(L(y)):{},d(b||!y||!y.__esModule?u(A,"default",{value:y,enumerable:!0}):A,y)),p=y=>d(u({},"__esModule",{value:!0}),y),t={};_(t,{default:()=>v}),w.exports=p(t);var a=r(10),s=c(r(3666)),v=l(e({},(0,a.generateSimpleMutations)(s.default)),{applyTranslationKey:(y,b)=>{b&&b.indexOf("translate#")>-1&&(y.name=b.substring(10))}})},3919:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,E=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(c,p)=>{for(var t in p)u(c,t,{get:p[t],enumerable:!0})},L=(c,p,t,a)=>{if(p&&typeof p=="object"||typeof p=="function")for(let s of S(p))!M.call(c,s)&&s!==t&&u(c,s,{get:()=>p[s],enumerable:!(a=m(p,s))||a.enumerable});return c},h=(c,p,t)=>(t=c!=null?o(E(c)):{},L(p||!c||!c.__esModule?u(t,"default",{value:c,enumerable:!0}):t,c)),G=c=>L(u({},"__esModule",{value:!0}),c),i={};D(i,{default:()=>d}),w.exports=G(i);var e=h(r(3780)),l=h(r(3781)),_=h(r(3666)),d={namespaced:!0,state:_.default,mutations:l.default,getters:e.default}},3920:function(w){w.exports=JSON.parse('{"modules":{"tools":{"cosi":{"areaSelector":{"title":"Manuelle Fl\xE4chenauswahl","drawPolygon":"Polygon zeichnen","info":"Ein Polygon zeichnen f\xFCr das Einrichtungen/Fachdaten geladen werden sollen.","requestInhabitants":"Einwohnerabfrage"}}}}}')},3921:function(w){w.exports=JSON.parse('{"modules":{"tools":{"cosi":{"areaSelector":{"title":"Manual Area Selection","drawPolygon":"Draw polygon","info":"Draw a polygon for which facilities and other data will be loaded.","requestInhabitants":"Request inhabitants"}}}}}')},4154:function(w,O,r){"use strict";r.r(O);var o=r(4155),u=r.n(o);for(var m in o)["default"].indexOf(m)<0&&function(S){r.d(O,S,function(){return o[S]})}(m);O.default=u.a},4155:function(w,O,r){var o=Object.defineProperty,u=Object.defineProperties,m=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,h=(t,a,s)=>a in t?o(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,G=(t,a)=>{for(var s in a||(a={}))D.call(a,s)&&h(t,s,a[s]);if(M)for(var s of M(a))L.call(a,s)&&h(t,s,a[s]);return t},i=(t,a)=>u(t,S(a)),e=(t,a)=>{for(var s in a)o(t,s,{get:a[s],enumerable:!0})},l=(t,a,s,P)=>{if(a&&typeof a=="object"||typeof a=="function")for(let v of E(a))!D.call(t,v)&&v!==s&&o(t,v,{get:()=>a[v],enumerable:!(P=m(a,v))||P.enumerable});return t},_=t=>l(o({},"__esModule",{value:!0}),t),d={};e(d,{default:()=>p}),w.exports=_(d);var c=r(8),p={name:"ToolInfo",props:{title:{type:String,default:"Werkzeuginformationen (Link \xF6ffnen)"},url:{type:[String,Object],default:null},infoText:{type:String,default:void 0},summary:{type:String,default:null},locale:{type:String,default:"de"}},methods:i(G({},(0,c.mapActions)("Alerting",["addSingleAlert","cleanup"])),{showInfo(){return this.url?window.open(this.getUrl(),"_blank"):(this.infoText&&(this.cleanup(),this.addSingleAlert({category:"Info",content:this.infoText,displayClass:"info"})),null)},getUrl(){if(typeof this.url=="string")return this.url;const t=Object.keys(this.url).find(a=>a.substring(0,a.indexOf("-"))===this.locale.substring(0,a.indexOf("-")));return this.url[t]}})}},4156:function(w,O,r){var o=Object.defineProperty,u=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,E=(i,e)=>{for(var l in e)o(i,l,{get:e[l],enumerable:!0})},M=(i,e,l,_)=>{if(e&&typeof e=="object"||typeof e=="function")for(let d of m(e))!S.call(i,d)&&d!==l&&o(i,d,{get:()=>e[d],enumerable:!(_=u(e,d))||_.enumerable});return i},D=i=>M(o({},"__esModule",{value:!0}),i),L={};E(L,{render:()=>h,staticRenderFns:()=>G}),w.exports=D(L);var h=function(){var e=this,l=e._self._c;return l("div",[l("v-row",{attrs:{dense:"",justify:"end"}},[l("v-col",{attrs:{cols:"17"}},[e.summary?l("p",[e._v(`
                `+e._s(e.summary)+`
            `)]):e._e()]),e._v(" "),l("v-col",{attrs:{cols:"1"}},[e.infoText||e.url?l("v-btn",{staticClass:"info_btn",attrs:{title:e.title,depressed:"",right:"",icon:"","x-small":""},on:{click:e.showInfo}},[l("v-icon",[e._v("mdi-help-circle")])],1):e._e()],1)],1),e._v(" "),l("v-divider")],1)},G=[];h._withStripped=!0},4157:function(w,O,r){},4162:function(w,O,r){"use strict";r.r(O);var o=r(4163),u=r(4154);for(var m in u)["default"].indexOf(m)<0&&function(D){r.d(O,D,function(){return u[D]})}(m);var S=r(4164),E=r(1),M=Object(E.a)(u.default,o.render,o.staticRenderFns,!1,null,"0f052480",null);O.default=M.exports},4163:function(w,O,r){"use strict";var o=r(4156),u=r.n(o);r.o(o,"render")&&r.d(O,"render",function(){return o.render}),r.o(o,"staticRenderFns")&&r.d(O,"staticRenderFns",function(){return o.staticRenderFns})},4164:function(w,O,r){"use strict";var o=r(4157),u=r.n(o)},4183:function(w,O,r){"use strict";r.r(O);var o=r(4184),u=r.n(o);for(var m in o)["default"].indexOf(m)<0&&function(S){r.d(O,S,function(){return o[S]})}(m);O.default=u.a},4184:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.defineProperties,S=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,i=(n,f,x)=>f in n?u(n,f,{enumerable:!0,configurable:!0,writable:!0,value:x}):n[f]=x,e=(n,f)=>{for(var x in f||(f={}))h.call(f,x)&&i(n,x,f[x]);if(D)for(var x of D(f))G.call(f,x)&&i(n,x,f[x]);return n},l=(n,f)=>m(n,E(f)),_=(n,f)=>{for(var x in f)u(n,x,{get:f[x],enumerable:!0})},d=(n,f,x,g)=>{if(f&&typeof f=="object"||typeof f=="function")for(let j of M(f))!h.call(n,j)&&j!==x&&u(n,j,{get:()=>f[j],enumerable:!(g=S(f,j))||g.enumerable});return n},c=(n,f,x)=>(x=n!=null?o(L(n)):{},d(f||!n||!n.__esModule?u(x,"default",{value:n,enumerable:!0}):x,n)),p=n=>d(u({},"__esModule",{value:!0}),n),t=(n,f,x)=>new Promise((g,j)=>{var I=C=>{try{F(x.next(C))}catch(J){j(J)}},N=C=>{try{F(x.throw(C))}catch(J){j(J)}},F=C=>C.done?g(C.value):Promise.resolve(C.value).then(I,N);F((x=x.apply(n,f)).next())}),a={};_(a,{default:()=>U}),w.exports=p(a);var s=r(8),P=c(r(317)),v=r(3750),y=c(r(21)),b=r(44),A=c(r(49)),T=r(62),B=r(3718),$=r(3649),U={name:"GeometryPicker",props:{geomField:{type:Object,required:!0},isGml:{type:Boolean,required:!1,default:!0},useIcons:{type:Boolean,required:!1,default:!0},id:{type:String,default:"geometry_picker"},additionalSelectLayerIds:{type:Array,default:()=>["importDrawLayer"]}},data(){return{geometry:{type:"",value:null},beautifyKey:P.default,locationPickerActive:!1,pickPolygonActive:!1,drawPolygonInteraction:null,drawLayer:null,polygonSelect:null,map:void 0}},computed:l(e(e({},(0,s.mapGetters)("Maps",["getLayerById","projectionCode"])),(0,s.mapGetters)("Tools/FeaturesList",["activeVectorLayerList"])),{geomCoords(){return this.geometry.value?JSON.stringify(this.geometry.value.getCoordinates()):void 0},geom(){return this.geometry.value}}),watch:{geom(n){this.$emit("updateGeometry",n)}},created(){return t(this,null,function*(){this.geomField.type&&(this.geometry.type=this.isGml?(0,v.getOlGeomTypeByGmlType)(this.geomField.type):this.geomField.type),this.map=mapCollection.getMap("2D"),yield this.createDrawingLayer()})},beforeDestroy(){this.unlisten(),this.clearDrawPolygon(),this.removePointMarker()},methods:l(e(e({},(0,s.mapActions)("MapMarker",["placingPointMarker","removePointMarker"])),(0,s.mapActions)("Maps",["addNewLayerIfNotExists"])),{createDrawingLayer(){return t(this,null,function*(){const n=yield this.addNewLayerIfNotExists({layerName:this.id+"_draw"});return n.setVisible(!0),this.drawLayer=n,n})},toggleLocationPicker(n){this.locationPickerActive=!this.locationPickerActive,this.geometry.type=this.isGml?(0,v.getOlGeomTypeByGmlType)(n):n,this.locationPickerActive?this.listen():(this.pickPolygonActive=!1,this.unlisten())},listen(){this.geometry.type==="Point"?(this.map.addEventListener("click",this.pickLocation),(0,$.onSearchbar)(this.pickLocationBySearchbar.bind(this))):this.geometry.type==="Polygon"?(this.drawPolygon(),(0,$.onSearchbar)(this.pickPolygonBySearchbar.bind(this))):this.locationPickerActive=!1},unlisten(){this.geometry.type==="Point"?this.map.removeEventListener("click",this.pickLocation):this.geometry.type==="Polygon"&&(this.map.removeInteraction(this.drawPolygonInteraction),this.map.removeInteraction(this.polygonSelect),this.drawPolygonInteraction=null,this.polygonSelect=null),(0,$.offSearchbar)()},pickLocation(n){this.geometry.value=new A.default(n.coordinate),this.placingPointMarker(n.coordinate)},resetLocation(){this.geometry.value=null,this.removePointMarker(),this.clearDrawPolygon()},pickLocationBySearchbar(){this.geometry.value=new A.default((0,B.getSearchResultsCoordinates)())},pickPolygonBySearchbar(){const n=(0,B.getSearchResultsGeometry)();n&&this.setGeometry(n)},togglePickPolygon(){this.pickPolygonActive=!this.pickPolygonActive,this.unlisten(),this.clearDrawPolygon(),this.pickPolygonActive?this.pickPolygon():this.drawPolygon()},pickPolygon(){const n=[...this.activeVectorLayerList,...this.additionalSelectLayerIds.map(f=>this.getLayerById({layerId:f}))];this.polygonSelect=new T.Select({layers:n,style:null}),this.map.addInteraction(this.polygonSelect),this.polygonSelect.on("select",this.onPolygonSelect.bind(this))},onPolygonSelect(n){const f=n.selected[0];let x=f?.getGeometry().clone(),g=x?.getType();g==="Circle"&&(x=(0,b.fromCircle)(x,64),g="Polygon"),(g==="Polygon"||g==="MultiPolygon")&&(this.geometry.value=x,this.setDrawPolygon(x),this.pickPolygonActive=!1)},drawPolygon(){this.drawPolygonInteraction=new T.Draw({source:this.drawLayer.getSource(),type:"Polygon"}),this.map.addInteraction(this.drawPolygonInteraction),this.drawPolygonInteraction.on("drawstart",this.onDrawPolygonStart.bind(this)),this.drawPolygonInteraction.on("drawend",this.onDrawPolygonEnd.bind(this))},clearDrawPolygon(){this.drawLayer.getSource().clear()},setDrawPolygon(n){this.clearDrawPolygon(),this.drawLayer.getSource().addFeature(new y.default({geometry:n}))},undoDrawPolygonStep(){this.drawPolygonInteraction.removeLastPoint()},onDrawPolygonStart(){this.clearDrawPolygon()},onDrawPolygonEnd(n){this.geometry.value=n.feature.getGeometry()},drawPolygonByCoords(n){try{const f=new b.Polygon(n);this.setDrawPolygon(f),this.geometry.value=f}catch{console.warn("GeometryPicker: The entered geometry is not a valid Polygon. Please check the List of Coordinates.")}},drawPointByCoords(n){try{this.geometry.value=new A.default(n),this.placingPointMarker(n)}catch{console.warn("GeometryPicker: The entered geometry is not a valid Point. Please check the List of Coordinates.")}},setGeomByInput(n){let f;try{f=JSON.parse(n)}catch{f=n?.split(",").map(g=>parseFloat(g))}this.geometry.type==="Point"&&this.drawPointByCoords(f),this.geometry.type==="Polygon"&&this.drawPolygonByCoords(f)},setGeometry(n){return t(this,null,function*(){const f=n?.getType(),x=n?.clone();yield this.$nextTick(),this.$set(this.geometry,"value",x),this.geometry.type==="Point"&&f==="Point"?this.placingPointMarker(x.getCoordinates()):this.geometry.type==="Polygon"&&(f==="Polygon"||f==="MultiPolygon")&&this.setDrawPolygon(x)})}})}},4208:function(w,O,r){var o=Object.defineProperty,u=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,E=(i,e)=>{for(var l in e)o(i,l,{get:e[l],enumerable:!0})},M=(i,e,l,_)=>{if(e&&typeof e=="object"||typeof e=="function")for(let d of m(e))!S.call(i,d)&&d!==l&&o(i,d,{get:()=>e[d],enumerable:!(_=u(e,d))||_.enumerable});return i},D=i=>M(o({},"__esModule",{value:!0}),i),L={};E(L,{render:()=>h,staticRenderFns:()=>G}),w.exports=D(L);var h=function(){var e=this,l=e._self._c;return l("v-row",{attrs:{dense:""}},[l("v-col",{attrs:{cols:"3"}},[l("v-subheader",{attrs:{title:e.beautifyKey(e.geomField.name)}},[e._v(`
            `+e._s(e.beautifyKey(e.geomField.name))+`
        `)])],1),e._v(" "),l("v-col",{attrs:{cols:"9"}},[l("v-text-field",{attrs:{value:e.geomCoords,name:e.geomField.name,label:e.$t("additional:modules.tools.cosi.dataTypes.geometry"),dense:""},on:{change:e.setGeomByInput},scopedSlots:e._u([{key:"append",fn:function(){return[l("v-btn",{attrs:{dense:"","x-small":"",tile:"",color:e.locationPickerActive?"warning":"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioBuilder.chooseLocation")},on:{click:function(_){return e.toggleLocationPicker(e.geomField.type)}}},[e.useIcons?l("span",[l("v-icon",[e._v("mdi-lead-pencil")])],1):l("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.chooseLocation"))+`
                    `)])]),e._v(" "),e.geometry.type==="Polygon"?l("v-btn",{attrs:{dense:"","x-small":"",tile:"",color:"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioBuilder.undo"),disabled:!e.locationPickerActive},on:{click:e.undoDrawPolygonStep}},[e.useIcons?l("span",[l("v-icon",[e._v("mdi-undo")])],1):l("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.undo"))+`
                    `)])]):e._e(),e._v(" "),e.geometry.type==="Polygon"?l("v-btn",{staticClass:"ms-1",attrs:{dense:"","x-small":"",tile:"",color:e.pickPolygonActive?"warning":"grey lighten-1",title:e.$t("additional:modules.tools.cosi.scenarioBuilder.pick"),disabled:!e.locationPickerActive},on:{click:e.togglePickPolygon}},[e.useIcons?l("span",[l("v-icon",[e._v("mdi-selection-ellipse-arrow-inside")])],1):l("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.pick"))+`
                    `)])]):e._e(),e._v(" "),l("v-btn",{staticClass:"ms-1",attrs:{dense:"","x-small":"",tile:"",color:"grey lighten-1",disabled:!e.geom,title:e.$t("additional:modules.tools.cosi.scenarioBuilder.resetLocation")},on:{click:e.resetLocation}},[e.useIcons?l("span",[l("v-icon",[e._v("mdi-delete-forever")])],1):l("span",[e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.scenarioBuilder.resetLocation"))+`
                    `)])])]},proxy:!0}])})],1)],1)},G=[];h._withStripped=!0},4255:function(w,O,r){"use strict";r.r(O);var o=r(4256),u=r(4183);for(var m in u)["default"].indexOf(m)<0&&function(M){r.d(O,M,function(){return u[M]})}(m);var S=r(1),E=Object(S.a)(u.default,o.render,o.staticRenderFns,!1,null,null,null);O.default=E.exports},4256:function(w,O,r){"use strict";var o=r(4208),u=r.n(o);r.o(o,"render")&&r.d(O,"render",function(){return o.render}),r.o(o,"staticRenderFns")&&r.d(O,"staticRenderFns",function(){return o.staticRenderFns})},4327:function(w,O,r){"use strict";r.r(O);var o=r(4328),u=r.n(o);for(var m in o)["default"].indexOf(m)<0&&function(S){r.d(O,S,function(){return o[S]})}(m);O.default=u.a},4328:function(w,O,r){var o=Object.create,u=Object.defineProperty,m=Object.defineProperties,S=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,i=(g,j,I)=>j in g?u(g,j,{enumerable:!0,configurable:!0,writable:!0,value:I}):g[j]=I,e=(g,j)=>{for(var I in j||(j={}))h.call(j,I)&&i(g,I,j[I]);if(D)for(var I of D(j))G.call(j,I)&&i(g,I,j[I]);return g},l=(g,j)=>m(g,E(j)),_=(g,j)=>{for(var I in j)u(g,I,{get:j[I],enumerable:!0})},d=(g,j,I,N)=>{if(j&&typeof j=="object"||typeof j=="function")for(let F of M(j))!h.call(g,F)&&F!==I&&u(g,F,{get:()=>j[F],enumerable:!(N=S(j,F))||N.enumerable});return g},c=(g,j,I)=>(I=g!=null?o(L(g)):{},d(j||!g||!g.__esModule?u(I,"default",{value:g,enumerable:!0}):I,g)),p=g=>d(u({},"__esModule",{value:!0}),g),t=(g,j,I)=>new Promise((N,F)=>{var C=R=>{try{k(I.next(R))}catch(W){F(W)}},J=R=>{try{k(I.throw(R))}catch(W){F(W)}},k=R=>R.done?N(R.value):Promise.resolve(R.value).then(C,J);k((I=I.apply(g,j)).next())}),a={};_(a,{default:()=>x}),w.exports=p(a);var s=c(r(59)),P=c(r(4162)),v=r(41),y=r(8),b=c(r(3780)),A=c(r(3781)),T=r(3749),B=r(3660),$=c(r(4255)),U=r(40),n=r(3654),f=c(r(21)),x={name:"AreaSelector",components:{Tool:s.default,ToolInfo:P.default,GeometryPicker:$.default},data(){return this.feature=null,this.drawingLayer=null,this.drawingStyle=new U.Style({stroke:new U.Stroke({width:3,color:[232,85,115,1],lineDash:[5,5]})}),{}},computed:l(e(e(e(e({},(0,y.mapGetters)("Tools/AreaSelector",Object.keys(b.default))),(0,y.mapGetters)("Tools/DistrictSelector",["boundingGeometry"])),(0,y.mapGetters)("Maps",["projectionCode"])),(0,y.mapGetters)("Language",["currentLocale"])),{geomField(){return{name:this.$t("additional:modules.tools.cosi.areaSelector.drawPolygon"),type:"Polygon"}}}),watch:{active(g){return t(this,null,function*(){if(g)this.feature&&(yield this.$nextTick(),(0,T.geomPickerSetGeometry)(this.$refs["geometry-picker"],this.feature.getGeometry()));else{const j=(0,v.getComponent)(this.id);j&&j.set("isActive",!1),(0,T.geomPickerUnlisten)(this.$refs["geometry-picker"])}})},geometry(g){this.feature=(0,T.geomPickerGetFeature)(this.$refs["geometry-picker"])||new f.default({geometry:g}),this.drawingLayer.getSource().clear(),this.feature&&this.drawingLayer.getSource().addFeature(this.feature),this.addNewSelection({selection:[new f.default(g)],source:this.$t("additional:modules.tools.cosi.areaSelector.title"),id:this.$t("additional:modules.tools.cosi.areaSelector.title")+" #"+new f.default(g).ol_uid}),B.setBBoxToGeom.call(this,g||this.boundingGeometry),this.setFilterGeometry(this,g||this.boundingGeometry)}},created(){this.$on("close",this.close),this.createDrawingLayer(this.id,this.drawingStyle)},methods:l(e(e(e(e(e({},(0,y.mapMutations)("Tools/AreaSelector",Object.keys(A.default))),(0,y.mapMutations)("Tools/PopulationRequest",{setPopulationRequestGeometry:"setGeometry",setPopulationRequestActive:"setActive"})),(0,y.mapMutations)("Tools/Filter",["setFilterGeometry"])),(0,y.mapActions)("Maps",["addNewLayerIfNotExists"])),(0,y.mapActions)("Tools/SelectionManager",["addNewSelection"])),{close(){this.setActive(!1)},createDrawingLayer(g,j){return t(this,null,function*(){const I=yield this.addNewLayerIfNotExists({layerName:g});I.setVisible(!0),I.setStyle(j),this.drawingLayer=I})},requestInhabitants(g){return t(this,null,function*(){const j=(0,n.featureToGeoJson)(g,!1,this.projectionCode,this.projectionCode);this.close(),yield this.$nextTick(),this.setPopulationRequestActive(!0),this.setPopulationRequestGeometry(j.geometry)})},updateGeometry(g){this.setGeometry(g),(0,T.geomPickerUnlisten)(this.$refs["geometry-picker"])}})}},4689:function(w,O,r){var o=Object.defineProperty,u=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,E=(i,e)=>{for(var l in e)o(i,l,{get:e[l],enumerable:!0})},M=(i,e,l,_)=>{if(e&&typeof e=="object"||typeof e=="function")for(let d of m(e))!S.call(i,d)&&d!==l&&o(i,d,{get:()=>e[d],enumerable:!(_=u(e,d))||_.enumerable});return i},D=i=>M(o({},"__esModule",{value:!0}),i),L={};E(L,{render:()=>h,staticRenderFns:()=>G}),w.exports=D(L);var h=function(){var e=this,l=e._self._c;return l("Tool",{attrs:{title:e.$t("additional:modules.tools.cosi.areaSelector.title"),icon:e.icon,active:e.active,"render-to-window":e.renderToWindow,"resizable-window":e.resizableWindow,"deactivate-gfi":e.deactivateGFI},scopedSlots:e._u([e.active?{key:"toolBody",fn:function(){return[l("v-app",{staticClass:"clamp-600px"},[l("ToolInfo",{attrs:{url:e.readmeUrl,locale:e.currentLocale,summary:e.$t("additional:modules.tools.cosi.areaSelector.info")}}),e._v(" "),l("div",{attrs:{id:"area-selector"}},[l("GeometryPicker",{ref:"geometry-picker",attrs:{"geom-field":e.geomField,"is-gml":!1},on:{updateGeometry:e.updateGeometry}})],1),e._v(" "),e.geometry?l("v-btn",{attrs:{dense:"",small:"",tile:"",color:"grey lighten-1"},on:{click:function(_){return e.requestInhabitants(e.feature)}}},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.areaSelector.requestInhabitants"))+`
            `)]):e._e()],1)]},proxy:!0}:null],null,!0)})},G=[];h._withStripped=!0},5151:function(w,O,r){"use strict";r.r(O);var o=r(5152),u=r(4327);for(var m in u)["default"].indexOf(m)<0&&function(M){r.d(O,M,function(){return u[M]})}(m);var S=r(1),E=Object(S.a)(u.default,o.render,o.staticRenderFns,!1,null,null,null);O.default=E.exports},5152:function(w,O,r){"use strict";var o=r(4689),u=r.n(o);r.o(o,"render")&&r.d(O,"render",function(){return o.render}),r.o(o,"staticRenderFns")&&r.d(O,"staticRenderFns",function(){return o.staticRenderFns})}}]);
