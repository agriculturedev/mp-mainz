(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{3862:function(m,y,u){var v=Object.create,f=Object.defineProperty,M=Object.defineProperties,W=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,C=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&w(e,r,t[r]);if(g)for(var r of g(t))T.call(t,r)&&w(e,r,t[r]);return e},_=(e,t)=>M(e,k(t)),U=(e,t)=>{for(var r in t)f(e,r,{get:t[r],enumerable:!0})},O=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of I(t))!h.call(e,n)&&n!==r&&f(e,n,{get:()=>t[n],enumerable:!(o=W(t,n))||o.enumerable});return e},z=(e,t,r)=>(r=e!=null?v(C(e)):{},O(t||!e||!e.__esModule?f(r,"default",{value:e,enumerable:!0}):r,e)),N=e=>O(f({},"__esModule",{value:!0}),e),p=(e,t,r)=>new Promise((o,n)=>{var a=l=>{try{c(r.next(l))}catch(P){n(P)}},i=l=>{try{c(r.throw(l))}catch(P){n(P)}},c=l=>l.done?o(l.value):Promise.resolve(l.value).then(a,i);c((r=r.apply(e,t)).next())}),b={};U(b,{default:()=>G,loadFilterPoly:()=>F,setWorker:()=>x,setWorkerFactory:()=>J}),m.exports=N(b);var A=z(u(4254)),j=u(58),D=u(1202);let s,E=()=>new A.default;function J(e){E=e}function x(e){s=e}function F(e,t,r){return p(this,null,function*(){const o=yield(0,D.getFeatureGET)(e,{version:"1.1.0",featureType:t,srsName:r}),n=new j.WFS({}),a=n.readFeatures(o,{dataProjection:r,featureProjection:"EPSG:4326"})[0];return{coords:a.getGeometry().getCoordinates(),geomType:a.getGeometry().getType()}})}function S(e,t){return p(this,null,function*(){return new Promise((r,o)=>{s.addEventListener("message",function n(a){const i=a.data;i.type==="createIsochrones"&&(i.request_canceled&&(s.removeEventListener("message",n),o(i)),i.error?(s.removeEventListener("message",n),o(i.error)):i.result?(s.removeEventListener("message",n),r(new j.GeoJSON().readFeatures(i.result))):i.progress&&t(i.progress))}),s.postMessage(d({type:"createIsochrones"},e))})})}function L(e){return p(this,null,function*(){return new Promise((t,r)=>{s.addEventListener("message",function o(n){const a=n.data;a.type==="init"&&(a.error?(s.removeEventListener("message",o),r(a.error)):a.result&&(s.removeEventListener("message",o),t()))}),s.postMessage(d({type:"init"},e))})})}var G={getIsochrones(e,t){return p(this,arguments,function*({rootGetters:r,getters:o,commit:n},a){let i;if(typeof s>"u"){if(s=E(),s.postMessage({type:"register",projections:r.namedProjections}),s.onerror=c=>{console.error(c)},o.filterPoly)yield L({coords:[o.filterPoly]});else if(o.filterUrl&&o.filterFeatureType){const{coords:c,geomType:l}=yield F(o.filterUrl,o.filterFeatureType,r["Maps/projectionCode"]);yield L({coords:c,geomType:l})}}try{i=yield S(_(d({},a),{batchSize:o.batchSize,baseUrl:o.baseUrl(o.serviceId),projectionCode:r["Maps/projectionCode"]}),c=>n("setProgress",c))}catch{i=yield S(_(d({},a),{batchSize:o.batchSize,baseUrl:o.baseUrl(),projectionCode:r["Maps/projectionCode"]}),l=>n("setProgress",l))}finally{n("setProgress",0)}return i})},getFilterPoly(){return p(this,null,function*(){if(typeof s>"u")throw Error("worker not initialized");return new Promise((e,t)=>{s.addEventListener("message",function r(o){const n=o.data;n.type==="getFilterPoly"&&(n.error?(s.removeEventListener("message",r),t(n.error)):n.result&&(s.removeEventListener("message",r),e(n.result)))}),s.postMessage({type:"getFilterPoly"})})})}}},4254:function(m,y,u){"use strict";u.r(y),u.d(y,"default",function(){return v});function v(){return new Worker(u.p+"js/isochronesWorker.worker.js")}}}]);
