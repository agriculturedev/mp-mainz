(window.webpackJsonp=window.webpackJsonp||[]).push([[14,291,292,409],{3651:function(x,I,d){var S=Object.create,y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,A=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,C=(c,p)=>{for(var e in p)y(c,e,{get:p[e],enumerable:!0})},b=(c,p,e,r)=>{if(p&&typeof p=="object"||typeof p=="function")for(let t of N(p))!M.call(c,t)&&t!==e&&y(c,t,{get:()=>p[t],enumerable:!(r=E(p,t))||r.enumerable});return c},O=(c,p,e)=>(e=c!=null?S(A(c)):{},b(p||!c||!c.__esModule?y(e,"default",{value:c,enumerable:!0}):e,c)),L=c=>b(y({},"__esModule",{value:!0}),c),m={};C(m,{default:()=>f,getAllContainingDistricts:()=>v,getContainingDistrictForExtent:()=>l,getContainingDistrictForFeature:()=>u,intersect:()=>i,union:()=>o}),x.exports=L(m);var P=O(d(4171)),F=O(d(4169)),D=d(58),w=d(5);function v(c,p,e=!1){var r;const t=[];for(const a of c)for(const n of a.districts){const s=(r=n.adminFeature)==null?void 0:r.getGeometry(),g=p.getGeometry().getExtent();if((!s||s.intersectsExtent(g))&&(t.push({districtLevel:a.label,district:n}),!e))break}return e?t:t[0]}function u(c,p,e=!0,r=!1){const t=[];for(const a of c.districts){const n=a.adminFeature.getGeometry(),s=p.getGeometry().getExtent(),g=(0,w.getCenter)(s);if(r)n.intersectsExtent(s)&&t.push(e?a:a.getName());else if(n.intersectsCoordinate(g)){t.push(e?a:a.getName());break}}return r?t:t[0]}function l(c,p,e=!0,r=!1){const t=[];for(const a of c.districts)if(a.adminFeature.getGeometry().intersectsExtent(p)&&(t.push(e?a:a.getName()),!r))break;return r?t:t[0]}function o(c,p=!1,e=!1,r="EPSG:25832",t="EPSG:4326"){const a=new D.GeoJSON({dataProjection:t,featureProjection:r}),n=a.writeFeaturesObject(c);let s=n.features[0];for(let g=1;g<n.features.length;g++)s=(0,P.default)(s,n.features[g]);return p&&(s.properties={}),e&&(s=a.readFeature(s)),s}function i(c,p=!1,e=!1,r="EPSG:25832",t="EPSG:4326"){const a=new D.GeoJSON({dataProjection:t,featureProjection:r}),n=a.writeFeaturesObject(c);let s=n.features[0];for(let g=1;g<n.features.length;g++)s=(0,F.default)(s,n.features[g]);return s&&(p&&(s.properties={}),e&&(s=a.readFeature(s))),s}var f={intersect:i,union:o,getContainingDistrictForFeature:u}},3737:function(x,I,d){var S=Object.create,y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,A=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,C=(e,r)=>{for(var t in r)y(e,t,{get:r[t],enumerable:!0})},b=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of N(r))!M.call(e,n)&&n!==t&&y(e,n,{get:()=>r[n],enumerable:!(a=E(r,n))||a.enumerable});return e},O=(e,r,t)=>(t=e!=null?S(A(e)):{},b(r||!e||!e.__esModule?y(t,"default",{value:e,enumerable:!0}):t,e)),L=e=>b(y({},"__esModule",{value:!0}),e),m=(e,r,t)=>new Promise((a,n)=>{var s=_=>{try{h(t.next(_))}catch(j){n(j)}},g=_=>{try{h(t.throw(_))}catch(j){n(j)}},h=_=>_.done?a(_.value):Promise.resolve(_.value).then(s,g);h((t=t.apply(e,r)).next())}),P={};C(P,{getAllDistrictsWithoutLayer:()=>u,getDistricts:()=>l,getLayerById:()=>o,getNameList:()=>f,getPropertyNameList:()=>c,getRawLayersById:()=>i,mapDistrictNames:()=>p,prepareDistrictLevels:()=>v}),x.exports=L(P);var F=d(4170),D=O(d(60)),w=d(3651);function v(e,r){return m(this,null,function*(){const t=u(e);t.length>0&&t.forEach((a,n)=>m(this,null,function*(){if(a.referenceLevel=n<e.length-1?e[n+1]:null,a.layer=o(r,a.layerId),a.stats.layers=i(a.stats.layerIds),a.layer.getSource().on("featuresloadend",()=>{a.districts=l(a),a.nameList=f(a.layer,a.keyOfAttrName)}),!a.propertyNameList){const s=yield c(a.stats.layers);a.propertyNameList||(a.propertyNameList=s)}}))})}function u(e){return Array.isArray(e)?e.filter(r=>typeof r.layer>"u"):(console.error(`prepareDistrictLevels.getAllDistrictsWithoutLayer: ${e} has to be defined and an array.`),[])}function l({layer:e,keyOfAttrName:r,label:t,duplicateDistrictNames:a,referenceLevel:n,layerId:s}){if(typeof e!="object"||e===null||Array.isArray(e)||typeof r!="string"||typeof t!="string")return console.error(`prepareDistrictLevels.getDistricts: ${e} has to be defined and an object. ${r} has to be defined and a string. ${t} has to be defined and a string`),[];const g=[];return e.getSource().getFeatures().forEach(function(h){g.push({adminFeature:h,statFeatures:[],originalStatFeatures:[],isSelected:!1,getId:()=>h.getId(),getLabel:()=>{const _=h.get(r);return a?.includes(_)?`${_} (${t.slice(0,-1)})`:_},getName:()=>h.get(r)&&h.get(r).indexOf("St. ")!==-1?h.get(r).replace(/ /,""):h.get(r),getReferencDistrictName:()=>n===null?null:s!=="6071"?h.get(n.keyOfAttrName):(0,w.getContainingDistrictForExtent)(n,h.getGeometry().getInteriorPoint().getExtent()).getName()})}),g}function o(e,r){if(!Array.isArray(e)||typeof r!="string"){console.error(`prepareDistrictLevels.getLayerById: ${e} has to be defined and an array. ${r} has to be defined and a string`);return}return e.find(t=>t.get("id")===r)}function i(e){if(!Array.isArray(e))return console.error(`prepareDistrictLevels.getRawLayersById: ${e} has to be defined and an array.`),[];const r=[];return e.forEach(t=>{const a=D.default.getLayerWhere({id:t});a&&r.push(a)}),r}function f(e,r){if(typeof e!="object"||e===null||Array.isArray(e)||typeof r!="string")return console.error(`prepareDistrictLevels.getNameList: ${e} has to be defined and an object. ${r} has to be defined and a string`),[];const t=[];return e.getSource().getFeatures().forEach(a=>{typeof a.get(r)<"u"&&(a.get(r).indexOf("St. ")!==-1&&a.set(r,a.get(r).replace(/ /,"")),t.push(a.get(r)))}),t.sort(),[...new Set(t)]}function c(e){return m(this,null,function*(){if(!Array.isArray(e))return console.error(`prepareDistrictLevels.getPropertyNameList: ${e} has to be defined and an array.`),[];const r=[];for(let t=0;t<e.length;t++){r[t]=[];const a=yield(0,F.describeFeatureType)(e[t].url),n=(0,F.getFeatureDescription)(a,e[t].featureType);n&&n.forEach(s=>{s.type.search("gml:")===-1&&r[t].push(s.name)})}return r})}function p(e,r){var t;return((t=r.districtNamesMap)==null?void 0:t[e])||e}},3943:function(x,I,d){var S=Object.create,y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,A=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,C=(e,r)=>{for(var t in r)y(e,t,{get:r[t],enumerable:!0})},b=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of N(r))!M.call(e,n)&&n!==t&&y(e,n,{get:()=>r[n],enumerable:!(a=E(r,n))||a.enumerable});return e},O=(e,r,t)=>(t=e!=null?S(A(e)):{},b(r||!e||!e.__esModule?y(t,"default",{value:e,enumerable:!0}):t,e)),L=e=>b(y({},"__esModule",{value:!0}),e),m=(e,r,t)=>new Promise((a,n)=>{var s=_=>{try{h(t.next(_))}catch(j){n(j)}},g=_=>{try{h(t.throw(_))}catch(j){n(j)}},h=_=>_.done?a(_.value):Promise.resolve(_.value).then(s,g);h((t=t.apply(e,r)).next())}),P={};C(P,{default:()=>p}),x.exports=L(P);var F=d(58),D=d(1202),w=d(3944),v=d(3737),u=d(1207),l=O(d(316)),o=O(d(122)),i=O(d(90)),f=d(1210),p={loadStatFeatures(e,r){return m(this,arguments,function*({dispatch:t,rootGetters:a},{districtLevel:n,districts:s,getStatFeatures:g=D.getFeaturePOST,recursive:h=!0}){t("Alerting/addSingleAlert",{content:"Datens\xE4tze werden geladen"},{root:!0}),i.default.show();const _=new F.WFS,j=n.stats.layers;for(let T=0;T<s.length;T++){if(s[T].statFeatures.length===0)for(let $=0;$<j.length;$++){const R=(0,v.mapDistrictNames)(s[T].getName(),n),B=yield g(n.stats.layers[$].url,{featureTypes:[n.stats.layers[$].featureType],srsName:a["Maps/projectionCode"],propertyNames:n.propertyNameList[$],filter:(0,u.equalTo)(n.stats.keyOfAttrName,R)}),G=_.readFeatures(B);G.length>0?(0,w.parseFeatures)(G,s[T],n):t("Alerting/addSingleAlert",{content:"Es konnten nicht alle Datens\xE4tze vollst\xE4ndig geladen werden! Bitte versuchen Sie es sp\xE4ter erneut. Sollte der Fehler weiterhin bestehen nutzen Sie bitte das Kontaktformular.",category:"Warning",cssClass:"warning"},{root:!0})}t("fetchMetaData")}if(n.referenceLevel!==null&&h){const T=n.referenceLevel,$=s.map(B=>{var G;return(G=B.statFeatures[0])==null?void 0:G.get(n.referenceLevel.stats.keyOfAttrName)}),R=T.districts.filter(B=>$.includes((0,v.mapDistrictNames)(B.getName(),T)));t("loadStatFeatures",{districts:T.label==="Hamburg"?T.districts:R,districtLevel:T,getStatFeatures:g}),i.default.hide()}else t("updateDistricts"),t("Alerting/cleanup",null,{root:!0}),i.default.hide()})},setDistrictsByName({getters:e,commit:r},{districtNames:t,fromExternal:a=!0,zoomToExtent:n=!0}){const s=e.selectedDistrictLevel.districts,g=s.filter(j=>t.includes(j.getName())),h=g.map(j=>j.adminFeature),_=new o.default(h);_.set("fromExternal",a),_.set("zoomToExtent",n),r("setSelectedDistrictsCollection",_)},getStatsByDistrict(e,r){return m(this,arguments,function*({dispatch:t},{id:a,districtLevel:n}){const s=n.districts.find(g=>g.getId()===a);return s.statFeatures.length>0||(yield t("loadStatFeatures",{districts:[s],districtLevel:n,getStatFeatures:D.getFeaturePOST,recursive:!1})),s.statFeatures})},updateDistricts(e){return m(this,arguments,function*({commit:r}){r("setLoadend",!1),yield l.default.nextTick(),r("setLoadend",!0)})},loadMapping(e){return m(this,arguments,function*({state:r,commit:t}){const a=r.mappingPath;if(a){const n=yield fetch(a),s=yield n.json();t("setMappingInit",s)}t("resetMapping")})},fetchMetaData({state:e,commit:r}){r("setRemoteMetadata",{});const t=e.selectedDistrictLevel.stats.layerIds,a=e.selectedDistrictLevel.stats.layers;for(const n in a)(0,f.getRecordById)(a[n].datasets[0].csw_url,a[n].datasets[0].md_id).then(s=>{let g="Datum Unbekannt";s.getRevisionDate()?g=s.getRevisionDate():s.getPublicationDate()?g=s.getPublicationDate():s.getCreationDate()&&(g=s.getCreateionDate());const h={Titel:s.getTitle(),Datum:g,Abstrakt:s.getAbstract()};r("addRemoteMetadata",{layerId:t[n],metadata:h})}).catch(s=>{console.warn(s)})}}},3944:function(x,I,d){var S=Object.create,y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,A=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,C=(o,i)=>{for(var f in i)y(o,f,{get:i[f],enumerable:!0})},b=(o,i,f,c)=>{if(i&&typeof i=="object"||typeof i=="function")for(let p of N(i))!M.call(o,p)&&p!==f&&y(o,p,{get:()=>i[p],enumerable:!(c=E(i,p))||c.enumerable});return o},O=(o,i,f)=>(f=o!=null?S(A(o)):{},b(i||!o||!o.__esModule?y(f,"default",{value:o,enumerable:!0}):f,o)),L=o=>b(y({},"__esModule",{value:!0}),o),m={};C(m,{createStatFeaturesFromLTF:()=>v,findMappingObjectByCategory:()=>l,parseFeatures:()=>D,prepareStatsFeatures:()=>w,updateStatFeaturesFromLTF:()=>u}),x.exports=L(m);var P=O(d(4176)),F=O(d(21));function D(o,i,f){if(o.every(c=>c.get("jahr")&&c.get("jahr_timestamp")))if(i.statFeatures.length>0)u(o,i.statFeatures);else{const c=v(o,f,i);i.statFeatures.push(...c),i.originalStatFeatures.push(...c.map(p=>p.clone()))}else o.forEach(w),i.statFeatures.push(...o),i.originalStatFeatures=o.map(c=>c.clone())}function w(o){const i=l(o.get("kategorie"));o.unset("geom"),typeof i<"u"&&(o.set("kategorie",i.value),o.set("group",i.group))}function v(o,i){const f=[];return P.default.forEach(c=>{const p=new F.default({kategorie:c.value,group:c.group});p.set(i.stats.keyOfAttrName,o[0].get(i.stats.keyOfAttrName)),i.referenceLevel&&p.set(i.referenceLevel.stats.keyOfAttrName,o[0].get(i.referenceLevel.stats.keyOfAttrName)),o.forEach(e=>{p.set("jahr_"+e.get("jahr"),e.get(c.category))}),f.push(p)}),f}function u(o,i){const f=Object.keys(o[0].getProperties());P.default.forEach((c,p)=>{f.includes(c.category)&&o.forEach(e=>{i[p].set("jahr_"+e.get("jahr"),e.get(c.category))})})}function l(o){if(typeof o!="string"){console.error(`prepareStatFeatures.findMappingObjectByCategory: ${o} has to be defined and a string.`);return}return P.default.find(i=>i.category===o)}},4169:function(x,I,d){var S=Object.create,y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,A=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,C=(v,u)=>{for(var l in u)y(v,l,{get:u[l],enumerable:!0})},b=(v,u,l,o)=>{if(u&&typeof u=="object"||typeof u=="function")for(let i of N(u))!M.call(v,i)&&i!==l&&y(v,i,{get:()=>u[i],enumerable:!(o=E(u,i))||o.enumerable});return v},O=(v,u,l)=>(l=v!=null?S(A(v)):{},b(u||!v||!v.__esModule?y(l,"default",{value:v,enumerable:!0}):l,v)),L=v=>b(y({},"__esModule",{value:!0}),v),m={};C(m,{default:()=>w}),x.exports=L(m);var P=d(4158),F=d(4168),D=O(d(4185));function w(v,u,l){l===void 0&&(l={});var o=(0,F.getGeom)(v),i=(0,F.getGeom)(u),f=D.default.intersection(o.coordinates,i.coordinates);return f.length===0?null:f.length===1?(0,P.polygon)(f[0],l.properties):(0,P.multiPolygon)(f,l.properties)}},4170:function(x,I,d){var S=Object.create,y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,A=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,C=(u,l)=>{for(var o in l)y(u,o,{get:l[o],enumerable:!0})},b=(u,l,o,i)=>{if(l&&typeof l=="object"||typeof l=="function")for(let f of N(l))!M.call(u,f)&&f!==o&&y(u,f,{get:()=>l[f],enumerable:!(i=E(l,f))||i.enumerable});return u},O=(u,l,o)=>(o=u!=null?S(A(u)):{},b(l||!u||!u.__esModule?y(o,"default",{value:u,enumerable:!0}):o,u)),L=u=>b(y({},"__esModule",{value:!0}),u),m={};C(m,{describeFeatureType:()=>w,getFeatureDescription:()=>v}),x.exports=L(m);var P=O(d(25)),F=O(d(1203)),D=O(d(1206));function w(u,l="1.1.0",o=void 0){if(typeof u!="string"){console.error(`api/wfs/describeFeatureType: Url is ${u}. Url has to be defined and a string.`);return}if(typeof l!="string"){console.error(`api/wfs/describeFeatureType: Version is ${l}. Version has to be a string. Default is 1.1.0.`);return}const i={params:{service:"WFS",request:"DescribeFeatureType",version:l,typeName:Array.isArray(o)?o.join(","):o,typeNames:Array.isArray(o)?o.join(","):o}};return P.default.get(u,i).then(f=>(0,F.default)(f.request.responseXML)).catch(f=>D.default.handleAxiosError(f,"api/wfs/describeFeatureType"))}function v(u,l){var o,i,f,c,p,e,r,t;if(typeof u!="object"||u===null||typeof l!="string"){console.error(`getFeatureDescription: ${u} has to be defined and an object (not null). ${l} has to be defined and a string`);return}const a=[],n=Array.isArray((o=u?.schema)==null?void 0:o.element)?(f=(i=u?.schema)==null?void 0:i.element)==null?void 0:f.find(s=>{var g;return((g=s.attributes)==null?void 0:g.name)===l}):(c=u?.schema)==null?void 0:c.element;if(typeof n>"u"){console.error(`getFeatureDescription: FeatureType "${n}" was not found`);return}if(!Array.isArray((t=(r=(e=(p=n.complexType)==null?void 0:p.complexContent)==null?void 0:e.extension)==null?void 0:r.sequence)==null?void 0:t.element)){console.error(`getFeatureDescription: No attributes were found for the FeatureType "${n}"`);return}return n.complexType.complexContent.extension.sequence.element.forEach(s=>{a.push(s.getAttributes())}),a}}}]);
