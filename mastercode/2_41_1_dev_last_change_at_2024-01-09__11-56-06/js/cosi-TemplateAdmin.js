(window.webpackJsonp=window.webpackJsonp||[]).push([[59,158,159,363,364,365,366],{224:function(g,p,t){var o=Object.create,n=Object.defineProperty,y=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,C=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,D=(P,x)=>{for(var N in x)n(P,N,{get:x[N],enumerable:!0})},E=(P,x,N,_)=>{if(x&&typeof x=="object"||typeof x=="function")for(let u of O(x))!S.call(P,u)&&u!==N&&n(P,u,{get:()=>x[u],enumerable:!(_=y(x,u))||_.enumerable});return P},b=(P,x,N)=>(N=P!=null?o(C(P)):{},E(x||!P||!P.__esModule?n(N,"default",{value:P,enumerable:!0}):N,P)),T=P=>E(n({},"__esModule",{value:!0}),P),d={};D(d,{default:()=>j}),g.exports=T(d);var e=b(t(5482)),a=b(t(3988)),s=b(t(3989)),h=b(t(3990)),j={component:e.default,store:a.default,locales:{de:s.default,en:h.default}}},3683:function(g,p){var t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,y=Object.prototype.hasOwnProperty,O=(T,d)=>{for(var e in d)t(T,e,{get:d[e],enumerable:!0})},C=(T,d,e,a)=>{if(d&&typeof d=="object"||typeof d=="function")for(let s of n(d))!y.call(T,s)&&s!==e&&t(T,s,{get:()=>d[s],enumerable:!(a=o(d,s))||a.enumerable});return T},S=T=>C(t({},"__esModule",{value:!0}),T),D={};O(D,{default:()=>b}),g.exports=S(D);var b={active:!1,id:"TemplateAdmin",name:"additional:modules.tools.cosi.TemplateAdmin.title",icon:"bi-folder2-open",renderToWindow:!0,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!0,ignorePropertyNames:[],importedTemplateNames:[],savedTemplateContents:[],selectedTemplate:void 0,labelOfOrientationValue:"additional:modules.tools.cosi.TemplateAdmin.label.existingAreas"}},3761:function(g,p,t){var o=Object.create,n=Object.defineProperty,y=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,C=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,b=(_,u,f)=>u in _?n(_,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):_[u]=f,T=(_,u)=>{for(var f in u||(u={}))D.call(u,f)&&b(_,f,u[f]);if(C)for(var f of C(u))E.call(u,f)&&b(_,f,u[f]);return _},d=(_,u)=>{for(var f in u)n(_,f,{get:u[f],enumerable:!0})},e=(_,u,f,L)=>{if(u&&typeof u=="object"||typeof u=="function")for(let V of O(u))!D.call(_,V)&&V!==f&&n(_,V,{get:()=>u[V],enumerable:!(L=y(u,V))||L.enumerable});return _},a=(_,u,f)=>(f=_!=null?o(S(_)):{},e(u||!_||!_.__esModule?n(f,"default",{value:_,enumerable:!0}):f,_)),s=_=>e(n({},"__esModule",{value:!0}),_),h={};d(h,{default:()=>N}),g.exports=s(h);var j=t(10),P=a(t(3683)),N=T({},(0,j.generateSimpleGetters)(P.default))},3814:function(g,p,t){var o=Object.create,n=Object.defineProperty,y=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,C=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,b=(_,u,f)=>u in _?n(_,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):_[u]=f,T=(_,u)=>{for(var f in u||(u={}))D.call(u,f)&&b(_,f,u[f]);if(C)for(var f of C(u))E.call(u,f)&&b(_,f,u[f]);return _},d=(_,u)=>{for(var f in u)n(_,f,{get:u[f],enumerable:!0})},e=(_,u,f,L)=>{if(u&&typeof u=="object"||typeof u=="function")for(let V of O(u))!D.call(_,V)&&V!==f&&n(_,V,{get:()=>u[V],enumerable:!(L=y(u,V))||L.enumerable});return _},a=(_,u,f)=>(f=_!=null?o(S(_)):{},e(u||!_||!_.__esModule?n(f,"default",{value:_,enumerable:!0}):f,_)),s=_=>e(n({},"__esModule",{value:!0}),_),h={};d(h,{default:()=>N}),g.exports=s(h);var j=t(10),P=a(t(3683)),N=T({},(0,j.generateSimpleMutations)(P.default))},3988:function(g,p,t){var o=Object.create,n=Object.defineProperty,y=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,C=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,D=(j,P)=>{for(var x in P)n(j,x,{get:P[x],enumerable:!0})},E=(j,P,x,N)=>{if(P&&typeof P=="object"||typeof P=="function")for(let _ of O(P))!S.call(j,_)&&_!==x&&n(j,_,{get:()=>P[_],enumerable:!(N=y(P,_))||N.enumerable});return j},b=(j,P,x)=>(x=j!=null?o(C(j)):{},E(P||!j||!j.__esModule?n(x,"default",{value:j,enumerable:!0}):x,j)),T=j=>E(n({},"__esModule",{value:!0}),j),d={};D(d,{default:()=>h}),g.exports=T(d);var e=b(t(3683)),a=b(t(3761)),s=b(t(3814)),h={namespaced:!0,state:e.default,getters:a.default,mutations:s.default}},3989:function(g){g.exports=JSON.parse('{"modules":{"tools":{"cosi":{"templateAdmin":{"title":"Vorlagen Admin","description":"Erstellen Sie beliebige Vorlagen f\xFCr fachspezifische Analysen. In eine Vorlage k\xF6nnen Sie Geodaten, Statistische Daten und erste Werkzeuge konfigurieren. Statistische Daten k\xF6nnen Sie zudem mit Orientierungswerten versehen, die Ihnen im Dashboard angezeigt werden. Nach der Erstellung k\xF6nnen Sie ihre Vorlage exportieren und  im Werkzeug \u201EVorlagen\u201C hoch laden.","button":{"addTemplate":"Vorlage erstellen","editTemplate":"Vorlage bearbeiten","uploadTemplate":"Vorlage importieren","downloadTemplate":"Exportieren","showMore":"mehr anzeigen...","showLess":"weniger anzeigen..."},"label":{"selectTemplate":"Vorlage ausw\xE4hlen","name":"Name","description":"Beschreibung","addGeoData":"Geodaten hinzuf\xFCgen","addStatisticalData":"Statistische Daten hinzuf\xFCgen","addTools":"Starter Werkzeug hinzuf\xFCgen","placeholder":"Daten ausw\xE4hlen","existingAreas":"Bestehende Gebiete mit SozErhVO","supportedFormats":"unterst\xFCtzes Datei-Format: JSON"},"errors":{"wrongFormat":"Die Datei hat nicht das richtige Format.","templateName":"Eine Vorlage mit dem Namen: ","isLoaded":"ist bereits geladen."},"required":"Pflichtfelder","hintName":"Bitte geben Sie einen Namen f\xFCr die Vorlage an.","hintStatisticData":"Bitte f\xFCgen Sie statistische Daten hinzu.","hintNumber":"nur Zahlen: 0-9"}}}}}')},3990:function(g){g.exports=JSON.parse('{"modules":{"tools":{"cosi":{"templateAdmin":{"title":"Template Admin","description":"Create templates for subject-specific analyses. You can configure geodata, statistical data and initial tools in a template. You can also add orientation values to statistical data, which are displayed in the dashboard. Once created, you can export your template and upload it in the \\"Templates\\" tool.","button":{"addTemplate":"Add Template","editTemplate":"Edit Template","uploadTemplate":"Import Template","downloadTemplate":"Download Template","showMore":"show more...","showLess":"show less..."},"label":{"selectTemplate":"Select Template","name":"Name","description":"Description","addGeoData":"Add Geo Data","addStatisticalData":"Add statistical data","addTools":"Add starting Tool","placeholder":"Select Option","existingAreas":"existing areas with SozErhVO","supportedFormats":"supported Formats: JSON"},"errors":{"wrongFormat":"The file is not in the correct format.","templateName":"A template with the name: ","isLoaded":"is already loaded."},"required":"Required","hintName":"Please specify a name for the template.","hintStatisticData":"Please add statistical data.","hintNumber":"only contain numbers: 0-9"}}}}}')},4438:function(g,p,t){"use strict";t.r(p);var o=t(4439),n=t.n(o);for(var y in o)["default"].indexOf(y)<0&&function(O){t.d(p,O,function(){return o[O]})}(y);p.default=n.a},4439:function(g,p,t){(function(o,n){var y=Object.create,O=Object.defineProperty,C=Object.defineProperties,S=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,T=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable,a=(i,m,v)=>m in i?O(i,m,{enumerable:!0,configurable:!0,writable:!0,value:v}):i[m]=v,s=(i,m)=>{for(var v in m||(m={}))d.call(m,v)&&a(i,v,m[v]);if(b)for(var v of b(m))e.call(m,v)&&a(i,v,m[v]);return i},h=(i,m)=>C(i,D(m)),j=(i,m)=>{for(var v in m)O(i,v,{get:m[v],enumerable:!0})},P=(i,m,v,M)=>{if(m&&typeof m=="object"||typeof m=="function")for(let w of E(m))!d.call(i,w)&&w!==v&&O(i,w,{get:()=>m[w],enumerable:!(M=S(m,w))||M.enumerable});return i},x=(i,m,v)=>(v=i!=null?y(T(i)):{},P(m||!i||!i.__esModule?O(v,"default",{value:i,enumerable:!0}):v,i)),N=i=>P(O({},"__esModule",{value:!0}),i),_={};j(_,{default:()=>A}),g.exports=N(_);var u=x(t(59)),f=t(8),L=x(t(3761)),V=x(t(3814)),$=t(41),B=x(t(5484)),l=x(t(18)),r=t(1214),c=x(t(4176)),A={name:"TemplateAdmin",components:{ToolTemplate:u.default,TemplateAdminForm:B.default},data(){return{dataOptions:[],statOptions:[],currentTab:"#add-template-tab"}},computed:s(s(s(s({},(0,f.mapGetters)("Tools/TemplateAdmin",Object.keys(L.default))),(0,f.mapGetters)("Tools/DistrictSelector",["selectedDistrictLevel","selectedDistrictLevelId","selectedDistrictsCollection","selectedDistrictNames"])),(0,f.mapGetters)("Tools",["getConfiguredToolNames"])),(0,f.mapState)(["Tools"])),watch:{active(i){var m;if(i){const v=this.getFilteredPropertyNames((m=this.selectedDistrictLevel)==null?void 0:m.propertyNameList,this.ignorePropertyNames),M=o.request("Parser","getItemsByAttributes",{type:"layer"});this.statOptions=this.getMappedLabelByValue(v,c.default),this.dataOptions=this.getLayerNames(M)}}},created(){this.$on("close",this.close);const i=["TemplateAdmin","TemplateManager"];this.toolOptions=this.getToolList(this.Tools,Array.isArray(this.getConfiguredToolNames)?this.getConfiguredToolNames.filter(m=>!i.includes(m)):[])},methods:h(s({},(0,f.mapMutations)("Tools/TemplateAdmin",Object.keys(V.default))),{close(){this.setActive(!1);const i=(0,$.getComponent)(this.id);i&&i.set("isActive",!1)},getToolList(i,m){if(!(0,l.default)(i)||!Array.isArray(m))return[];let v=[];return Object.entries(i).forEach(([M,w])=>{typeof w.name<"u"&&w.isVisibleInMenu!==!1&&m.includes(M)&&v.push({toolId:M,label:n.t(w.name)})}),v=(0,r.sort)("",v,"label"),v},getFilteredPropertyNames(i,m){if(!Array.isArray(i)||!Array.isArray(m))return[];const v=[];return i.forEach(M=>{if(!Array.isArray(M))return;const w=M.filter(F=>!m.includes(F));v.push(w)}),v},getMappedLabelByValue(i,m){if(!Array.isArray(i)||!Array.isArray(m))return[];let v=[];return i.forEach(M=>{Array.isArray(M)&&M.forEach(w=>{const F=m.find(R=>R?.category===w);if(!(0,l.default)(F)||!Object.prototype.hasOwnProperty.call(F,"value")){v.push({propertyName:w,label:w,valueType:F?.valueType||!1});return}v.push({propertyName:w,label:F.value,valueType:F.valueType||!1})})}),v=(0,r.sort)("",v,"label"),v},getLayerNames(i){let m=[];return Array.isArray(i)?(i.forEach(v=>{typeof v?.name<"u"&&v.isNeverVisibleInTree!==!0&&m.push({layerId:v.id,label:v.name})}),m=(0,r.sort)("",m,"label"),m):[]}})}}).call(this,t(3),t(6))},4440:function(g,p,t){"use strict";t.r(p);var o=t(4441),n=t.n(o);for(var y in o)["default"].indexOf(y)<0&&function(O){t.d(p,O,function(){return o[O]})}(y);p.default=n.a},4441:function(g,p,t){var o=Object.create,n=Object.defineProperty,y=Object.defineProperties,O=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,E=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,d=(l,r,c)=>r in l?n(l,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[r]=c,e=(l,r)=>{for(var c in r||(r={}))b.call(r,c)&&d(l,c,r[c]);if(D)for(var c of D(r))T.call(r,c)&&d(l,c,r[c]);return l},a=(l,r)=>y(l,C(r)),s=(l,r)=>{for(var c in r)n(l,c,{get:r[c],enumerable:!0})},h=(l,r,c,A)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of S(r))!b.call(l,i)&&i!==c&&n(l,i,{get:()=>r[i],enumerable:!(A=O(r,i))||A.enumerable});return l},j=(l,r,c)=>(c=l!=null?o(E(l)):{},h(r||!l||!l.__esModule?n(c,"default",{value:l,enumerable:!0}):c,l)),P=l=>h(n({},"__esModule",{value:!0}),l),x={};s(x,{default:()=>B}),g.exports=P(x);var N=j(t(2093)),_=j(t(5486)),u=j(t(3761)),f=j(t(53)),L=j(t(5489)),V=t(8),$=j(t(18)),B={name:"TemplateAdminForm",components:{Multiselect:N.default,TemplateAdminFormCard:_.default,Draggable:L.default},props:{geoData:{type:Array,required:!0},statData:{type:Array,required:!0},toolData:{type:Array,required:!1,default:()=>[]},showEditTemplate:{type:Boolean,required:!1,default:!1}},data(){return{templateName:"",templateDes:"",selectedGeoData:[],selectedStatData:[],selectedToolData:[],isNameValidating:!1,isStatDataValidating:!1,isValidated:!1,limitReferenceValues:!1,referenceValueList:[],importedReferenceValueList:[]}},computed:a(e({},(0,V.mapGetters)("Tools/TemplateAdmin",Object.keys(u.default))),{countSelectedStatistics(){return this.selectedStatData.length>2},uploadedTemplates(){return this.importedTemplateNames}}),watch:{selectedStatData(l){const r=l.map(c=>c.label);this.referenceValueList=this.referenceValueList.filter(c=>r.includes(c?.statisticName))},selectedTemplate(l){this.showEditTemplate&&this.changeSelectedTemplate(l)}},mounted(){this.showEditTemplate&&this.selectedTemplate!==void 0&&this.changeSelectedTemplate(this.selectedTemplate)},methods:a(e(e({},(0,V.mapActions)("Alerting",["addSingleAlert"])),(0,V.mapMutations)("Tools/TemplateAdmin",["setSelectedTemplate"])),{changeSelectedTemplate(l){!Array.isArray(this.savedTemplateContents)||typeof l!="string"||!(0,$.default)(this.savedTemplateContents[l])||this.loadingTemplate(this.savedTemplateContents[l])},removeGeoData(l){this.selectedGeoData=this.selectedGeoData.filter(r=>r?.layerId!==l)},removeStatData(l){this.selectedStatData=this.selectedStatData.filter(r=>r?.propertyName!==l)},validateForm(){if(this.setIsNameValidating(!0),this.setIsStatDataValidating(!0),this.templateName!==""&&this.selectedStatData.length?this.isValidated=!0:this.isValidated=!1,this.templateName!==""&&this.setIsNameValidating(!1),this.selectedStatData.length&&this.setIsStatDataValidating(!1),this.isValidated){const l=this.getExportedData(this.templateName,this.templateDes,this.selectedGeoData,this.selectedStatData,this.selectedToolData,this.referenceValueList);this.exportFile(this.templateName,l)}},getExportedData(l,r,c,A,i,m){const v=(0,f.default)(new Date).format("DD.MM.YYYY, HH:mm:ss"),M=(0,f.default)(new Date).format("YYYY-MM-DD, HH:mm:ss").replace(", ","T")+".174Z",w=c.map(I=>I.layerId),F=i?.toolId,R=A.map(I=>I.label);return{meta:{title:l,info:r,created:v,date:M,icon:"mdi-filter"},state:{Maps:{layerIds:w},Tools:{toolToOpen:F,Dashboard:{statsFeatureFilter:R,orientationValues:m}}}}},exportFile(l,r){const c=l+".json",A=JSON.stringify(r),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(A)),i.setAttribute("download",c),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},setIsNameValidating(l){this.isNameValidating=l},setIsStatDataValidating(l){this.isStatDataValidating=l},setReferenceValueList(l){this.referenceValueList=this.referenceValueList.filter(r=>r.statisticName!==l.statisticName),l.value!==""&&this.referenceValueList.push(l),this.importedReferenceValueList=this.referenceValueList},importTemplate(l){var r,c,A;!Array.isArray(Object.keys((r=l?.target)==null?void 0:r.files))||!Object.keys((c=l?.target)==null?void 0:c.files).length||(this.prepareTemplate((A=l?.target)==null?void 0:A.files),this.$refs.form.reset())},prepareTemplate(l){!(l instanceof FileList)||Object.values(l).length===0||Object.values(l).forEach(r=>{this.handleFile(r)})},handleFile(l){if(!(l instanceof File))return;const r=l?.name?l.name:"",c=r!==""?r.substring(r.length-4,r.length):"undefined",A=new FileReader;if(r===""){console.warn("The file is corrupt.");return}if(c!=="json"){this.addSingleAlert({content:`${this.$t("additional:modules.tools.cosi.templateAdmin.errors.wrongFormat")}`,category:"Warning",displayClass:"warning"});return}A.readAsText(l),A.onload=i=>{const m=this.parseResult(i);m!==null&&this.addTemplate(m)},A.onerror=i=>console.error(i)},parseResult(l){var r,c;let A=null;try{A=JSON.parse((r=l?.target)==null?void 0:r.result)}catch(i){console.warn('jsonParse failed: could not parse"'+((c=l?.target)==null?void 0:c.result)+'" to JSON: '+i)}return A},addTemplate(l){var r,c,A,i,m,v;typeof this.getTemplateText((r=l.meta)==null?void 0:r.title)!="string"||this.getTemplateText((c=l.meta)==null?void 0:c.title).length===0||(this.importedTemplateNames.includes(this.getTemplateText((A=l.meta)==null?void 0:A.title))?this.addSingleAlert({content:`${this.$t("additional:modules.tools.cosi.templateAdmin.errors.templateName")} ${(v=l.meta)==null?void 0:v.title} ${this.$t("additional:modules.tools.cosi.templateAdmin.errors.isLoaded")}`,category:"Warning",displayClass:"warning"}):(this.importedTemplateNames.push(this.getTemplateText((i=l.meta)==null?void 0:i.title)),this.savedTemplateContents[this.getTemplateText((m=l.meta)==null?void 0:m.title)]=l,this.loadingTemplate(l)))},loadingTemplate(l){var r,c,A,i,m,v,M,w,F,R,I,U;(0,$.default)(l)&&(this.setSelectedTemplate(this.getTemplateText((r=l.meta)==null?void 0:r.title)),this.templateName=this.getTemplateText((c=l.meta)==null?void 0:c.title),this.templateDes=this.getTemplateText((A=l.meta)==null?void 0:A.info),this.selectedGeoData=this.getSelectedGeoData((m=(i=l.state)==null?void 0:i.Maps)==null?void 0:m.layerIds),this.selectedStatData=this.getSelectedStatData((M=(v=l.state)==null?void 0:v.Tools)==null?void 0:M.Dashboard),this.selectedToolData=this.getSelectedToolData((F=(w=l.state)==null?void 0:w.Tools)==null?void 0:F.toolToOpen),this.importedReferenceValueList=this.getImportedReferenceValueList((U=(I=(R=l.state)==null?void 0:R.Tools)==null?void 0:I.Dashboard)==null?void 0:U.orientationValues),this.referenceValueList=this.importedReferenceValueList)},getTemplateText(l){return typeof l=="string"?l:""},getSelectedGeoData(l){const r=[];return Array.isArray(l)&&l.forEach(c=>{r.push(this.geoData.find(A=>A?.layerId===c))}),r},getSelectedStatData(l){const r=[];return Array.isArray(l?.statsFeatureFilter)&&l.statsFeatureFilter.forEach(c=>{r.push(this.statData.find(A=>A?.label===c))}),r},getSelectedToolData(l){return typeof l=="string"?this.toolData.find(r=>r?.toolId===l):[]},getImportedReferenceValueList(l){return Array.isArray(l)?l:[]},getReferenceValue(l,r){var c;return typeof l!="string"||!Array.isArray(r)||!r.length?"":(c=r.find(A=>A?.statisticName===l))==null?void 0:c.value},showUnit(l){return l==="relative"?"%":!1}})}},4442:function(g,p,t){"use strict";t.r(p);var o=t(4443),n=t.n(o);for(var y in o)["default"].indexOf(y)<0&&function(O){t.d(p,O,function(){return o[O]})}(y);p.default=n.a},4443:function(g,p){var t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,y=Object.prototype.hasOwnProperty,O=(b,T)=>{for(var d in T)t(b,d,{get:T[d],enumerable:!0})},C=(b,T,d,e)=>{if(T&&typeof T=="object"||typeof T=="function")for(let a of n(T))!y.call(b,a)&&a!==d&&t(b,a,{get:()=>T[a],enumerable:!(e=o(T,a))||e.enumerable});return b},S=b=>C(t({},"__esModule",{value:!0}),b),D={};O(D,{default:()=>E}),g.exports=S(D);var E={name:"TemplateAdminFormCard",components:{},props:{title:{type:String,required:!0},label:{type:String,required:!0},originReferenceValue:{type:String,required:!1,default:""},importedReferenceValue:{type:String,required:!1,default:""},unit:{type:[String,Boolean],required:!1,default:!1}},data(){return{referenceValue:""}},watch:{referenceValue(){this.emitSetReferenceValue()},originReferenceValue(b){this.referenceValue=b}},mounted(){this.referenceValue=typeof this.importedReferenceValue<"u"?this.importedReferenceValue:""},methods:{emitSetReferenceValue(){this.$emit("setReferenceValueList",{statisticName:this.title,value:this.referenceValue})},checkNumber(b){const T=String.fromCharCode(b.keyCode);return/^\d*,?\d*-?\d{0,2}$/.test(T)?!0:(b.preventDefault(),!1)},checkComma(){this.referenceValue=this.referenceValue.replace(/^[,\s]+|[,\s]+$/g,"").replace(/,[,\s]*,/g,",")}}}},4846:function(g,p,t){var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,O=Object.prototype.hasOwnProperty,C=(d,e)=>{for(var a in e)o(d,a,{get:e[a],enumerable:!0})},S=(d,e,a,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let h of y(e))!O.call(d,h)&&h!==a&&o(d,h,{get:()=>e[h],enumerable:!(s=n(e,h))||s.enumerable});return d},D=d=>S(o({},"__esModule",{value:!0}),d),E={};C(E,{render:()=>b,staticRenderFns:()=>T}),g.exports=D(E);var b=function(){var e=this,a=e._self._c;return a("ToolTemplate",{staticClass:"template-admin",attrs:{title:e.$t(e.name),icon:e.icon,active:e.active,"render-to-window":e.renderToWindow,"resizable-window":e.resizableWindow,"deactivate-gfi":e.deactivateGFI,"focus-to-close-icon":!0,"initial-width":500},scopedSlots:e._u([{key:"toolBody",fn:function(){return[a("div",{staticClass:"container"},[a("div",{staticClass:"decription mb-2"},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.description"))+`
            `)]),e._v(" "),a("ul",{staticClass:"nav nav-tabs",attrs:{id:"templateTabs",role:"tablist"}},[a("li",{staticClass:"nav-item",attrs:{role:"presentation"}},[a("button",{staticClass:"nav-link fs-6",class:e.currentTab==="#add-template-tab"?"active":"",attrs:{id:"add-template-tab","data-bs-toggle":"tab","data-bs-target":"#add-template",type:"button",role:"tab","aria-controls":"add-template","aria-selected":"true"},on:{click:function(s){e.currentTab="#add-template-tab"}}},[a("i",{staticClass:"bi bi-plus-square pe-2"}),e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.button.addTemplate"))+`
                    `)])]),e._v(" "),a("li",{staticClass:"nav-item",attrs:{role:"presentation"}},[a("button",{staticClass:"nav-link fs-6",class:e.currentTab==="#edit-template-tab"?"active":"",attrs:{id:"edit-template-tab","data-bs-toggle":"tab","data-bs-target":"#edit-template",type:"button",role:"tab","aria-controls":"edit-template","aria-selected":"false"},on:{click:function(s){e.currentTab="#edit-template-tab"}}},[a("i",{staticClass:"bi bi-pencil-square pe-2"}),e._v(`
                        `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.button.editTemplate"))+`
                    `)])])]),e._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane",class:e.currentTab==="#add-template-tab"?"active":"",attrs:{id:"add-template",role:"tabpanel","aria-labelledby":"add-template-tab",tabindex:"0"}},[a("TemplateAdminForm",{attrs:{"geo-data":e.dataOptions,"stat-data":e.statOptions,"tool-data":e.toolOptions}})],1),e._v(" "),a("div",{staticClass:"tab-pane",class:e.currentTab==="#edit-template-tab"?"active":"",attrs:{id:"edit-template",role:"tabpanel","aria-labelledby":"edit-template-tab",tabindex:"0"}},[a("TemplateAdminForm",{attrs:{"geo-data":e.dataOptions,"stat-data":e.statOptions,"tool-data":e.toolOptions,"show-edit-template":!0}})],1)])])]},proxy:!0}])})},T=[];b._withStripped=!0},4847:function(g,p,t){var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,O=Object.prototype.hasOwnProperty,C=(d,e)=>{for(var a in e)o(d,a,{get:e[a],enumerable:!0})},S=(d,e,a,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let h of y(e))!O.call(d,h)&&h!==a&&o(d,h,{get:()=>e[h],enumerable:!(s=n(e,h))||s.enumerable});return d},D=d=>S(o({},"__esModule",{value:!0}),d),E={};C(E,{render:()=>b,staticRenderFns:()=>T}),g.exports=D(E);var b=function(){var e=this,a=e._self._c;return a("form",{attrs:{id:"template-admin-form"}},[!e.showEditTemplate||e.showEditTemplate&&e.uploadedTemplates.length!==0?a("div",{staticClass:"required mt-2"},[e._v(`
        * `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.required"))+`
    `)]):e._e(),e._v(" "),e.showEditTemplate?a("div",{staticClass:"mt-3"},[a("button",{staticClass:"template-upload btn btn-outline-primary fs-5 lh-1",on:{click:function(s){return s.preventDefault(),e.$refs.templateImport.click()}}},[a("i",{staticClass:"bi bi-upload pe-2"}),e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.button.uploadTemplate"))+`
        `)]),e._v(" "),a("span",{staticClass:"row form-text pt-3 ps-3"},[e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.label.supportedFormats"))+`
        `)]),e._v(" "),a("form",{ref:"form"},[a("label",{attrs:{for:"template-import"}},[a("input",{ref:"templateImport",staticClass:"d-none",attrs:{id:"template-import",type:"file",multiple:""},on:{change:e.importTemplate}})])]),e._v(" "),e.uploadedTemplates.length!==0?a("div",[a("label",{staticClass:"col col-md form-label ps-0 pb-0 pt-3 m-0",attrs:{for:"select-template"}},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.label.selectTemplate"))+`
            `)]),e._v(" "),a("Multiselect",{staticClass:"pb-3",attrs:{id:"select-template",value:e.selectedTemplate,options:e.uploadedTemplates,"close-on-select":!0,"show-labels":!1,"allow-empty":!1,multiple:!1,placeholder:e.$t("additional:modules.tools.cosi.templateAdmin.label.selectTemplate")},on:{input:e.setSelectedTemplate}})],1):e._e()]):e._e(),e._v(" "),!e.showEditTemplate||e.showEditTemplate&&e.uploadedTemplates.length!==0?a("div",[a("div",{staticClass:"mb-3 mt-0"},[a("label",{staticClass:"form-label mb-0",attrs:{for:"form-name"}},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.label.name"))+` *
            `)]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.templateName,expression:"templateName",modifiers:{trim:!0}}],class:["form-control","rounded-0",e.isNameValidating&&e.templateName===""?"novalidate":"",e.showEditTemplate?"no-border":""],attrs:{id:"form-name",type:"text"},domProps:{value:e.templateName},on:{input:[function(s){s.target.composing||(e.templateName=s.target.value.trim())},function(s){return e.setIsNameValidating(!1)}],blur:function(s){return e.$forceUpdate()}}}),e._v(" "),e.isNameValidating&&e.templateName===""?a("span",{staticClass:"hint"},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.hintName"))+`
            `)]):e._e()]),e._v(" "),a("div",{staticClass:"my-3"},[a("label",{staticClass:"form-label mb-0",attrs:{for:"form-description"}},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.label.description"))+` (optional)
            `)]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.templateDes,expression:"templateDes",modifiers:{trim:!0}}],staticClass:"form-control rounded-0",class:e.showEditTemplate?"no-border":"",attrs:{id:"form-description",rows:"2"},domProps:{value:e.templateDes},on:{input:function(s){s.target.composing||(e.templateDes=s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}})]),e._v(" "),a("label",{staticClass:"form-label mb-0",attrs:{for:"add-geo-data"}},[e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.label.addGeoData"))+` (optional)
        `)]),e._v(" "),a("div",{staticClass:"row no-gutters mb-2"},[e._m(0),e._v(" "),a("Multiselect",{staticClass:"col col-md",attrs:{id:"add-geo-data",options:e.geoData,searchable:!0,"close-on-select":!1,multiple:!0,"show-labels":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!1,placeholder:e.$t("additional:modules.tools.cosi.templateAdmin.label.placeholder"),label:"label","track-by":"layerId"},scopedSlots:e._u([{key:"selection",fn:function({values:s,isOpen:h}){return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!h,expression:"!isOpen"}],staticClass:"multiselect__input"},[e._v(" "+e._s()+" ")]):e._e()]}}],null,!1,1715460742),model:{value:e.selectedGeoData,callback:function(s){e.selectedGeoData=s},expression:"selectedGeoData"}})],1),e._v(" "),a("div",{staticClass:"mb-4"},e._l(e.selectedGeoData,function(s,h){return a("button",{key:h,staticClass:"btn btn-sm btn-outline-secondary lh-1 rounded-pill shadow-none mb-1 me-2 btn-pb",attrs:{"aria-label":"Close"},on:{click:function(j){return j.preventDefault(),e.removeGeoData(s.layerId)}}},[e._v(`
                `+e._s(s.label)+`
                `),a("i",{staticClass:"bi bi-x fs-5 align-middle"})])}),0),e._v(" "),a("label",{staticClass:"form-label mb-0",attrs:{for:"add-statistic-data"}},[e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.label.addStatisticalData"))+` *
        `)]),e._v(" "),a("div",{staticClass:"row no-gutters mb-2"},[e._m(1),e._v(" "),a("Multiselect",{class:["col","col-md",e.isStatDataValidating&&!e.selectedStatData.length?"novalidate":""],attrs:{id:"add-statistic-data",options:e.statData,searchable:!0,"close-on-select":!1,multiple:!0,"show-labels":!1,"clear-on-select":!1,"allow-empty":!1,placeholder:e.$t("additional:modules.tools.cosi.templateAdmin.label.placeholder"),label:"label","track-by":"propertyName"},on:{input:function(s){return e.setIsStatDataValidating(!1)}},scopedSlots:e._u([{key:"selection",fn:function({values:s,isOpen:h}){return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!h,expression:"!isOpen"}],staticClass:"multiselect__input"},[e._v(" "+e._s()+" ")]):e._e()]}}],null,!1,1715460742),model:{value:e.selectedStatData,callback:function(s){e.selectedStatData=s},expression:"selectedStatData"}})],1),e._v(" "),a("div",{staticClass:"mb-4"},[e.isStatDataValidating&&!e.selectedStatData.length?a("span",{staticClass:"hint"},[e._v(`
                `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.hintStatisticData"))+`
            `)]):e._e(),e._v(" "),a("Draggable",{staticClass:"mt-3",attrs:{handle:".handle"},model:{value:e.selectedStatData,callback:function(s){e.selectedStatData=s},expression:"selectedStatData"}},e._l(e.selectedStatData,function(s,h){return a("TemplateAdminFormCard",{key:h,class:h>1&&e.limitReferenceValues?"more-statistics":"",attrs:{title:s.label,"imported-reference-value":e.getReferenceValue(s.label,e.importedReferenceValueList),"origin-reference-value":e.getReferenceValue(s.label,e.referenceValueList),label:e.$t(e.labelOfOrientationValue),unit:e.showUnit(s.valueType)},on:{removeCard:function(j){return e.removeStatData(s.propertyName)},setReferenceValueList:e.setReferenceValueList}})}),1),e._v(" "),e.countSelectedStatistics?a("div",{staticClass:"align-self-end p-0"},[a("button",{staticClass:"btn btn-link btn-sm pt-0",attrs:{id:"more-button",type:"button"},on:{click:function(s){e.limitReferenceValues=!e.limitReferenceValues}}},[e._v(`
                    `+e._s(e.limitReferenceValues?e.$t("additional:modules.tools.cosi.templateAdmin.button.showMore"):e.$t("additional:modules.tools.cosi.templateAdmin.button.showLess"))+`
                `)])]):e._e()],1),e._v(" "),a("label",{staticClass:"form-label mb-0",attrs:{for:"add-tools"}},[e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.label.addTools"))+` (optional)
        `)]),e._v(" "),a("div",{staticClass:"row no-gutters mb-4"},[e._m(2),e._v(" "),a("Multiselect",{staticClass:"col col-md",attrs:{id:"add-tools","clear-on-select":!1,options:e.toolData,searchable:!0,"close-on-select":!0,multiple:!1,"show-labels":!1,placeholder:e.$t("additional:modules.tools.cosi.templateAdmin.label.placeholder"),"track-by":"toolId",label:"label"},scopedSlots:e._u([{key:"selection",fn:function({values:s,isOpen:h}){return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!h,expression:"!isOpen"}],staticClass:"multiselect__input"},[e._v(" "+e._s()+" ")]):e._e()]}}],null,!1,1715460742),model:{value:e.selectedToolData,callback:function(s){e.selectedToolData=s},expression:"selectedToolData"}})],1),e._v(" "),a("button",{staticClass:"export-template btn btn-outline-primary fs-5 lh-1",on:{click:function(s){return s.preventDefault(),e.validateForm.apply(null,arguments)}}},[a("i",{staticClass:"bi bi-download pe-2"}),e._v(`
            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.button.downloadTemplate"))+`
        `)])]):e._e()])},T=[function(){var d=this,e=d._self._c;return e("button",{staticClass:"col col-md-1 align-items-center justify-content-center search-button",attrs:{type:"button","aria-disabled":"true",disabled:""}},[e("i",{staticClass:"bi bi-search search-icon"})])},function(){var d=this,e=d._self._c;return e("button",{staticClass:"col col-md-1 align-items-center justify-content-center search-button",attrs:{type:"button","aria-disabled":"true",disabled:""}},[e("i",{staticClass:"bi bi-search search-icon"})])},function(){var d=this,e=d._self._c;return e("button",{staticClass:"col col-md-1 align-items-center justify-content-center search-button",attrs:{type:"button","aria-disabled":"true",disabled:""}},[e("i",{staticClass:"bi bi-search search-icon"})])}];b._withStripped=!0},4848:function(g,p,t){var o=Object.defineProperty,n=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,O=Object.prototype.hasOwnProperty,C=(d,e)=>{for(var a in e)o(d,a,{get:e[a],enumerable:!0})},S=(d,e,a,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let h of y(e))!O.call(d,h)&&h!==a&&o(d,h,{get:()=>e[h],enumerable:!(s=n(e,h))||s.enumerable});return d},D=d=>S(o({},"__esModule",{value:!0}),d),E={};C(E,{render:()=>b,staticRenderFns:()=>T}),g.exports=D(E);var b=function(){var e=this,a=e._self._c;return a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"row g-0"},[a("div",{staticClass:"col-md-1 pe-0"},[a("button",{staticClass:"btn drag-and-drop shadow-none ps-0 pe-0 pt-3 align-items-center handle",attrs:{type:"button"},on:{click:function(s){s.preventDefault()}}},[a("i",{staticClass:"bi bi-grip-vertical mt-1"})])]),e._v(" "),a("div",{staticClass:"col-md-10"},[a("button",{staticClass:"close-button shadow-none",attrs:{"aria-label":"Close"},on:{click:function(s){return s.preventDefault(),e.$emit("removeCard")}}},[a("i",{staticClass:"bi bi-x align-middle"})]),e._v(" "),a("div",{staticClass:"card-body ps-2 pe-2 pb-0 pt-3"},[a("h5",{staticClass:"card-title"},[e._v(`
                    `+e._s(e.title)+`
                `)]),e._v(" "),a("div",{staticClass:"card-text row align-items-center pb-2"},[a("label",{attrs:{for:"referenceValue"}},[e._v(" "+e._s(e.label)+" ")]),e._v(" "),e.unit?a("div",{staticClass:"col-4 input-group input-group-sm pb-0 px-0"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.referenceValue,expression:"referenceValue",modifiers:{trim:!0}}],staticClass:"form-control border-end-0 pb-0",attrs:{id:"referenceValue",type:"text",maxlength:"20"},domProps:{value:e.referenceValue},on:{change:e.checkComma,keypress:function(s){return e.checkNumber(s)},input:function(s){s.target.composing||(e.referenceValue=s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}}),e._v(" "),a("span",{staticClass:"input-group-text"},[e._v(`
                            `+e._s(e.unit)+`
                        `)]),e._v(" "),a("span",{staticClass:"form-text"},[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.hintNumber"))+`
                        `)])]):a("div",{staticClass:"col col-md-4 pb-0 px-0"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.referenceValue,expression:"referenceValue",modifiers:{trim:!0}}],staticClass:"form-control pb-0",attrs:{id:"referenceValue",type:"text",maxlength:"20"},domProps:{value:e.referenceValue},on:{change:e.checkComma,keypress:function(s){return e.checkNumber(s)},input:function(s){s.target.composing||(e.referenceValue=s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}}),e._v(" "),a("span",{staticClass:"form-text"},[e._v(`
                            `+e._s(e.$t("additional:modules.tools.cosi.templateAdmin.hintNumber"))+`
                        `)])])])])])])])},T=[];b._withStripped=!0},4849:function(g,p,t){},4850:function(g,p,t){},4851:function(g,p,t){g.exports={"gridBreakpoints-xs":"0","gridBreakpoints-sm":"576px","gridBreakpoints-md":"768px","gridBreakpoints-lg":"992px","gridBreakpoints-xl":"1200px","gridBreakpoints-xxl":"1400px"}},4852:function(g,p,t){},5482:function(g,p,t){"use strict";t.r(p);var o=t(5483),n=t(4438);for(var y in n)["default"].indexOf(y)<0&&function(D){t.d(p,D,function(){return n[D]})}(y);var O=t(5493),C=t(1),S=Object(C.a)(n.default,o.render,o.staticRenderFns,!1,null,"46586976",null);p.default=S.exports},5483:function(g,p,t){"use strict";var o=t(4846),n=t.n(o);t.o(o,"render")&&t.d(p,"render",function(){return o.render}),t.o(o,"staticRenderFns")&&t.d(p,"staticRenderFns",function(){return o.staticRenderFns})},5484:function(g,p,t){"use strict";t.r(p);var o=t(5485),n=t(4440);for(var y in n)["default"].indexOf(y)<0&&function(E){t.d(p,E,function(){return n[E]})}(y);var O=t(5491),C=t(5492),S=t(1),D=Object(S.a)(n.default,o.render,o.staticRenderFns,!1,null,"772ca774",null);p.default=D.exports},5485:function(g,p,t){"use strict";var o=t(4847),n=t.n(o);t.o(o,"render")&&t.d(p,"render",function(){return o.render}),t.o(o,"staticRenderFns")&&t.d(p,"staticRenderFns",function(){return o.staticRenderFns})},5486:function(g,p,t){"use strict";t.r(p);var o=t(5487),n=t(4442);for(var y in n)["default"].indexOf(y)<0&&function(D){t.d(p,D,function(){return n[D]})}(y);var O=t(5488),C=t(1),S=Object(C.a)(n.default,o.render,o.staticRenderFns,!1,null,"06661138",null);p.default=S.exports},5487:function(g,p,t){"use strict";var o=t(4848),n=t.n(o);t.o(o,"render")&&t.d(p,"render",function(){return o.render}),t.o(o,"staticRenderFns")&&t.d(p,"staticRenderFns",function(){return o.staticRenderFns})},5488:function(g,p,t){"use strict";var o=t(4849),n=t.n(o)},5491:function(g,p,t){"use strict";var o=t(4850),n=t.n(o)},5492:function(g,p,t){"use strict";var o=t(4851),n=t.n(o)},5493:function(g,p,t){"use strict";var o=t(4852),n=t.n(o)}}]);
