(window.webpackJsonp=window.webpackJsonp||[]).push([[247,244,248,388,405,428],{3747:function(J,$){function h(_,p,j){return typeof p!="string"||typeof j!="string"?(console.error(`utils/features/transform: The second and the third parameter must both be a string, but got ${typeof p} and ${typeof j}`),!1):!Array.isArray(_)||_.length<1?(console.error("utils/features/transform: The first parameter must be an non-empty array"),!1):(_.forEach(function(x){const E=x.getGeometry();E&&E.transform(p,j)}),_)}J.exports={transformFeatures:h}},3773:function(J,$){function h(_,p){if(!Array.isArray(_))return console.error("addons/cosi/utils/array/splitIntoChunks: The first parameter must be an array, but got "+typeof _),!1;if(typeof p!="number")return console.error("addons/cosi/utils/array/splitIntoChunks: The second parameter must be a number, but got "+typeof p),!1;const j=[];for(let x=0;x<_.length;x+=p){const E=_.slice(x,x+p);j.push(E)}return j}J.exports={splitIntoChunks:h}},3885:function(J,$,h){var _=Object.create,p=Object.defineProperty,j=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,E=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,B=(u,l)=>{for(var e in l)p(u,e,{get:l[e],enumerable:!0})},I=(u,l,e,o)=>{if(l&&typeof l=="object"||typeof l=="function")for(let r of x(l))!R.call(u,r)&&r!==e&&p(u,r,{get:()=>l[r],enumerable:!(o=j(l,r))||o.enumerable});return u},b=(u,l,e)=>(e=u!=null?_(E(u)):{},I(l||!u||!u.__esModule?p(e,"default",{value:u,enumerable:!0}):e,u)),U=u=>I(p({},"__esModule",{value:!0}),u),S=(u,l,e)=>new Promise((o,r)=>{var y=C=>{try{W(e.next(C))}catch(t){r(t)}},P=C=>{try{W(e.throw(C))}catch(t){r(t)}},W=C=>C.done?o(C.value):Promise.resolve(C.value).then(y,P);W((e=e.apply(u,l)).next())}),D={};B(D,{default:()=>v}),J.exports=U(D);var s=b(h(25)),n=b(h(450)),i=h(3773);function f(u,l,e,o,r,y){return S(this,null,function*(){const P=[],W=new n.default,C=(0,i.splitIntoChunks)(l,5),t=y||"https://api.openrouteservice.org/v2/";for(let a=0;a<C.length;a++){const c=t+"isochrones/",O={locations:C[a],range_type:e,range:o},d=c+u.trim(),m={Accept:"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8","Content-Type":"application/json"};t==="https://api.openrouteservice.org/v2/"&&(m.Authorization="5b3ce3597851110001cf6248ef277cc626c440eb819e9299870c194c"),P.push(s.default.post(d+"/geojson",JSON.stringify(O),{headers:m,cancelToken:r&&r.token}).then(N=>N.data).catch(N=>{console.error("Error: ",N)}))}return Promise.all(P).then(a=>{const c=[];return a.forEach(O=>{O&&c.push(...W.readFeatures(O))}),c})})}var v=f},4120:function(J,$,h){var _=Object.create,p=Object.defineProperty,j=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,E=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,B=(t,a)=>{for(var c in a)p(t,c,{get:a[c],enumerable:!0})},I=(t,a,c,O)=>{if(a&&typeof a=="object"||typeof a=="function")for(let d of x(a))!R.call(t,d)&&d!==c&&p(t,d,{get:()=>a[d],enumerable:!(O=j(a,d))||O.enumerable});return t},b=(t,a,c)=>(c=t!=null?_(E(t)):{},I(a||!t||!t.__esModule?p(c,"default",{value:t,enumerable:!0}):c,t)),U=t=>I(p({},"__esModule",{value:!0}),t),S=(t,a,c)=>new Promise((O,d)=>{var m=M=>{try{k(c.next(M))}catch(A){d(A)}},N=M=>{try{k(c.throw(M))}catch(A){d(A)}},k=M=>M.done?O(M.value):Promise.resolve(M.value).then(m,N);k((c=c.apply(t,a)).next())}),D={};B(D,{createIsochrones:()=>P,getFilterPoly:()=>r,setFilterPoly:()=>y}),J.exports=U(D);var s=b(h(3885)),n=h(3747),i=h(4158),f=b(h(4171)),v=b(h(4260)),u=b(h(25)),l=b(h(450));let e,o;function r(){return o}function y(t,a){a==="MultiPolygon"?o=(0,i.multiPolygon)(t):o=(0,i.polygon)(t)}function P(t,a){return S(this,arguments,function*({transportType:c,coordinates:O,scaleUnit:d,distance:m,maxDistance:N,batchSize:k,baseUrl:M,projectionCode:A},z){let F;return O.length===1?(z(50),F=yield W(c,O[0],d,m,N,M,A),z(100),F):C({transportType:c,coordinates:O,scaleUnit:d,distance:m,maxDistance:N,selectedFacilityNames:null,batchSize:k||200,progress:z,baseUrl:M,projectionCode:A})})}function W(t,a,c,O,d,m,N){return S(this,null,function*(){e&&e.cancel(),e=u.default.CancelToken.source();const k=c==="time"?O*60:O,M=c==="time"?d*60:d,A=[k/3,k*2/3,k],z=yield(0,s.default)(t,[a],c,d?[...A,M]:A,e,m),F=z.reverse(),G="Erreichbarkeit ab einem Referenzpunkt";let w=F;return w=(0,n.transformFeatures)(w,"EPSG:4326",N),w.forEach(T=>{T.set("featureType",G),T.set("coordinate",[a])}),w})}function C(t){return S(this,null,function*(){t.progress(1),e&&e.cancel(),e=u.default.CancelToken.source();const a=t.scaleUnit==="time"?t.distance*60:t.distance,c=t.scaleUnit==="time"?t.maxDistance*60:t.maxDistance,O=[a,a*2/3,a/3],d=t.maxDistance?[c,...O]:O,m=d.length,N=[],k=[],M=o===void 0?t.coordinates:t.coordinates.filter(F=>(0,v.default)(F,o));for(let F=0;F<M.length;F+=t.batchSize){const G=M.slice(F,F+t.batchSize);N.push(G)}let A=0,z=[];for(const F of N){try{const G=yield(0,s.default)(t.transportType,F,t.scaleUnit,d,e,t.baseUrl),w=G.reverse(),T=[];for(let g=0;g<m;g++)T.push([]);for(let g=0;g<w.length;g=g+m)T[g%m].push(w[g]),T[(g+1)%m].push(w[g+1]),T[(g+2)%m].push(w[g+2]),m===4&&T[(g+3)%m].push(w[g+3]);k.push(T)}catch(G){if(G.response.data.error.code!==3099)throw G}t.progress((A+1)/N.length*90),A++}if(k.length){const F=new l.default;for(let G=0;G<m;G++){let w=k.map(L=>L[G]),T,g;w=[].concat(...w),T=F.writeFeatureObject(w[0]);for(let L=0;L<w.length;L++)try{T=(0,f.default)(T,F.writeFeatureObject(w[L]))}catch(Q){console.error(Q)}g=new l.default().readFeatures(JSON.stringify(T)),g=(0,n.transformFeatures)(g,"EPSG:4326",t.projectionCode);const K="Erreichbarkeit im Gebiet";g.forEach(L=>{L.set("featureType",K),L.set("value",w[0].get("value")),L.set("mode",t.transportType),L.set("unit",t.scaleUnit),L.set("topic",t.selectedFacilityNames)}),z=z.concat(g)}}return t.progress(100),z})}},4121:function(J,$,h){var _=Object.create,p=Object.defineProperty,j=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,E=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,B=(i,f)=>{for(var v in f)p(i,v,{get:f[v],enumerable:!0})},I=(i,f,v,u)=>{if(f&&typeof f=="object"||typeof f=="function")for(let l of x(f))!R.call(i,l)&&l!==v&&p(i,l,{get:()=>f[l],enumerable:!(u=j(f,l))||u.enumerable});return i},b=(i,f,v)=>(v=i!=null?_(E(i)):{},I(f||!i||!i.__esModule?p(v,"default",{value:i,enumerable:!0}):v,i)),U=i=>I(p({},"__esModule",{value:!0}),i),S={};B(S,{registerProjections:()=>n}),J.exports=U(S);var D=b(h(45)),s=b(h(12));function n(i){D.default.registerProjections(i),s.addEquivalentProjections([s.get("EPSG:25832"),new s.Projection({code:"http://www.opengis.net/gml/srs/epsg.xml#25832",axis:"enu"})])}},4143:function(J,$,h){var _=Object.create,p=Object.defineProperty,j=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,E=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,B=(e,o)=>{for(var r in o)p(e,r,{get:o[r],enumerable:!0})},I=(e,o,r,y)=>{if(o&&typeof o=="object"||typeof o=="function")for(let P of x(o))!R.call(e,P)&&P!==r&&p(e,P,{get:()=>o[P],enumerable:!(y=j(o,P))||y.enumerable});return e},b=(e,o,r)=>(r=e!=null?_(E(e)):{},I(o||!e||!e.__esModule?p(r,"default",{value:e,enumerable:!0}):r,e)),U=e=>I(p({},"__esModule",{value:!0}),e),S=(e,o,r)=>new Promise((y,P)=>{var W=a=>{try{t(r.next(a))}catch(c){P(c)}},C=a=>{try{t(r.throw(a))}catch(c){P(c)}},t=a=>a.done?y(a.value):Promise.resolve(a.value).then(W,C);t((r=r.apply(e,o)).next())}),D={};B(D,{Worker:()=>l}),J.exports=U(D);var s=h(4120),n=h(2111),i=b(h(25)),f=h(4121),v=b(h(450));function u(e,o){return S(this,null,function*(){const r=o.data.type;try{if(o.data.type==="createIsochrones"){const y=yield(0,s.createIsochrones)(o.data,P=>{e.postMessage({type:r,progress:P})});e.postMessage({type:o.data.type,result:new v.default().writeFeatures(y)})}else o.data.type==="init"?((0,s.setFilterPoly)(o.data.coords,o.data.geomType),e.postMessage({type:r,result:"ok"})):o.data.type==="getFilterPoly"?e.postMessage({type:r,result:(0,s.getFilterPoly)()}):o.data.type==="register"&&(0,f.registerProjections)(o.data.projections)}catch(y){i.default.isCancel(y)?e.postMessage({type:r,request_canceled:!0}):e.postMessage({type:r,error:y})}})}self.addEventListener("message",function(e){u(self,e)});class l{constructor(){this.listeners=[]}postMessage(o){return S(this,null,function*(){yield u({postMessage:r=>{r.error&&this.onerror(r),this.onmessage&&this.onmessage({data:r});for(const y of this.listeners)y({data:r})}},{data:o})})}terminate(){this.status="terminated"}addEventListener(o,r){o==="message"&&this.listeners.push(r)}removeEventListener(o,r){if(o==="message"){const y=this.listeners.indexOf(r);y>-1&&this.listeners.splice(y,1)}}}},4260:function(J,$,h){var _=Object.defineProperty,p=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,E=(s,n)=>{for(var i in n)_(s,i,{get:n[i],enumerable:!0})},R=(s,n,i,f)=>{if(n&&typeof n=="object"||typeof n=="function")for(let v of j(n))!x.call(s,v)&&v!==i&&_(s,v,{get:()=>n[v],enumerable:!(f=p(n,v))||f.enumerable});return s},B=s=>R(_({},"__esModule",{value:!0}),s),I={};E(I,{default:()=>U}),J.exports=B(I);var b=h(4168);function U(s,n,i){if(i===void 0&&(i={}),!s)throw new Error("point is required");if(!n)throw new Error("polygon is required");var f=(0,b.getCoord)(s),v=(0,b.getGeom)(n),u=v.type,l=n.bbox,e=v.coordinates;if(l&&D(f,l)===!1)return!1;u==="Polygon"&&(e=[e]);for(var o=!1,r=0;r<e.length&&!o;r++)if(S(f,e[r][0],i.ignoreBoundary)){for(var y=!1,P=1;P<e[r].length&&!y;)S(f,e[r][P],!i.ignoreBoundary)&&(y=!0),P++;y||(o=!0)}return o}function S(s,n,i){var f=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var v=0,u=n.length-1;v<n.length;u=v++){var l=n[v][0],e=n[v][1],o=n[u][0],r=n[u][1],y=s[1]*(l-o)+e*(o-s[0])+r*(s[0]-l)===0&&(l-s[0])*(o-s[0])<=0&&(e-s[1])*(r-s[1])<=0;if(y)return!i;var P=e>s[1]!=r>s[1]&&s[0]<(o-l)*(s[1]-e)/(r-e)+l;P&&(f=!f)}return f}function D(s,n){return n[0]<=s[0]&&n[1]<=s[1]&&n[2]>=s[0]&&n[3]>=s[1]}}}]);
