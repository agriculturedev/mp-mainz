(window.webpackJsonp=window.webpackJsonp||[]).push([[93,209,210,500,501,502,503,504,505,506,507,508,509],{255:function(h,L,n){var y=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,M=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,x=(e,a)=>{for(var p in a)i(e,p,{get:a[p],enumerable:!0})},S=(e,a,p,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of T(a))!D.call(e,r)&&r!==p&&i(e,r,{get:()=>a[r],enumerable:!(u=m(a,r))||u.enumerable});return e},v=(e,a,p)=>(p=e!=null?y(M(e)):{},S(a||!e||!e.__esModule?i(p,"default",{value:e,enumerable:!0}):p,e)),O=e=>S(i({},"__esModule",{value:!0}),e),d={};x(d,{default:()=>s}),h.exports=O(d);var t=v(n(5700)),o=v(n(4064)),P=v(n(4065)),l=v(n(4066)),s={component:t.default,store:o.default,locales:{de:P.default,en:l.default}}},3698:function(h,L){var n=Object.defineProperty,y=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,m=Object.prototype.hasOwnProperty,T=(O,d)=>{for(var t in d)n(O,t,{get:d[t],enumerable:!0})},M=(O,d,t,o)=>{if(d&&typeof d=="object"||typeof d=="function")for(let P of i(d))!m.call(O,P)&&P!==t&&n(O,P,{get:()=>d[P],enumerable:!(o=y(d,P))||o.enumerable});return O},D=O=>M(n({},"__esModule",{value:!0}),O),x={};T(x,{default:()=>v}),h.exports=D(x);var v={active:!1,deactivateGFI:!1,icon:"bi-bullseye",id:"sessionTool",name:"additional:modules.tools.sessionTool",renderToWindow:!1,resizableWindow:!0,isVisibleInMenu:!0,observer:[]}},3843:function(h,L,n){var y=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,v=(u,r,c)=>r in u?i(u,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):u[r]=c,O=(u,r)=>{for(var c in r||(r={}))x.call(r,c)&&v(u,c,r[c]);if(M)for(var c of M(r))S.call(r,c)&&v(u,c,r[c]);return u},d=(u,r)=>{for(var c in r)i(u,c,{get:r[c],enumerable:!0})},t=(u,r,c,_)=>{if(r&&typeof r=="object"||typeof r=="function")for(let g of T(r))!x.call(u,g)&&g!==c&&i(u,g,{get:()=>r[g],enumerable:!(_=m(r,g))||_.enumerable});return u},o=(u,r,c)=>(c=u!=null?y(D(u)):{},t(r||!u||!u.__esModule?i(c,"default",{value:u,enumerable:!0}):c,u)),P=u=>t(i({},"__esModule",{value:!0}),u),l={};d(l,{default:()=>p}),h.exports=P(l);var s=n(10),e=o(n(3698)),p=O({},(0,s.generateSimpleGetters)(e.default))},3844:function(h,L,n){var y=Object.create,i=Object.defineProperty,m=Object.defineProperties,T=Object.getOwnPropertyDescriptor,M=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,d=(_,g,w)=>g in _?i(_,g,{enumerable:!0,configurable:!0,writable:!0,value:w}):_[g]=w,t=(_,g)=>{for(var w in g||(g={}))v.call(g,w)&&d(_,w,g[w]);if(x)for(var w of x(g))O.call(g,w)&&d(_,w,g[w]);return _},o=(_,g)=>m(_,M(g)),P=(_,g)=>{for(var w in g)i(_,w,{get:g[w],enumerable:!0})},l=(_,g,w,A)=>{if(g&&typeof g=="object"||typeof g=="function")for(let F of D(g))!v.call(_,F)&&F!==w&&i(_,F,{get:()=>g[F],enumerable:!(A=T(g,F))||A.enumerable});return _},s=(_,g,w)=>(w=_!=null?y(S(_)):{},l(g||!_||!_.__esModule?i(w,"default",{value:_,enumerable:!0}):w,_)),e=_=>l(i({},"__esModule",{value:!0}),_),a={};P(a,{default:()=>c}),h.exports=e(a);var p=n(10),u=s(n(3698)),c=o(t({},(0,p.generateSimpleMutations)(u.default)),{addObserver:(_,g)=>{_.observer.push(g)}})},3879:function(h,L,n){(function(y){var i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,M=Object.prototype.hasOwnProperty,D=(o,P)=>{for(var l in P)i(o,l,{get:P[l],enumerable:!0})},x=(o,P,l,s)=>{if(P&&typeof P=="object"||typeof P=="function")for(let e of T(P))!M.call(o,e)&&e!==l&&i(o,e,{get:()=>P[e],enumerable:!(s=m(P,e))||s.enumerable});return o},S=o=>x(i({},"__esModule",{value:!0}),o),v={};D(v,{addLayerByLayerId:()=>t,getLayerByAttributes:()=>d,getLayersByAttributes:()=>O}),h.exports=S(v);function O(o){return y.request("ModelList","getModelsByAttributes",o)}function d(o){return y.request("ModelList","getModelByAttributes",o)}function t(o){y.trigger("ModelList","addModelsByAttributes",{id:o})}}).call(this,n(3))},3880:function(h,L){var n=Object.defineProperty,y=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,m=Object.prototype.hasOwnProperty,T=(v,O)=>{for(var d in O)n(v,d,{get:O[d],enumerable:!0})},M=(v,O,d,t)=>{if(O&&typeof O=="object"||typeof O=="function")for(let o of i(O))!m.call(v,o)&&o!==d&&n(v,o,{get:()=>O[o],enumerable:!(t=y(O,o))||t.enumerable});return v},D=v=>M(n({},"__esModule",{value:!0}),v),x={};T(x,{default:()=>S}),h.exports=D(x);var S={register:({commit:v},{key:O,getter:d,setter:t})=>{v("addObserver",{key:O,getter:d,setter:t})}}},4060:function(h,L,n){var y=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,M=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,x=(s,e)=>{for(var a in e)i(s,a,{get:e[a],enumerable:!0})},S=(s,e,a,p)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of T(e))!D.call(s,u)&&u!==a&&i(s,u,{get:()=>e[u],enumerable:!(p=m(e,u))||p.enumerable});return s},v=(s,e,a)=>(a=s!=null?y(M(s)):{},S(e||!s||!s.__esModule?i(a,"default",{value:s,enumerable:!0}):a,s)),O=s=>S(i({},"__esModule",{value:!0}),s),d={};x(d,{register:()=>o}),h.exports=O(d);var t=v(n(7));function o(s){s.dispatch("Tools/SessionTool/register",{key:"Maps",getter:P,setter:l})}function P(){return{center:t.default.getters["Maps/center"],zoomLevel:t.default.getters["Maps/getView"].getZoom()}}function l(s){s?.center&&s?.zoomLevel&&(t.default.dispatch("Maps/setZoomLevel",s.zoomLevel),t.default.dispatch("Maps/setCenter",s.center))}},4061:function(h,L,n){var y=Object.defineProperty,i=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,T=Object.prototype.hasOwnProperty,M=(l,s)=>{for(var e in s)y(l,e,{get:s[e],enumerable:!0})},D=(l,s,e,a)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of m(s))!T.call(l,p)&&p!==e&&y(l,p,{get:()=>s[p],enumerable:!(a=i(s,p))||a.enumerable});return l},x=l=>D(y({},"__esModule",{value:!0}),l),S={};M(S,{getCurrentLayerList:()=>d,getLayerIdBlacklistFromAccordions:()=>P,getModelByLayerId:()=>o,register:()=>O,setLayers:()=>t}),h.exports=x(S);var v=n(3879);function O(l){l.dispatch("Tools/SessionTool/register",{key:"Layers",getter:d,setter:t})}function d(){const l=(0,v.getLayersByAttributes)({isSelected:!0,type:"layer"}),s=[];return Array.isArray(l)&&l.length?l.forEach(e=>s.push({id:e?.id,visibility:typeof e.get=="function"?e.get("isVisibleInMap"):!0})):l?.id&&s.push({id:l?.id,visibility:typeof l.get=="function"?l.get("isVisibleInMap"):!0}),{layerIds:s}}function t(l,s=!1){var e;if(!Array.isArray(l?.layerIds))return!1;const a=(0,v.getLayersByAttributes)({isSelected:!0,type:"layer"}),p=P((e=s?.Filter)==null?void 0:e.selectedAccordions);return Array.isArray(a)&&a.forEach(u=>{u.setIsSelected(!1)}),l.layerIds.forEach(u=>{if(Object.prototype.hasOwnProperty.call(p,u.id))return;const r=o(u.id);typeof r?.setIsSelected=="function"&&(r.setIsSelected(!0),typeof u.visibility<"u"&&r.setIsVisibleInMap(u.visibility))}),!0}function o(l){if(typeof l!="string"&&typeof l!="number")return!1;const s=(0,v.getLayersByAttributes)({id:l});let e;return Array.isArray(s)&&s.length>0?e=s[0]:((0,v.addLayerByLayerId)(l),e=(0,v.getLayerByAttributes)({id:l})),e}function P(l){const s={};return Array.isArray(l)?(l.forEach(e=>{if(e?.category){e.layers.forEach(a=>{s[a.layerId]=!0});return}s[e.layerId]=!0}),s):{}}},4062:function(h,L,n){var y=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,M=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,x=(e,a)=>{for(var p in a)i(e,p,{get:a[p],enumerable:!0})},S=(e,a,p,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of T(a))!D.call(e,r)&&r!==p&&i(e,r,{get:()=>a[r],enumerable:!(u=m(a,r))||u.enumerable});return e},v=(e,a,p)=>(p=e!=null?y(M(e)):{},S(a||!e||!e.__esModule?i(p,"default",{value:e,enumerable:!0}):p,e)),O=e=>S(i({},"__esModule",{value:!0}),e),d={};x(d,{getFilterState:()=>l,register:()=>P,setFilter:()=>s}),h.exports=O(d);var t=v(n(7)),o=v(n(18));function P(e){e.dispatch("Tools/SessionTool/register",{key:"Filter",getter:l,setter:s})}function l(){t.default.dispatch("Tools/Filter/serializeState");const e=t.default.getters["Tools/Filter/serializedString"];return JSON.parse(e)}function s(e){!Array.isArray(e?.rulesOfFilters)||e?.rulesOfFilters.length===0&&(!(0,o.default)(e?.geometryFeature)||Object.keys(e.geometryFeature).length===0)||t.default.dispatch("Tools/Filter/deserializeState",e)}},4063:function(h,L,n){var y=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,M=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,x=(e,a)=>{for(var p in a)i(e,p,{get:a[p],enumerable:!0})},S=(e,a,p,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of T(a))!D.call(e,r)&&r!==p&&i(e,r,{get:()=>a[r],enumerable:!(u=m(a,r))||u.enumerable});return e},v=(e,a,p)=>(p=e!=null?y(M(e)):{},S(a||!e||!e.__esModule?i(p,"default",{value:e,enumerable:!0}):p,e)),O=e=>S(i({},"__esModule",{value:!0}),e),d=(e,a,p)=>new Promise((u,r)=>{var c=w=>{try{g(p.next(w))}catch(A){r(A)}},_=w=>{try{g(p.throw(w))}catch(A){r(A)}},g=w=>w.done?u(w.value):Promise.resolve(w.value).then(c,_);g((p=p.apply(e,a)).next())}),t={};x(t,{register:()=>P}),h.exports=O(t);var o=v(n(7));function P(e){e.dispatch("Tools/SessionTool/register",{key:"DrawTool",getter:l,setter:s})}function l(){return d(this,null,function*(){let e;o.default.commit("Tools/Draw/setDownloadSelectedFormat","GEOJSON"),o.default.dispatch("Tools/Draw/setDownloadFeatures"),yield o.default.dispatch("Tools/Draw/prepareData");try{e=JSON.parse(o.default.getters["Tools/Draw/download"].dataString)}catch(a){console.warn('jsonParse failed: could not parse"'+e+'" to JSON: '+a)}return{draw:e}})}function s(e){return d(this,null,function*(){var a,p,u;if(!Array.isArray((a=e?.draw)==null?void 0:a.features)||!((u=(p=e?.draw)==null?void 0:p.features)!=null&&u.length))return;const r=yield o.default.dispatch("Maps/addNewLayerIfNotExists","importDrawLayer",{root:!0});o.default.dispatch("Tools/FileImport/importGeoJSON",{raw:JSON.stringify(e.draw),layer:r,filename:"draw.geojson"})})}},4064:function(h,L,n){var y=Object.create,i=Object.defineProperty,m=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,v=(r,c,_)=>c in r?i(r,c,{enumerable:!0,configurable:!0,writable:!0,value:_}):r[c]=_,O=(r,c)=>{for(var _ in c||(c={}))x.call(c,_)&&v(r,_,c[_]);if(M)for(var _ of M(c))S.call(c,_)&&v(r,_,c[_]);return r},d=(r,c)=>{for(var _ in c)i(r,_,{get:c[_],enumerable:!0})},t=(r,c,_,g)=>{if(c&&typeof c=="object"||typeof c=="function")for(let w of T(c))!x.call(r,w)&&w!==_&&i(r,w,{get:()=>c[w],enumerable:!(g=m(c,w))||g.enumerable});return r},o=(r,c,_)=>(_=r!=null?y(D(r)):{},t(c||!r||!r.__esModule?i(_,"default",{value:r,enumerable:!0}):_,r)),P=r=>t(i({},"__esModule",{value:!0}),r),l={};d(l,{default:()=>u}),h.exports=P(l);var s=o(n(3843)),e=o(n(3844)),a=o(n(3880)),p=o(n(3698)),u={namespaced:!0,state:O({},p.default),mutations:e.default,actions:a.default,getters:s.default}},4065:function(h){h.exports=JSON.parse('{"modules":{"tools":{"sessionTool":{"title":"Sitzungstool","uploadHeader":"Sitzung laden","buttonTextUpload":"Hochladen","buttonTextDownload":"Herunterladen","downloadHeader":"Sitzung speichern","errorOnLoad":"Beim hochladen ist ein Fehler aufgetreten!"}}}}')},4066:function(h){h.exports=JSON.parse('{"modules":{"tools":{"sessionTool":{"title":"SessionTool","uploadHeader":"Load Session","buttonTextUpload":"Upload","buttonTextDownload":"Download","downloadHeader":"Save Session","errorOnLoad":"An error occurred during upload!"}}}}')},4569:function(h,L,n){"use strict";n.r(L);var y=n(4570),i=n.n(y);for(var m in y)["default"].indexOf(m)<0&&function(T){n.d(L,T,function(){return y[T]})}(m);L.default=i.a},4570:function(h,L,n){(function(y){var i=Object.create,m=Object.defineProperty,T=Object.defineProperties,M=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,v=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,t=(b,f,j)=>f in b?m(b,f,{enumerable:!0,configurable:!0,writable:!0,value:j}):b[f]=j,o=(b,f)=>{for(var j in f||(f={}))O.call(f,j)&&t(b,j,f[j]);if(S)for(var j of S(f))d.call(f,j)&&t(b,j,f[j]);return b},P=(b,f)=>T(b,D(f)),l=(b,f)=>{for(var j in f)m(b,j,{get:f[j],enumerable:!0})},s=(b,f,j,N)=>{if(f&&typeof f=="object"||typeof f=="function")for(let E of x(f))!O.call(b,E)&&E!==j&&m(b,E,{get:()=>f[E],enumerable:!(N=M(f,E))||N.enumerable});return b},e=(b,f,j)=>(j=b!=null?i(v(b)):{},s(f||!b||!b.__esModule?m(j,"default",{value:b,enumerable:!0}):j,b)),a=b=>s(m({},"__esModule",{value:!0}),b),p=(b,f,j)=>new Promise((N,E)=>{var I=C=>{try{J(j.next(C))}catch(U){E(U)}},B=C=>{try{J(j.throw(C))}catch(U){E(U)}},J=C=>C.done?N(C.value):Promise.resolve(C.value).then(I,B);J((j=j.apply(b,f)).next())}),u={};l(u,{default:()=>V}),h.exports=a(u);var r=e(n(59)),c=n(41),_=n(8),g=e(n(3843)),w=e(n(3844)),A=e(n(18)),F=n(1218),$=n(4060),z=n(4061),R=n(4062),H=n(4063),V={name:"SessionTool",components:{ToolTemplate:r.default},data(){return{storePath:this.$store.state.Tools.SessionTool,fileName:""}},computed:o({},(0,_.mapGetters)("Tools/SessionTool",Object.keys(g.default))),created(){this.$on("close",this.close),(0,$.register)(this.$store),(0,z.register)(this.$store),(0,R.register)(this.$store),(0,H.register)(this.$store)},methods:P(o({},(0,_.mapMutations)("Tools/SessionTool",Object.keys(w.default))),{close(){this.setActive(!1);const b=(0,c.getComponent)(this.storePath.id);b&&b.set("isActive",!1)},uploadFile(b){return p(this,null,function*(){const f=b.target.files.item(0),j=new FileReader;j.onload=N=>this.onFileLoad(N.target.result),f&&(j.readAsText(f),this.fileName=f?.name?f.name:"")})},onFileLoad(b){let f;try{f=JSON.parse(b)}catch{console.warn("Trying to parse given string into a json",f),this.$store.dispatch("Alerting/addSingleAlert",y.t("additional:modules.tools.sessionTool.errorOnLoad"))}(0,A.default)(f?.state)&&(this.observer.forEach(({key:j,setter:N})=>{typeof N=="function"&&Object.entries(f.state).forEach(E=>p(this,[E],function*([I,B]){I===j&&(yield N(B,f.state))}))}),this.close())},createFile(b,f){(0,F.downloadBlobPerNavigator)(b,f)||(0,F.downloadBlobPerHTML5)(b,f)},downloadFile(b){return p(this,null,function*(){var f;const j={state:{}};if(Array.isArray(b)){for(let N=0;N<b.length;N++){if(typeof((f=b[N])==null?void 0:f.getter)!="function")continue;const E=yield b[N].getter();j.state[b[N].key]=E}this.createFile(new Blob([JSON.stringify(j)],{type:"application/json;"}),"session.masterportal")}})},triggerUpload(){this.$refs.fileInput&&this.$refs.fileInput.click()}})}}).call(this,n(6))},4976:function(h,L,n){var y=Object.defineProperty,i=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,T=Object.prototype.hasOwnProperty,M=(d,t)=>{for(var o in t)y(d,o,{get:t[o],enumerable:!0})},D=(d,t,o,P)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of m(t))!T.call(d,l)&&l!==o&&y(d,l,{get:()=>t[l],enumerable:!(P=i(t,l))||P.enumerable});return d},x=d=>D(y({},"__esModule",{value:!0}),d),S={};M(S,{render:()=>v,staticRenderFns:()=>O}),h.exports=x(S);var v=function(){var t=this,o=t._self._c;return o("ToolTemplate",{attrs:{title:t.$t(t.name),icon:"bi-funnel-fill",active:t.active,"render-to-window":t.renderToWindow,"resizable-window":t.resizableWindow,"deactivate-gfi":t.deactivateGFI},scopedSlots:t._u([{key:"toolBody",fn:function(){return[o("div",{staticClass:"session-tool"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[t._v(`
                    `+t._s(t.$t("additional:modules.tools.sessionTool.uploadHeader"))+`
                `)]),t._v(" "),o("div",{staticClass:"card-body"},[o("input",{ref:"fileInput",staticClass:"d-none",attrs:{"aria-hidden":!0,type:"file",name:"fileUpload"},on:{change:t.uploadFile}}),t._v(" "),o("input",{staticClass:"btn btn-primary",attrs:{id:"fileUpload",type:"button","aria-label":t.$t("additional:modules.tools.sessionTool.buttonTextUpload"),value:t.$t("additional:modules.tools.sessionTool.buttonTextUpload")},on:{click:t.triggerUpload}}),t._v(" "),o("span",{staticClass:"ms-2"},[t._v(t._s(t.fileName))])])]),t._v(" "),o("div",{staticClass:"card mt-3"},[o("div",{staticClass:"card-header"},[t._v(`
                    `+t._s(t.$t("additional:modules.tools.sessionTool.downloadHeader"))+`
                `)]),t._v(" "),o("div",{staticClass:"card-body"},[o("input",{staticClass:"btn btn-primary",attrs:{id:"fileDownload",type:"button",value:t.$t("additional:modules.tools.sessionTool.buttonTextDownload")},on:{click:function(P){return P.preventDefault(),t.downloadFile(t.observer)}}})])])])]},proxy:!0}])})},O=[];v._withStripped=!0},5700:function(h,L,n){"use strict";n.r(L);var y=n(5701),i=n(4569);for(var m in i)["default"].indexOf(m)<0&&function(D){n.d(L,D,function(){return i[D]})}(m);var T=n(1),M=Object(T.a)(i.default,y.render,y.staticRenderFns,!1,null,null,null);L.default=M.exports},5701:function(h,L,n){"use strict";var y=n(4976),i=n.n(y);n.o(y,"render")&&n.d(L,"render",function(){return y.render}),n.o(y,"staticRenderFns")&&n.d(L,"staticRenderFns",function(){return y.staticRenderFns})}}]);
