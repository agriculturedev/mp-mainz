(window.webpackJsonp=window.webpackJsonp||[]).push([[429,422,427],{3649:function(L,x,g){(function(o){var d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,M=(e,c)=>{for(var v in c)d(e,v,{get:c[v],enumerable:!0})},A=(e,c,v,S)=>{if(c&&typeof c=="object"||typeof c=="function")for(let O of w(c))!h.call(e,O)&&O!==v&&d(e,O,{get:()=>c[O],enumerable:!(S=F(c,O))||S.enumerable});return e},_=e=>A(d({},"__esModule",{value:!0}),e),P={};M(P,{addByMouseHover:()=>C,addFolder:()=>i,addModelsByAttributes:()=>r,addVectorLayer:()=>f,closeAllExpandedFolder:()=>I,getCollection:()=>n,getItemByAttributes:()=>y,getItemsByAttributes:()=>a,getModelByAttributes:()=>p,getServiceUrl:()=>u,groupBy:()=>N,offSearchbar:()=>t,onFeaturesLoaded:()=>$,onResetFeatures:()=>E,onSearchbar:()=>j,onShowAllFeatures:()=>b,onShowFeaturesById:()=>l,removeItem:()=>B,removeModelsById:()=>s,renderTree:()=>m}),L.exports=_(P);function j(e){o.on("Searchbar","hit",e)}function t(){o.off("Searchbar","hit")}function u(e){return o.request("RestReader","getServiceById",e).get("url")}function l(e){o.on("ModelList","showFeaturesById",e)}function b(e){o.on("ModelList","showAllFeatures",e)}function p(e){return o.request("ModelList","getModelByAttributes",e)}function m(){o.trigger("ModelList","renderTree")}function I(){o.trigger("ModelList","closeAllExpandedFolder")}function s(e){o.trigger("ModelList","removeModelsById",e)}function r(e){o.trigger("ModelList","addModelsByAttributes",e)}function n(){return o.request("ModelList","getCollection")}function y(e){return o.request("Parser","getItemByAttributes",e)}function a(e){return o.request("Parser","getItemsByAttributes",e)}function i(e,c,v,S){o.trigger("Parser","addFolder",e,c,v,S)}function f(e,c,v,S,O,T,V){o.trigger("Parser","addVectorLayer",e,c,v,S,O,T,V)}function B(e){o.trigger("Parser","removeItem",e)}function $(e){o.on("VectorLayer","featuresLoaded",e)}function E(e){o.on("VectorLayer","resetFeatures",e)}function C(e){o.trigger("MouseHover","add",e)}function N(e,c){return o.request("Util","groupBy",e,c)}}).call(this,g(3))},3650:function(L,x,g){var o=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,h=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,A=(t,u,l,b)=>{if(u&&typeof u=="object"||typeof u=="function")for(let p of w(u))!M.call(t,p)&&p!==l&&d(t,p,{get:()=>u[p],enumerable:!(b=F(u,p))||b.enumerable});return t},_=(t,u,l)=>(l=t!=null?o(h(t)):{},A(u||!t||!t.__esModule?d(l,"default",{value:t,enumerable:!0}):l,t)),P=_(g(106));function j(t){var u;if(typeof t!="object"||t===null||typeof t.getSource!="function"||typeof((u=t.getSource())==null?void 0:u.getFeatures)!="function")return console.error("utils/layer/getLayerSource: layer must be a layer with a vector source",t),null;const l=t.getSource();return l.constructor===P.default?l.getSource():l}L.exports={getLayerSource:j}},3660:function(L,x,g){var o=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,h=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,A=(s,r,n,y)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of w(r))!M.call(s,a)&&a!==n&&d(s,a,{get:()=>r[a],enumerable:!(y=F(r,a))||y.enumerable});return s},_=(s,r,n)=>(n=s!=null?o(h(s)):{},A(r||!s||!s.__esModule?d(n,"default",{value:s,enumerable:!0}):n,s)),P=g(3650),j=_(g(316)),t=g(3649),u=_(g(318)),l=g(5);function b(s,r){s.forEachFeature(n=>{n.getGeometry()!==void 0&&!r.intersectsCoordinate((0,l.getCenter)(n.getGeometry().getExtent()))&&s.removeFeature(n)})}function p(s,r,n,y,a){const i=(0,P.getLayerSource)(s.layer),f=y.typ;i&&(i.clear(),i.getListeners("featuresloadend")&&delete i.listeners_.featuresloadend,f==="WFS"&&i.setUrl(n),f!=="VectorBase"?(i.refresh(),r&&i.on("featuresloadend",function(B){y.renderer==="webgl"&&u.afterLoading(B.target.getFeatures(),s.attributes.styleId,s.attributes.excludeTypesFromParsing,s.attributes.isPointLayer),b(B.target,r),a&&a.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource")})):(i.addFeatures(y.features),r&&(b(i,r),a&&a.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource"))))}function m(s){const r=this instanceof j.default?this:void 0,n=[...(0,t.getItemsByAttributes)({typ:"WFS",isBaseLayer:!1}),...(0,t.getItemsByAttributes)({typ:"GeoJSON",isBaseLayer:!1}),...(0,t.getItemsByAttributes)({typ:"VectorBase",isBaseLayer:!1}),...(0,t.getItemsByAttributes)({typ:"OAF",isBaseLayer:!1})];I(n,s,r)}function I(s,r,n){const y=(0,t.getCollection)(),a=n?.$store.getters["Maps/projectionCode"]||"EPSG:25832";s.forEach(function(i){const f=y.get({id:i.id});if(f){let B=`${f.attributes.url}?service=WFS&version=${f.attributes.version}&request=GetFeature&typeName=${f.attributes.featureType}&srsName=${a}`;B+=r?`&bbox=${r.getExtent().toString()},${a}`:"",f.set("bboxGeometry",r),p(f,r,B,i,n)}else i.bboxGeometry=r})}L.exports={setBBoxToGeom:m,setBboxGeometryToLayer:I}}}]);
