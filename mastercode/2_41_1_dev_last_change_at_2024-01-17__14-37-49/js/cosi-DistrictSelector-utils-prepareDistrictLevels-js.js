(window.webpackJsonp=window.webpackJsonp||[]).push([[291,409],{3651:function(j,C,v){var w=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,S=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty,N=(u,p)=>{for(var e in p)d(u,e,{get:p[e],enumerable:!0})},P=(u,p,e,t)=>{if(p&&typeof p=="object"||typeof p=="function")for(let r of E(p))!L.call(u,r)&&r!==e&&d(u,r,{get:()=>p[r],enumerable:!(t=F(p,r))||t.enumerable});return u},m=(u,p,e)=>(e=u!=null?w(S(u)):{},P(p||!u||!u.__esModule?d(e,"default",{value:u,enumerable:!0}):e,u)),A=u=>P(d({},"__esModule",{value:!0}),u),b={};N(b,{default:()=>f,getAllContainingDistricts:()=>l,getContainingDistrictForExtent:()=>a,getContainingDistrictForFeature:()=>o,intersect:()=>g,union:()=>c}),j.exports=A(b);var O=m(v(4171)),D=m(v(4169)),x=v(58),$=v(5);function l(u,p,e=!1){var t;const r=[];for(const n of u)for(const i of n.districts){const s=(t=i.adminFeature)==null?void 0:t.getGeometry(),y=p.getGeometry().getExtent();if((!s||s.intersectsExtent(y))&&(r.push({districtLevel:n.label,district:i}),!e))break}return e?r:r[0]}function o(u,p,e=!0,t=!1){const r=[];for(const n of u.districts){const i=n.adminFeature.getGeometry(),s=p.getGeometry().getExtent(),y=(0,$.getCenter)(s);if(t)i.intersectsExtent(s)&&r.push(e?n:n.getName());else if(i.intersectsCoordinate(y)){r.push(e?n:n.getName());break}}return t?r:r[0]}function a(u,p,e=!0,t=!1){const r=[];for(const n of u.districts)if(n.adminFeature.getGeometry().intersectsExtent(p)&&(r.push(e?n:n.getName()),!t))break;return t?r:r[0]}function c(u,p=!1,e=!1,t="EPSG:25832",r="EPSG:4326"){const n=new x.GeoJSON({dataProjection:r,featureProjection:t}),i=n.writeFeaturesObject(u);let s=i.features[0];for(let y=1;y<i.features.length;y++)s=(0,O.default)(s,i.features[y]);return p&&(s.properties={}),e&&(s=n.readFeature(s)),s}function g(u,p=!1,e=!1,t="EPSG:25832",r="EPSG:4326"){const n=new x.GeoJSON({dataProjection:r,featureProjection:t}),i=n.writeFeaturesObject(u);let s=i.features[0];for(let y=1;y<i.features.length;y++)s=(0,D.default)(s,i.features[y]);return s&&(p&&(s.properties={}),e&&(s=n.readFeature(s))),s}var f={intersect:g,union:c,getContainingDistrictForFeature:o}},3737:function(j,C,v){var w=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,S=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty,N=(e,t)=>{for(var r in t)d(e,r,{get:t[r],enumerable:!0})},P=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of E(t))!L.call(e,i)&&i!==r&&d(e,i,{get:()=>t[i],enumerable:!(n=F(t,i))||n.enumerable});return e},m=(e,t,r)=>(r=e!=null?w(S(e)):{},P(t||!e||!e.__esModule?d(r,"default",{value:e,enumerable:!0}):r,e)),A=e=>P(d({},"__esModule",{value:!0}),e),b=(e,t,r)=>new Promise((n,i)=>{var s=h=>{try{_(r.next(h))}catch(G){i(G)}},y=h=>{try{_(r.throw(h))}catch(G){i(G)}},_=h=>h.done?n(h.value):Promise.resolve(h.value).then(s,y);_((r=r.apply(e,t)).next())}),O={};N(O,{getAllDistrictsWithoutLayer:()=>o,getDistricts:()=>a,getLayerById:()=>c,getNameList:()=>f,getPropertyNameList:()=>u,getRawLayersById:()=>g,mapDistrictNames:()=>p,prepareDistrictLevels:()=>l}),j.exports=A(O);var D=v(4170),x=m(v(60)),$=v(3651);function l(e,t){return b(this,null,function*(){const r=o(e);r.length>0&&r.forEach((n,i)=>b(this,null,function*(){if(n.referenceLevel=i<e.length-1?e[i+1]:null,n.layer=c(t,n.layerId),n.stats.layers=g(n.stats.layerIds),n.layer.getSource().on("featuresloadend",()=>{n.districts=a(n),n.nameList=f(n.layer,n.keyOfAttrName)}),!n.propertyNameList){const s=yield u(n.stats.layers);n.propertyNameList||(n.propertyNameList=s)}}))})}function o(e){return Array.isArray(e)?e.filter(t=>typeof t.layer>"u"):(console.error(`prepareDistrictLevels.getAllDistrictsWithoutLayer: ${e} has to be defined and an array.`),[])}function a({layer:e,keyOfAttrName:t,label:r,duplicateDistrictNames:n,referenceLevel:i,layerId:s}){if(typeof e!="object"||e===null||Array.isArray(e)||typeof t!="string"||typeof r!="string")return console.error(`prepareDistrictLevels.getDistricts: ${e} has to be defined and an object. ${t} has to be defined and a string. ${r} has to be defined and a string`),[];const y=[];return e.getSource().getFeatures().forEach(function(_){y.push({adminFeature:_,statFeatures:[],originalStatFeatures:[],isSelected:!1,getId:()=>_.getId(),getLabel:()=>{const h=_.get(t);return n?.includes(h)?`${h} (${r.slice(0,-1)})`:h},getName:()=>_.get(t)&&_.get(t).indexOf("St. ")!==-1?_.get(t).replace(/ /,""):_.get(t),getReferencDistrictName:()=>i===null?null:s!=="6071"?_.get(i.keyOfAttrName):(0,$.getContainingDistrictForExtent)(i,_.getGeometry().getInteriorPoint().getExtent()).getName()})}),y}function c(e,t){if(!Array.isArray(e)||typeof t!="string"){console.error(`prepareDistrictLevels.getLayerById: ${e} has to be defined and an array. ${t} has to be defined and a string`);return}return e.find(r=>r.get("id")===t)}function g(e){if(!Array.isArray(e))return console.error(`prepareDistrictLevels.getRawLayersById: ${e} has to be defined and an array.`),[];const t=[];return e.forEach(r=>{const n=x.default.getLayerWhere({id:r});n&&t.push(n)}),t}function f(e,t){if(typeof e!="object"||e===null||Array.isArray(e)||typeof t!="string")return console.error(`prepareDistrictLevels.getNameList: ${e} has to be defined and an object. ${t} has to be defined and a string`),[];const r=[];return e.getSource().getFeatures().forEach(n=>{typeof n.get(t)<"u"&&(n.get(t).indexOf("St. ")!==-1&&n.set(t,n.get(t).replace(/ /,"")),r.push(n.get(t)))}),r.sort(),[...new Set(r)]}function u(e){return b(this,null,function*(){if(!Array.isArray(e))return console.error(`prepareDistrictLevels.getPropertyNameList: ${e} has to be defined and an array.`),[];const t=[];for(let r=0;r<e.length;r++){t[r]=[];const n=yield(0,D.describeFeatureType)(e[r].url),i=(0,D.getFeatureDescription)(n,e[r].featureType);i&&i.forEach(s=>{s.type.search("gml:")===-1&&t[r].push(s.name)})}return t})}function p(e,t){var r;return((r=t.districtNamesMap)==null?void 0:r[e])||e}},4169:function(j,C,v){var w=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,S=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty,N=(l,o)=>{for(var a in o)d(l,a,{get:o[a],enumerable:!0})},P=(l,o,a,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let g of E(o))!L.call(l,g)&&g!==a&&d(l,g,{get:()=>o[g],enumerable:!(c=F(o,g))||c.enumerable});return l},m=(l,o,a)=>(a=l!=null?w(S(l)):{},P(o||!l||!l.__esModule?d(a,"default",{value:l,enumerable:!0}):a,l)),A=l=>P(d({},"__esModule",{value:!0}),l),b={};N(b,{default:()=>$}),j.exports=A(b);var O=v(4158),D=v(4168),x=m(v(4185));function $(l,o,a){a===void 0&&(a={});var c=(0,D.getGeom)(l),g=(0,D.getGeom)(o),f=x.default.intersection(c.coordinates,g.coordinates);return f.length===0?null:f.length===1?(0,O.polygon)(f[0],a.properties):(0,O.multiPolygon)(f,a.properties)}},4170:function(j,C,v){var w=Object.create,d=Object.defineProperty,F=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,S=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty,N=(o,a)=>{for(var c in a)d(o,c,{get:a[c],enumerable:!0})},P=(o,a,c,g)=>{if(a&&typeof a=="object"||typeof a=="function")for(let f of E(a))!L.call(o,f)&&f!==c&&d(o,f,{get:()=>a[f],enumerable:!(g=F(a,f))||g.enumerable});return o},m=(o,a,c)=>(c=o!=null?w(S(o)):{},P(a||!o||!o.__esModule?d(c,"default",{value:o,enumerable:!0}):c,o)),A=o=>P(d({},"__esModule",{value:!0}),o),b={};N(b,{describeFeatureType:()=>$,getFeatureDescription:()=>l}),j.exports=A(b);var O=m(v(25)),D=m(v(1203)),x=m(v(1206));function $(o,a="1.1.0",c=void 0){if(typeof o!="string"){console.error(`api/wfs/describeFeatureType: Url is ${o}. Url has to be defined and a string.`);return}if(typeof a!="string"){console.error(`api/wfs/describeFeatureType: Version is ${a}. Version has to be a string. Default is 1.1.0.`);return}const g={params:{service:"WFS",request:"DescribeFeatureType",version:a,typeName:Array.isArray(c)?c.join(","):c,typeNames:Array.isArray(c)?c.join(","):c}};return O.default.get(o,g).then(f=>(0,D.default)(f.request.responseXML)).catch(f=>x.default.handleAxiosError(f,"api/wfs/describeFeatureType"))}function l(o,a){var c,g,f,u,p,e,t,r;if(typeof o!="object"||o===null||typeof a!="string"){console.error(`getFeatureDescription: ${o} has to be defined and an object (not null). ${a} has to be defined and a string`);return}const n=[],i=Array.isArray((c=o?.schema)==null?void 0:c.element)?(f=(g=o?.schema)==null?void 0:g.element)==null?void 0:f.find(s=>{var y;return((y=s.attributes)==null?void 0:y.name)===a}):(u=o?.schema)==null?void 0:u.element;if(typeof i>"u"){console.error(`getFeatureDescription: FeatureType "${i}" was not found`);return}if(!Array.isArray((r=(t=(e=(p=i.complexType)==null?void 0:p.complexContent)==null?void 0:e.extension)==null?void 0:t.sequence)==null?void 0:r.element)){console.error(`getFeatureDescription: No attributes were found for the FeatureType "${i}"`);return}return i.complexType.complexContent.extension.sequence.element.forEach(s=>{n.push(s.getAttributes())}),n}}}]);
