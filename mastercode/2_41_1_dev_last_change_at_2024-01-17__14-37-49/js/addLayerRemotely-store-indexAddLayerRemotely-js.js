(window.webpackJsonp=window.webpackJsonp||[]).push([[116,112,114,115],{3745:function(j,G,m){(function(r,h){var A=Object.defineProperty,L=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,C=(c,a)=>{for(var i in a)A(c,i,{get:a[i],enumerable:!0})},T=(c,a,i,l)=>{if(a&&typeof a=="object"||typeof a=="function")for(let g of I(a))!E.call(c,g)&&g!==i&&A(c,g,{get:()=>a[g],enumerable:!(l=L(a,g))||l.enumerable});return c},F=c=>T(A({},"__esModule",{value:!0}),c),w={};C(w,{getFeatureIds:()=>M,returnGeoJSONLayerObject:()=>D}),j.exports=F(w);function M(c){var a,i;const l=[],g=r.request("Map","getLayers").getArray().find(t=>t.get("id")===c);return typeof g>"u"?(console.warn(h.t("common:modules.featureViaURL.messages.layerNotFound")),l):(g.getSource().getFeatures().forEach(t=>{l.push(t.getId())}),l.length<1&&((i=(a=g.getSource())==null?void 0:a.getSource())!=null&&i.getFeatures().length)&&g.getSource().getSource().getFeatures().forEach(t=>{l.push(t.getId())}),l)}function D(c,a,i,l,g,t="showAll",u=void 0,n="default",O=void 0){const y={type:"layer",name:c,id:a,typ:"GeoJSON",geojson:i,transparent:!0,gfiAttributes:t,layerAttribution:"nicht vorhanden",legendURL:"",isBaseLayer:!1,isSelected:!0,isVisibleInTree:!0,cache:!1,datasets:[],urlIsVisible:!0,gfiTheme:n};return l!==void 0&&(y.styleId=l),g!==void 0&&(y.parentId=g),u!==void 0&&(y.clusterDistance=u),O!==void 0&&(y.mouseHoverField=O),y}}).call(this,m(3),m(6))},3746:function(j,G,m){(function(r,h){var A=Object.create,L=Object.defineProperty,I=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,C=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,F=(e,o)=>{for(var p in o)L(e,p,{get:o[p],enumerable:!0})},w=(e,o,p,x)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of E(o))!T.call(e,d)&&d!==p&&L(e,d,{get:()=>o[d],enumerable:!(x=I(o,d))||x.enumerable});return e},M=(e,o,p)=>(p=e!=null?A(C(e)):{},w(o||!e||!e.__esModule?L(p,"default",{value:e,enumerable:!0}):p,e)),D=e=>w(L({},"__esModule",{value:!0}),e),c={};F(c,{default:()=>u,getIfInExtent:()=>y,getParsedTitle:()=>b,getReversedData:()=>J,isVersionEnabled:()=>O,parseLayer:()=>n}),j.exports=D(c);var a=m(58),i=m(5),l=M(m(45)),g=M(m(25)),t=M(m(7));function u(e,o,p,x){if(e.includes("http:")){console.error("https required");return}r.trigger("Util","showLoader"),(0,g.default)({timeout:4e4,url:`${e}${e.includes("?")?"&":"?"}request=GetCapabilities&service=WMS`}).then(d=>d.data).then(d=>{var f,P;r.trigger("Util","hideLoader");try{const _=new a.WMSCapabilities,s=_.read(d),S=s?.version,V=O(S),U=(P=(f=r.request("Parser","getPortalConfig"))==null?void 0:f.mapView)==null?void 0:P.extent,W=t.default.getters["Maps/projection"].code_;let Z=y(s,U,W),B="external_",N=s;if(!V){const v=J(d);N=_.read(v),Z=y(N,U,W)}if(!Z){console.error("Layer is outside the map extent");return}r.request("Parser","getItemByAttributes",{id:"ExternalLayer"})===void 0&&(r.trigger("Parser","addFolder",p,"ExternalLayer","tree",0),r.trigger("ModelList","renderTree"),h("#Overlayer").parent().after(h("#ExternalLayer").parent())),B=B+b(N.Service.Title),r.trigger("Parser","addFolder",N.Service.Title,B,"ExternalLayer",0),o?o.forEach(v=>{const z={id:b(v.title),name:v.title,parentId:B,level:1,layers:v.name,url:e,version:S,transparent:v.layerTransparent?v.layerTransparent:!0,isSelected:v.layerOn?!0:v.layerOn,time:v.layerTime?v.layerTime:!1,infoFormat:v.infoFormat?v.infoFormat:"text/xml",styles:v.style?v.style:"",cache:!1,datasets:[],featureCount:3,format:"image/png",gfiAttributes:"showAll",gutter:"0",isBaseLayer:!1,layerAttribution:"nicht vorhanden",legendURL:"",maxScale:"2500000",minScale:"0",singleTile:!1,supported:["2D","3D"],tilesize:"512",typ:"WMS",type:"layer",urlIsVisible:!0};r.trigger("Parser","addItem",z),r.trigger("ModelList","addModelsByAttributes",{id:b(v.title)})}):N.Capability.Layer.Layer.forEach(v=>{n(v,B,1,S,e),r.trigger("ModelList","addModelsByAttributes",{id:b(v.Title)})}),x&&r.trigger("Map","zoomToExtent",{extent:Z}),r.trigger("ModelList","closeAllExpandedFolder")}catch(_){console.error(_)}},d=>{r.trigger("Util","hideLoader"),console.error(d)})}function n(e,o,p,x,d){Object.prototype.hasOwnProperty.call(e,"Layer")?(e.Layer.forEach(f=>{n(f,b(e.Title),p+1)}),r.trigger("Parser","addFolder",e.Title,b(e.Title),o,p,!1,!1,e.invertLayerOrder)):r.trigger("Parser","addLayer",e.Title,b(e.Title),o,p,e.Name,d,x,{isSelected:!0})}function O(e){if(typeof e!="string")return!1;const o=e.split(".");return parseInt(o[0],10)<1?!1:!(o.length>=2&&parseInt(o[0],10)===1&&parseInt(o[1],10)<3)}function y(e,o,p){var x,d,f;const P=(f=(d=(x=e?.Capability)==null?void 0:x.Layer)==null?void 0:d.BoundingBox)==null?void 0:f.filter(s=>s?.crs&&s?.crs.includes("EPSG")&&l.default.getProjection(s?.crs)!==void 0&&Array.isArray(s?.extent)&&s?.extent.length===4);let _;if(Array.isArray(P)&&P.length){let s=[],S=[];return P.forEach(V=>{V.crs===p&&(s=[V.extent[0],V.extent[1]],S=[V.extent[2],V.extent[3]])}),!s.length&&!S.length&&(s=l.default.transformCoord(P[0].crs,p,[P[0].extent[0],P[0].extent[1]]),S=l.default.transformCoord(P[0].crs,p,[P[0].extent[2],P[0].extent[3]])),_=[s[0],s[1],S[0],S[1]],!Array.isArray(o)||o.length!==4||(0,i.intersects)(o,_)?_:!1}return!0}function J(e){let o=new XMLSerializer().serializeToString(e);return o=o.replace(/<SRS>/g,"<CRS>").replace(/<\/SRS>/g,"</CRS>").replace(/SRS=/g,"CRS="),o=new DOMParser().parseFromString(o,"text/xml"),o}function b(e){return String(e).replace(/\s+/g,"-").replace(/\//g,"-").replace(/:/g,"-").replace(/\(/g,"-").replace(/\)/g,"-")}}).call(this,m(3),m(14))},3859:function(j,G,m){(function(r,h){var A=Object.create,L=Object.defineProperty,I=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,C=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,F=(t,u)=>{for(var n in u)L(t,n,{get:u[n],enumerable:!0})},w=(t,u,n,O)=>{if(u&&typeof u=="object"||typeof u=="function")for(let y of E(u))!T.call(t,y)&&y!==n&&L(t,y,{get:()=>u[y],enumerable:!(O=I(u,y))||O.enumerable});return t},M=(t,u,n)=>(n=t!=null?A(C(t)):{},w(u||!t||!t.__esModule?L(n,"default",{value:t,enumerable:!0}):n,t)),D=t=>w(L({},"__esModule",{value:!0}),t),c={};F(c,{default:()=>g}),j.exports=D(c);var a=m(3745),i=M(m(3746)),l=M(m(78)),g={addGeoJson({rootState:t},{name:u,id:n,geoJSON:O,styleId:y,folderName:J,gfiAttributes:b,zoomTo:e=!0,clusterDistance:o=void 0,gfiTheme:p="default",mouseHoverField:x=void 0}){const d=r.request("Parser","getTreeType"),f=mapCollection.getMap("2D"),P=f?f.getLayers().getArray().find(S=>S.get("id")===n):void 0;let _="",s={};P?(f?.removeLayer(P),r.trigger("ModelList","removeModelsById",n),r.trigger("ModelList","removeLayerById",n),r.trigger("Parser","removeItem",n)):O?.styles&&l.default.addToStyleList(O.styles),d==="custom"||d==="default"?(r.request("Parser","getItemByAttributes",{id:"ExternalLayer"})===void 0&&(r.trigger("Parser","addFolder",J,"ExternalLayer","tree",0),r.trigger("ModelList","renderTree"),h("#Overlayer").parent().after(h("#ExternalLayer").parent())),_="ExternalLayer"):_="tree",s=(0,a.returnGeoJSONLayerObject)(u,n,O,y,_,b,o,p,x),r.trigger("Parser","addItem",s),r.trigger("ModelList","addModelsByAttributes",{id:n}),r.trigger("ModelList","renderTree"),x&&(t.MouseHover.mouseHoverLayers.push(s),t.MouseHover.mouseHoverInfos.push({id:s.id,mouseHoverField:s.mouseHoverField})),d==="light"&&r.trigger("ModelList","refreshLightTree"),e&&r.trigger("Map","zoomToFilteredFeatures",(0,a.getFeatureIds)(n),n),window.addEventListener("touchmove",()=>f.getView().getZoom()<f.getView().getMinZoom()?(f.getView().setZoom(f.getView().getMinZoom()),!1):f.getView().getZoom()>f.getView().getMaxZoom()?(f.getView().setZoom(f.getView().getMaxZoom()),!1):!0)},addWMS(t,{url:u,layersToLoad:n=void 0,folderName:O="Externe Daten",zoomTo:y=!1}){(0,i.default)(u,n,O,y)},toggleLayerVisibility(t,{layerId:u}){const n=r.request("ModelList","getModelByAttributes",{id:u});n&&r.trigger("ModelList","setModelAttributesById",u,{isSelected:!n.get("isSelected")})}}}).call(this,m(3),m(14))},3898:function(j,G,m){var r=Object.create,h=Object.defineProperty,A=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,I=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,C=(a,i)=>{for(var l in i)h(a,l,{get:i[l],enumerable:!0})},T=(a,i,l,g)=>{if(i&&typeof i=="object"||typeof i=="function")for(let t of L(i))!E.call(a,t)&&t!==l&&h(a,t,{get:()=>i[t],enumerable:!(g=A(i,t))||g.enumerable});return a},F=(a,i,l)=>(l=a!=null?r(I(a)):{},T(i||!a||!a.__esModule?h(l,"default",{value:a,enumerable:!0}):l,a)),w=a=>T(h({},"__esModule",{value:!0}),a),M={};C(M,{default:()=>c}),j.exports=w(M);var D=F(m(3859)),c={namespaced:!0,actions:D.default}}}]);
