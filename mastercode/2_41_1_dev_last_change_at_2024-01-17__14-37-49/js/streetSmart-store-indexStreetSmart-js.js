(window.webpackJsonp=window.webpackJsonp||[]).push([[524,522,523,525,526,527],{3700:function(b,E){var d=Object.defineProperty,m=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,M=Object.prototype.hasOwnProperty,S=(l,c)=>{for(var u in c)d(l,u,{get:c[u],enumerable:!0})},O=(l,c,u,f)=>{if(c&&typeof c=="object"||typeof c=="function")for(let P of p(c))!M.call(l,P)&&P!==u&&d(l,P,{get:()=>c[P],enumerable:!(f=m(c,P))||f.enumerable});return l},A=l=>O(d({},"__esModule",{value:!0}),l),g={};S(g,{default:()=>_}),b.exports=A(g);var _={active:!1,id:"streetsmart",name:"additional:menu.tools.streetsmart",icon:"bi-camera-fill",renderToWindow:!1,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!1,initialWidth:500,serviceId:"streetsmart",streetsmartAPIVersion:"22.2",reactVersion:"16.12.0",timeTravelVisible:!1,toggle3DCursor:!1,toggleAddressesVisible:!1,cycloLayerID:null,styleId:"defaultMapMarkerPoint",mapMarkerStyleId:"defaultMapMarkerPoint",lastCoordinates:[],lastYaw:0}},3765:function(b,E){var d=Object.defineProperty,m=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,M=Object.prototype.hasOwnProperty,S=(_,l)=>{for(var c in l)d(_,c,{get:l[c],enumerable:!0})},O=(_,l,c,u)=>{if(l&&typeof l=="object"||typeof l=="function")for(let f of p(l))!M.call(_,f)&&f!==c&&d(_,f,{get:()=>l[f],enumerable:!(u=m(l,f))||u.enumerable});return _},A=_=>O(d({},"__esModule",{value:!0}),_),g={};S(g,{default:()=>I}),b.exports=A(g);function I(_){return new Promise((l,c)=>{const u=document.createElement("script");u.type="text/javascript",u.onload=l,u.onerror=c,u.src=_,document.head.append(u)})}},3845:function(b,E,d){var m=Object.create,p=Object.defineProperty,M=Object.defineProperties,S=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,I=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(a,i,s)=>i in a?p(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,u=(a,i)=>{for(var s in i||(i={}))_.call(i,s)&&c(a,s,i[s]);if(g)for(var s of g(i))l.call(i,s)&&c(a,s,i[s]);return a},f=(a,i)=>M(a,O(i)),P=(a,i)=>{for(var s in i)p(a,s,{get:i[s],enumerable:!0})},w=(a,i,s,v)=>{if(i&&typeof i=="object"||typeof i=="function")for(let y of A(i))!_.call(a,y)&&y!==s&&p(a,y,{get:()=>i[y],enumerable:!(v=S(i,y))||v.enumerable});return a},V=(a,i,s)=>(s=a!=null?m(I(a)):{},w(i||!a||!a.__esModule?p(s,"default",{value:a,enumerable:!0}):s,a)),j=a=>w(p({},"__esModule",{value:!0}),a),o={};P(o,{default:()=>e}),b.exports=j(o);var n=d(10),t=V(d(3700)),e=f(u({},(0,n.generateSimpleGetters)(t.default)),{currentLocale(a,i,s,v){let y=v["Language/currentLocale"];return y==="en"?y="en-US":y==="pt"?y="pt-BR":y="de",y}})},3846:function(b,E,d){var m=Object.create,p=Object.defineProperty,M=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,_=(t,r,e)=>r in t?p(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,l=(t,r)=>{for(var e in r||(r={}))g.call(r,e)&&_(t,e,r[e]);if(O)for(var e of O(r))I.call(r,e)&&_(t,e,r[e]);return t},c=(t,r)=>{for(var e in r)p(t,e,{get:r[e],enumerable:!0})},u=(t,r,e,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of S(r))!g.call(t,i)&&i!==e&&p(t,i,{get:()=>r[i],enumerable:!(a=M(r,i))||a.enumerable});return t},f=(t,r,e)=>(e=t!=null?m(A(t)):{},u(r||!t||!t.__esModule?p(e,"default",{value:t,enumerable:!0}):e,t)),P=t=>u(p({},"__esModule",{value:!0}),t),w={};c(w,{default:()=>n}),b.exports=P(w);var V=d(10),j=f(d(3700)),n=l({},(0,V.generateSimpleMutations)(j.default))},3881:function(b,E,d){(function(m,p){var M=Object.create,S=Object.defineProperty,O=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,g=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,_=(o,n)=>{for(var t in n)S(o,t,{get:n[t],enumerable:!0})},l=(o,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of A(n))!I.call(o,e)&&e!==t&&S(o,e,{get:()=>n[e],enumerable:!(r=O(n,e))||r.enumerable});return o},c=(o,n,t)=>(t=o!=null?M(g(o)):{},l(n||!o||!o.__esModule?S(t,"default",{value:o,enumerable:!0}):t,o)),u=o=>l(S({},"__esModule",{value:!0}),o),f=(o,n,t)=>new Promise((r,e)=>{var a=v=>{try{s(t.next(v))}catch(y){e(y)}},i=v=>{try{s(t.throw(v))}catch(y){e(y)}},s=v=>v.done?r(v.value):Promise.resolve(v.value).then(a,i);s((t=t.apply(o,n)).next())}),P={};_(P,{default:()=>j}),b.exports=u(P);var w=c(d(3765)),j={loadPackages({state:o},n){const t=`https://streetsmart.cyclomedia.com/api/v${o.streetsmartAPIVersion}/StreetSmartApi.js`,r=`https://unpkg.com/react@${o.reactVersion}/umd/react.production.min.js`,e=`https://unpkg.com/react-dom@${o.reactVersion}/umd/react-dom.production.min.js`;try{(0,w.default)(r).then(()=>(0,w.default)(e)).then(()=>(0,w.default)(t)).then(()=>n?n():null).catch(a=>console.error("loading of package failed:",a))}catch(a){console.error("loading of package failed:",a)}},setPosition({state:o,commit:n,dispatch:t,rootGetters:r},e){if(o.active&&e){const a=r["Maps/getView"].getProjection().getCode(),i=!e[0]||!e[1]?e.coordinate:[e[0],e[1]];try{t("MapMarker/placingPointMarker",i,{root:!0}),StreetSmartApi.open({coordinate:i},{viewerType:[StreetSmartApi.ViewerType.PANORAMA],srs:a,panoramaViewer:{replace:!0,timeTravelVisible:o.timeTravelVisible,closable:!1,recordingsVisible:!0}}).then(s=>{if(s&&s[0]){n("setLastCoordinates",i);const v=StreetSmartApi.getViewers();v[0].toggle3DCursor(o.toggle3DCursor),v[0].toggleAddressesVisible(o.toggleAddressesVisible)}else t("Alerting/addSingleAlert",m.t("additional:modules.tools.streetsmart.noData"),{root:!0}),t("MapMarker/placingPointMarker",o.lastCoordinates,{root:!0})}).catch(s=>{console.warn("Error opening panorama viewer: "+s),t("Alerting/addSingleAlert",m.t("additional:modules.tools.streetsmart.createViewFailed"),{root:!0})})}catch(s){console.error("Create streetSmart view failed: ",s),t("Alerting/addSingleAlert",m.t("additional:modules.tools.streetsmart.createViewFailed"),{root:!0})}}},initApi({state:o,dispatch:n,getters:t,rootGetters:r}){const e=r.getRestServiceById(o.serviceId),a=r["Maps/getView"].getProjection().getCode(),i=t.currentLocale;if(e){const s={targetElement:document.getElementById("streetsmart"),username:e.params.username,password:e.params.password,apiKey:e.params.apiKey,srs:e.params.srs?e.params.srs:a,locale:i||e.params.locale};typeof StreetSmartApi>"u"?(console.warn("Cannot start Streetsmart-View. StreetSmartApi is not available."),n("Alerting/addSingleAlert",m.t("additional:modules.tools.streetsmart.createViewFailedMoreInfo"),{root:!0})):StreetSmartApi.init(s).then(function(){n("onInitSuccess"),o.cycloLayerID&&p.trigger("ModelList","showModelInTree",o.cycloLayerID)}).catch(function(v){console.warn("Failed to create component(s) through API: "+v),n("Alerting/addSingleAlert",m.t("additional:modules.tools.streetsmart.createViewFailedMoreInfo"),{root:!0})})}else console.warn("Cannot start Streetsmart-View. No service in rest-services found for serviceId ",o.serviceId),n("Alerting/addSingleAlert",m.t("additional:modules.tools.streetsmart.createViewFailedMoreInfo"),{root:!0})},destroyApi({state:o,dispatch:n,commit:t}){n("MapMarker/removePointMarker",null,{root:!0}),t("MapMarker/setPointStyleId",o.mapMarkerStyleId,{root:!0}),n("removeListener"),StreetSmartApi.destroy({targetElement:document.getElementById("streetsmart")}),o.cycloLayerID&&p.trigger("ModelList","setModelAttributesById",o.cycloLayerID,{isSelected:!1})},moveAndRotateMarker(o,n){return f(this,arguments,function*({dispatch:t,getters:r},e){yield t("MapMarker/placingPointMarker",e.detail.recording.xyz,{root:!0}),t("MapMarker/rotatePointMarker",e.detail.recording.relativeYaw+r.lastYaw,{root:!0}),p.trigger("MapView","setCenter",[e.detail.recording.xyz[0],e.detail.recording.xyz[1]])})},rotateMarker({commit:o,dispatch:n},t){const r=StreetSmartApi.getViewers(),e=r[0].getRecording();n("MapMarker/placingPointMarker",e.xyz,{root:!0}),o("setLastCoordinates",e.xyz),n("MapMarker/rotatePointMarker",t.detail.yaw,{root:!0}),o("setLastYaw",t.detail.yaw)},addListener({dispatch:o}){StreetSmartApi.on(StreetSmartApi.Events.viewer.VIEWER_ADDED,n=>{n.detail.viewer.on(StreetSmartApi.Events.panoramaViewer.RECORDING_CLICK,function(t){o("moveAndRotateMarker",t)}),n.detail.viewer.on(StreetSmartApi.Events.panoramaViewer.VIEW_CHANGE,function(t){o("rotateMarker",t)}),n.detail.viewer.on(StreetSmartApi.Events.panoramaViewer.TILE_LOAD_ERROR,function(t){console.warn(t)})})},removeListener({dispatch:o}){typeof StreetSmartApi<"u"&&typeof StreetSmartApi.on=="function"&&StreetSmartApi.on(StreetSmartApi.Events.viewer.VIEWER_ADDED,n=>{n.detail.viewer.off(StreetSmartApi.Events.panoramaViewer.RECORDING_CLICK,function(t){o("moveAndRotateMarker",t)}),n.detail.viewer.off(StreetSmartApi.Events.panoramaViewer.VIEW_CHANGE,function(t){o("rotateMarker",t)}),n.detail.viewer.off(StreetSmartApi.Events.panoramaViewer.TILE_LOAD_ERROR,function(t){console.warn(t)})})},onInitSuccess({state:o,dispatch:n,commit:t,rootGetters:r,rootState:e}){n("addListener"),t("setMapMarkerStyleId",e.MapMarker.pointStyleId),t("MapMarker/setPointStyleId",o.styleId,{root:!0}),n("setPosition",r["Maps/getView"].getCenter())}}}).call(this,d(6),d(3))},4074:function(b,E,d){var m=Object.create,p=Object.defineProperty,M=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,_=(r,e,a)=>e in r?p(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,l=(r,e)=>{for(var a in e||(e={}))g.call(e,a)&&_(r,a,e[a]);if(O)for(var a of O(e))I.call(e,a)&&_(r,a,e[a]);return r},c=(r,e)=>{for(var a in e)p(r,a,{get:e[a],enumerable:!0})},u=(r,e,a,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S(e))!g.call(r,s)&&s!==a&&p(r,s,{get:()=>e[s],enumerable:!(i=M(e,s))||i.enumerable});return r},f=(r,e,a)=>(a=r!=null?m(A(r)):{},u(e||!r||!r.__esModule?p(a,"default",{value:r,enumerable:!0}):a,r)),P=r=>u(p({},"__esModule",{value:!0}),r),w={};c(w,{default:()=>t}),b.exports=P(w);var V=f(d(3881)),j=f(d(3846)),o=f(d(3845)),n=f(d(3700)),t={namespaced:!0,state:l({},n.default),mutations:j.default,actions:V.default,getters:o.default}}}]);
