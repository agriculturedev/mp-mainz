(window.webpackJsonp=window.webpackJsonp||[]).push([[84,194,195,467,468,469,470,471],{248:function(j,A,i){var _=Object.create,c=Object.defineProperty,m=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,S=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,M=(o,l)=>{for(var s in l)c(o,s,{get:l[s],enumerable:!0})},D=(o,l,s,a)=>{if(l&&typeof l=="object"||typeof l=="function")for(let e of w(l))!k.call(o,e)&&e!==s&&c(o,e,{get:()=>l[e],enumerable:!(a=m(l,e))||a.enumerable});return o},b=(o,l,s)=>(s=o!=null?_(S(o)):{},D(l||!o||!o.__esModule?c(s,"default",{value:o,enumerable:!0}):s,o)),P=o=>D(c({},"__esModule",{value:!0}),o),f={};M(f,{default:()=>T}),j.exports=P(f);var n=b(i(5643)),p=b(i(4037)),y=b(i(4038)),h=b(i(4039)),T={component:n.default,store:p.default,locales:{de:y.default,en:h.default}}},3691:function(j,A){var i=Object.defineProperty,_=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,m=Object.prototype.hasOwnProperty,w=(P,f)=>{for(var n in f)i(P,n,{get:f[n],enumerable:!0})},S=(P,f,n,p)=>{if(f&&typeof f=="object"||typeof f=="function")for(let y of c(f))!m.call(P,y)&&y!==n&&i(P,y,{get:()=>f[y],enumerable:!(p=_(f,y))||p.enumerable});return P},k=P=>S(i({},"__esModule",{value:!0}),P),M={};w(M,{default:()=>b}),j.exports=k(M);var b={id:"OktagonKartenportal",active:!1,name:"Georeferenzierung",icon:"bi-bullseye",renderToWindow:!1,resizableWindow:!0,isVisibleInMenu:!0,deactivateGFI:!0,initialWidth:400,initialWidthMobile:300,backURL:"",zoomLevel:9,returnURL:"",address:"",submitURL:"",layerIds:["186","19110"],submitObject:{}}},3832:function(j,A,i){var _=Object.create,c=Object.defineProperty,m=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,k=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,b=(a,e,t)=>e in a?c(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,P=(a,e)=>{for(var t in e||(e={}))M.call(e,t)&&b(a,t,e[t]);if(S)for(var t of S(e))D.call(e,t)&&b(a,t,e[t]);return a},f=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})},n=(a,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of w(e))!M.call(a,u)&&u!==t&&c(a,u,{get:()=>e[u],enumerable:!(r=m(e,u))||r.enumerable});return a},p=(a,e,t)=>(t=a!=null?_(k(a)):{},n(e||!a||!a.__esModule?c(t,"default",{value:a,enumerable:!0}):t,a)),y=a=>n(c({},"__esModule",{value:!0}),a),h={};f(h,{default:()=>s}),j.exports=y(h);var T=i(10),o=p(i(3691)),s=P({},(0,T.generateSimpleMutations)(o.default))},3875:function(j,A,i){var _=Object.create,c=Object.defineProperty,m=Object.defineProperties,w=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,f=(r,u,d)=>u in r?c(r,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[u]=d,n=(r,u)=>{for(var d in u||(u={}))b.call(u,d)&&f(r,d,u[d]);if(M)for(var d of M(u))P.call(u,d)&&f(r,d,u[d]);return r},p=(r,u)=>m(r,S(u)),y=(r,u)=>{for(var d in u)c(r,d,{get:u[d],enumerable:!0})},h=(r,u,d,E)=>{if(u&&typeof u=="object"||typeof u=="function")for(let C of k(u))!b.call(r,C)&&C!==d&&c(r,C,{get:()=>u[C],enumerable:!(E=w(u,C))||E.enumerable});return r},T=(r,u,d)=>(d=r!=null?_(D(r)):{},h(u||!r||!r.__esModule?c(d,"default",{value:r,enumerable:!0}):d,r)),o=r=>h(c({},"__esModule",{value:!0}),r),l={};y(l,{default:()=>t}),j.exports=o(l);var s=i(10),a=T(i(3691)),t=p(n({},(0,s.generateSimpleGetters)(a.default)),{createSubmitURL:r=>u=>{let d=r.returnURL;return d&&d.includes("?")?d+="&":d+="?",Object.keys(u).forEach((E,C)=>{C>0&&(d+="&"),d+=E+"="+u[E]}),d},getParameterValue:()=>r=>r.result[r.property],hasDistrict:()=>r=>{var u,d;let E,C="";return Object.prototype.hasOwnProperty.call(Config,"zoomTo")&&((u=Config.zoomTo[0])!=null&&u.allowedValues)&&(E=(d=Config.zoomTo[0])==null?void 0:d.allowedValues),E&&r&&E.includes(r.toUpperCase())&&(C=r.toUpperCase()),C}})},3876:function(j,A,i){(function(_){var c=Object.create,m=Object.defineProperty,w=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,k=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=(o,l)=>{for(var s in l)m(o,s,{get:l[s],enumerable:!0})},b=(o,l,s,a)=>{if(l&&typeof l=="object"||typeof l=="function")for(let e of S(l))!M.call(o,e)&&e!==s&&m(o,e,{get:()=>l[e],enumerable:!(a=w(l,e))||a.enumerable});return o},P=(o,l,s)=>(s=o!=null?c(k(o)):{},b(l||!o||!o.__esModule?m(s,"default",{value:o,enumerable:!0}):s,o)),f=o=>b(m({},"__esModule",{value:!0}),o),n={};D(n,{default:()=>T}),j.exports=f(n);var p=i(453),y=P(i(284)),h=P(i(25)),T={addCoordinatesToSubmitObject({getters:o,commit:l},s){const a=o.submitObject;a.KoordinateX=(0,y.default)(s[0]).replace(/\./g,""),a.KoordinateY=(0,y.default)(s[1]).replace(/\./g,""),l("setSubmitObject",a)},alertWrongInputParameters({dispatch:o}){o("Alerting/addSingleAlert","<strong>"+_.t("additional:modules.tools.oktagon.wrongAddressParameter")+"</strong><br><small>"+_.t("additional:modules.tools.oktagon.wrongAddressParameterMessage")+"</small>",{root:!0})},createAddress({dispatch:o,commit:l,getters:s},a){const e={searchStreets:!0};let t=s.getParameterValue({result:a,property:"STRASSE"});a?.HAUSNUMMER&&a.HAUSNUMMER.length>0&&(t+=" "+s.getParameterValue({result:a,property:"HAUSNUMMER"}),e.searchAddress=!0),a?.ZUSATZ&&(t+=s.getParameterValue({result:a,property:"ZUSATZ"}),e.searchAddress=!0),l("setAddress",t.toUpperCase()),o("startSearch",{searchInput:t,searchParams:e})},handleResponse({dispatch:o,getters:l},s){var a;const e=s.find(t=>t.name.toUpperCase()===l.address);o("zoomToAddress",(a=e?.geometry)==null?void 0:a.coordinates)},initURLParameter({dispatch:o,commit:l,getters:s}){const a={};if(new URLSearchParams(window.location.search).forEach(function(t,r){r==="rueckurl"&&l("setReturnURL",t),a[r.toUpperCase()]=decodeURIComponent(t.toUpperCase())}),a?.BEZIRK){const t=s.getParameterValue({result:a,property:"BEZIRK"});let r="";r=s.hasDistrict(t),r===""?o("Alerting/addSingleAlert","<strong>"+_.t("additional:modules.tools.oktagon.wrongDistrictName")+"</strong><br><small>"+_.t("additional:modules.tools.oktagon.wrongDistrictNameMessage")+t+".</small>",{root:!0}):(l("ZoomTo/setZoomToGeometry",r,{root:!0}),o("ZoomTo/zoomToFeatures",{},{root:!0}))}else a?.STRASSE&&o("createAddress",a)},parseXML({getters:o,commit:l},s){const a=Array.from(s.getElementsByTagName("FIELDS")).length>0?Array.from(s.getElementsByTagName("FIELDS")):Array.from(s.getElementsByTagName("app:baubloecke")),e=o.submitObject;a.forEach(t=>{t.getElementsByTagName("app:baublockbezeichnung").length>0&&(e.Baublock=t.getElementsByTagName("app:baublockbezeichnung")[0].textContent),t.getAttribute("Gemarkungsname")&&(e.Gemarkungsname=t.getAttribute("Gemarkungsname")),t.getAttribute("Gemarkungsnummer")&&(e.Gemarkungsnummer=t.getAttribute("Gemarkungsnummer")),t.getAttribute("Flurstuecksnummer")&&(e.Flurstuecksnummer=t.getAttribute("Flurstuecksnummer"))}),l("setSubmitURL",o.createSubmitURL(e)),l("setSubmitObject",{}),l("setSubmitObject",e)},requestALKISWMS({dispatch:o},l){(0,h.default)({method:"get",url:l,responseType:"document"}).then(s=>{o("parseXML",s.data)}).catch(s=>{console.warn("The fetch of the data failed with the following error message: "+s),o("Alerting/addSingleAlert","<strong>"+_.t("additional:modules.tools.oktagon.fetchFailed")+"</strong> <br><small>"+_.t("additional:modules.tools.oktagon.fetchFailedMessage")+"</small>")})},startSearch({dispatch:o},l){(0,p.search)(l.searchInput,l.searchParams,!0).then(s=>{o("handleResponse",s)}).catch(s=>{String(s)!=="AbortError: The user aborted a request."&&console.error(s)})},zoomToAddress({dispatch:o},l){const s=[];l&&l!==null&&Array.isArray(l)?(l.forEach(a=>{s.push(parseFloat(a))}),o("Maps/setCenter",s,{root:!0}),o("Maps/setZoomLevel",9,{root:!0}),o("MapMarker/placingPointMarker",s,{root:!0})):o("alertWrongInputParameters")}}}).call(this,i(6))},4037:function(j,A,i){var _=Object.create,c=Object.defineProperty,m=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,k=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&b(e,r,t[r]);if(S)for(var r of S(t))D.call(t,r)&&b(e,r,t[r]);return e},f=(e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})},n=(e,t,r,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let d of w(t))!M.call(e,d)&&d!==r&&c(e,d,{get:()=>t[d],enumerable:!(u=m(t,d))||u.enumerable});return e},p=(e,t,r)=>(r=e!=null?_(k(e)):{},n(t||!e||!e.__esModule?c(r,"default",{value:e,enumerable:!0}):r,e)),y=e=>n(c({},"__esModule",{value:!0}),e),h={};f(h,{default:()=>a}),j.exports=y(h);var T=p(i(3875)),o=p(i(3832)),l=p(i(3876)),s=p(i(3691)),a={namespaced:!0,state:P({},s.default),mutations:o.default,actions:l.default,getters:T.default}},4038:function(j){j.exports=JSON.parse('{"modules":{"tools":{"oktagon":{"fetchFailed":"Die Adressabfrage konnte nicht durchgef\xFChrt werden.","fetchFailedMessage":"Details: Ein ben\xF6tigter Dienst antwortet nicht.","wrongDistrictName":"Der parametrisierte Aufruf des Portals ist leider fehlgeschlagen!","wrongDistrictNameMessage":"Folgender Bezirk konnte nicht gefunden werden: ","wrongAddressParameter":"Der parametrisierte Aufruf des Portals ist leider fehlgeschlagen!","wrongAddressParameterMessage":"Es konnte keine Adresse gefunden werde. Bitte pr\xFCfen Sie die Eingabeparameter.","send":"Senden","cancel":"Abbrechen"}}}}')},4039:function(j){j.exports=JSON.parse('{"modules":{"tools":{"oktagon":{"fetchFailed":"Address query could not be performed","fetchFailedMessage":"details: a required service is not responding","wrongDistrictName":"Sorry, the parameterized call to the portal failed!","wrongDistrictNameMessage":"The following district could not be found: ","wrongAddressParameter":"The parameterized call of the portal has unfortunately failed!","wrongAddressParameterMessage":"No address could be found. Please check the input parameters.","send":"Send","cancel":"Cancel"}}}}')},4543:function(j,A,i){"use strict";i.r(A);var _=i(4544),c=i.n(_);for(var m in _)["default"].indexOf(m)<0&&function(w){i.d(A,w,function(){return _[w]})}(m);A.default=c.a},4544:function(j,A,i){(function(_){var c=Object.create,m=Object.defineProperty,w=Object.defineProperties,S=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,b=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,n=(g,v,O)=>v in g?m(g,v,{enumerable:!0,configurable:!0,writable:!0,value:O}):g[v]=O,p=(g,v)=>{for(var O in v||(v={}))P.call(v,O)&&n(g,O,v[O]);if(D)for(var O of D(v))f.call(v,O)&&n(g,O,v[O]);return g},y=(g,v)=>w(g,k(v)),h=(g,v)=>{for(var O in v)m(g,O,{get:v[O],enumerable:!0})},T=(g,v,O,N)=>{if(v&&typeof v=="object"||typeof v=="function")for(let K of M(v))!P.call(g,K)&&K!==O&&m(g,K,{get:()=>v[K],enumerable:!(N=S(v,K))||N.enumerable});return g},o=(g,v,O)=>(O=g!=null?c(b(g)):{},T(v||!g||!g.__esModule?m(O,"default",{value:g,enumerable:!0}):O,g)),l=g=>T(m({},"__esModule",{value:!0}),g),s=(g,v,O)=>new Promise((N,K)=>{var x=L=>{try{U(O.next(L))}catch(I){K(I)}},R=L=>{try{U(O.throw(L))}catch(I){K(I)}},U=L=>L.done?N(L.value):Promise.resolve(L.value).then(x,R);U((O=O.apply(g,v)).next())}),a={};h(a,{default:()=>C}),j.exports=l(a);var e=i(8),t=o(i(3832)),r=o(i(59)),u=i(41),d=i(2104),E=o(i(374)),C={name:"OktagonKartenportal",components:{ToolTemplate:r.default},computed:p({},(0,e.mapGetters)("Tools/OktagonKartenportal",["active","deactivateGFI","icon","layerIds","name","submitURL","resizableWindow","renderToWindow","submitObject","zoomLevel"])),mounted(){this.registerListener({type:"click",listener:this.onMapClick}),this.$nextTick(()=>{this.initURLParameter()})},created(){this.$on("close",this.close)},methods:y(p(p(p(p(p({},(0,e.mapMutations)("Tools/OktagonKartenportal",Object.keys(t.default))),(0,e.mapActions)("Maps",["setCenter","setZoomLevel","registerListener"])),(0,e.mapActions)("MapMarker",["placingPointMarker"])),(0,e.mapActions)("Tools/OktagonKartenportal",["requestALKISWMS","initURLParameter","addCoordinatesToSubmitObject","parseXML"])),(0,e.mapActions)("Alerting",["addSingleAlert"])),{close(){this.setActive(!1);const g=(0,u.getComponent)(this.$store.state.Tools.OktagonKartenportal);g&&g.set("isActive",!1)},onMapClick(g){return s(this,null,function*(){const v=(0,d.extractEventCoordinates)(g.coordinate);this.setCenter(v),this.setZoomLevel(this.zoomLevel),this.setActive(!0),this.placingPointMarker(v),this.addCoordinatesToSubmitObject(v);for(const O of this.layerIds){const N=_.request("ModelList","getModelByAttributes",{id:O}),K=(0,E.default)(mapCollection.getMapView("2D").get("options"),{resolution:mapCollection.getMapView("2D").getConstrainedResolution(mapCollection.getMapView("2D").getResolution())}).resolution,x=mapCollection.getMapView("2D").getProjection(),R=N.get("layerSource").getFeatureInfoUrl(v,K,x,{INFO_FORMAT:"text/xml",STYLES:""});yield this.requestALKISWMS(R)}this.setFocusToFirstControl()})},onSubmit(){return s(this,null,function*(){window.open(yield this.submitURL,"_self")})},setFocusToFirstControl(){this.$nextTick(()=>{this.$refs.oktagonSubmitButton&&this.$refs.oktagonSubmitButton.focus()})}})}}).call(this,i(3))},4950:function(j,A,i){var _=Object.defineProperty,c=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,w=Object.prototype.hasOwnProperty,S=(f,n)=>{for(var p in n)_(f,p,{get:n[p],enumerable:!0})},k=(f,n,p,y)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of m(n))!w.call(f,h)&&h!==p&&_(f,h,{get:()=>n[h],enumerable:!(y=c(n,h))||y.enumerable});return f},M=f=>k(_({},"__esModule",{value:!0}),f),D={};S(D,{render:()=>b,staticRenderFns:()=>P}),j.exports=M(D);var b=function(){var n=this,p=n._self._c;return p("ToolTemplate",{attrs:{title:n.$t(n.name),icon:n.icon,active:n.active,"render-to-window":n.renderToWindow,"resizable-window":n.resizableWindow,"deactivate-gfi":n.deactivateGFI},scopedSlots:n._u([{key:"toolBody",fn:function(){return[n.active?p("div",{attrs:{id:"oktagonKartenportal"}},[Object.keys(n.submitObject).length>0?p("table",{staticClass:"table table-condensed table-hover"},[p("tbody",n._l(n.submitObject,function(y,h){return p("tr",{key:h},[p("td",[n._v(`
                            `+n._s(h)+`
                        `)]),n._v(" "),p("td",[n._v(`
                            `+n._s(y)+`
                        `)])])}),0)]):n._e()]):n._e(),n._v(" "),p("div",{staticClass:"form-group form-group-sm row"},[p("div",{staticClass:"col-md-6"},[p("button",{staticClass:"btn btn-secondary col-md-12",attrs:{id:"oktagonCloseButton",type:"button"},on:{click:n.close}},[n._v(`
                    `+n._s(n.$t("additional:modules.tools.oktagon.cancel"))+`
                `)])]),n._v(" "),p("div",{staticClass:"col-md-6"},[p("button",{ref:"oktagonSubmitButton",staticClass:"btn btn-primary col-md-12",attrs:{id:"oktagonSubmitButton",type:"button"},on:{click:n.onSubmit}},[n._v(`
                    `+n._s(n.$t("additional:modules.tools.oktagon.send"))+`
                `)])])])]},proxy:!0}])})},P=[];b._withStripped=!0},5643:function(j,A,i){"use strict";i.r(A);var _=i(5644),c=i(4543);for(var m in c)["default"].indexOf(m)<0&&function(k){i.d(A,k,function(){return c[k]})}(m);var w=i(1),S=Object(w.a)(c.default,_.render,_.staticRenderFns,!1,null,null,null);A.default=S.exports},5644:function(j,A,i){"use strict";var _=i(4950),c=i.n(_);i.o(_,"render")&&i.d(A,"render",function(){return _.render}),i.o(_,"staticRenderFns")&&i.d(A,"staticRenderFns",function(){return _.staticRenderFns})}}]);
