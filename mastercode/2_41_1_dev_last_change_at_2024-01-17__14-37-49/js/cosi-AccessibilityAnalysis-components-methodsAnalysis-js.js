(window.webpackJsonp=window.webpackJsonp||[]).push([[24,246,249,250,405,411,417,421,422,427,429],{3649:function(S,M,u){(function(l){var p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,A=(e,i)=>{for(var d in i)p(e,d,{get:i[d],enumerable:!0})},_=(e,i,d,B)=>{if(i&&typeof i=="object"||typeof i=="function")for(let O of g(i))!v.call(e,O)&&O!==d&&p(e,O,{get:()=>i[O],enumerable:!(B=m(i,O))||B.enumerable});return e},P=e=>_(p({},"__esModule",{value:!0}),e),F={};A(F,{addByMouseHover:()=>L,addFolder:()=>j,addModelsByAttributes:()=>n,addVectorLayer:()=>I,closeAllExpandedFolder:()=>b,getCollection:()=>y,getItemByAttributes:()=>C,getItemsByAttributes:()=>h,getModelByAttributes:()=>o,getServiceUrl:()=>r,groupBy:()=>J,offSearchbar:()=>c,onFeaturesLoaded:()=>U,onResetFeatures:()=>E,onSearchbar:()=>w,onShowAllFeatures:()=>a,onShowFeaturesById:()=>t,removeItem:()=>T,removeModelsById:()=>s,renderTree:()=>f}),S.exports=P(F);function w(e){l.on("Searchbar","hit",e)}function c(){l.off("Searchbar","hit")}function r(e){return l.request("RestReader","getServiceById",e).get("url")}function t(e){l.on("ModelList","showFeaturesById",e)}function a(e){l.on("ModelList","showAllFeatures",e)}function o(e){return l.request("ModelList","getModelByAttributes",e)}function f(){l.trigger("ModelList","renderTree")}function b(){l.trigger("ModelList","closeAllExpandedFolder")}function s(e){l.trigger("ModelList","removeModelsById",e)}function n(e){l.trigger("ModelList","addModelsByAttributes",e)}function y(){return l.request("ModelList","getCollection")}function C(e){return l.request("Parser","getItemByAttributes",e)}function h(e){return l.request("Parser","getItemsByAttributes",e)}function j(e,i,d,B){l.trigger("Parser","addFolder",e,i,d,B)}function I(e,i,d,B,O,G,$){l.trigger("Parser","addVectorLayer",e,i,d,B,O,G,$)}function T(e){l.trigger("Parser","removeItem",e)}function U(e){l.on("VectorLayer","featuresLoaded",e)}function E(e){l.on("VectorLayer","resetFeatures",e)}function L(e){l.trigger("MouseHover","add",e)}function J(e,i){return l.request("Util","groupBy",e,i)}}).call(this,u(3))},3650:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(c,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of g(r))!A.call(c,o)&&o!==t&&p(c,o,{get:()=>r[o],enumerable:!(a=m(r,o))||a.enumerable});return c},P=(c,r,t)=>(t=c!=null?l(v(c)):{},_(r||!c||!c.__esModule?p(t,"default",{value:c,enumerable:!0}):t,c)),F=P(u(106));function w(c){var r;if(typeof c!="object"||c===null||typeof c.getSource!="function"||typeof((r=c.getSource())==null?void 0:r.getFeatures)!="function")return console.error("utils/layer/getLayerSource: layer must be a layer with a vector source",c),null;const t=c.getSource();return t.constructor===F.default?t.getSource():t}S.exports={getLayerSource:w}},3660:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(s,n,y,C)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of g(n))!A.call(s,h)&&h!==y&&p(s,h,{get:()=>n[h],enumerable:!(C=m(n,h))||C.enumerable});return s},P=(s,n,y)=>(y=s!=null?l(v(s)):{},_(n||!s||!s.__esModule?p(y,"default",{value:s,enumerable:!0}):y,s)),F=u(3650),w=P(u(316)),c=u(3649),r=P(u(318)),t=u(5);function a(s,n){s.forEachFeature(y=>{y.getGeometry()!==void 0&&!n.intersectsCoordinate((0,t.getCenter)(y.getGeometry().getExtent()))&&s.removeFeature(y)})}function o(s,n,y,C,h){const j=(0,F.getLayerSource)(s.layer),I=C.typ;j&&(j.clear(),j.getListeners("featuresloadend")&&delete j.listeners_.featuresloadend,I==="WFS"&&j.setUrl(y),I!=="VectorBase"?(j.refresh(),n&&j.on("featuresloadend",function(T){C.renderer==="webgl"&&r.afterLoading(T.target.getFeatures(),s.attributes.styleId,s.attributes.excludeTypesFromParsing,s.attributes.isPointLayer),a(T.target,n),h&&h.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource")})):(j.addFeatures(C.features),n&&(a(j,n),h&&h.$root.$emit("updateFeaturesList","setBBoxToGeom-updateSource"))))}function f(s){const n=this instanceof w.default?this:void 0,y=[...(0,c.getItemsByAttributes)({typ:"WFS",isBaseLayer:!1}),...(0,c.getItemsByAttributes)({typ:"GeoJSON",isBaseLayer:!1}),...(0,c.getItemsByAttributes)({typ:"VectorBase",isBaseLayer:!1}),...(0,c.getItemsByAttributes)({typ:"OAF",isBaseLayer:!1})];b(y,s,n)}function b(s,n,y){const C=(0,c.getCollection)(),h=y?.$store.getters["Maps/projectionCode"]||"EPSG:25832";s.forEach(function(j){const I=C.get({id:j.id});if(I){let T=`${I.attributes.url}?service=WFS&version=${I.attributes.version}&request=GetFeature&typeName=${I.attributes.featureType}&srsName=${h}`;T+=n?`&bbox=${n.getExtent().toString()},${h}`:"",I.set("bboxGeometry",n),o(I,n,T,j,y)}else j.bboxGeometry=n})}S.exports={setBBoxToGeom:f,setBboxGeometryToLayer:b}},3718:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(s,n)=>{for(var y in n)p(s,y,{get:n[y],enumerable:!0})},P=(s,n,y,C)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of g(n))!A.call(s,h)&&h!==y&&p(s,h,{get:()=>n[h],enumerable:!(C=m(n,h))||C.enumerable});return s},F=(s,n,y)=>(y=s!=null?l(v(s)):{},P(n||!s||!s.__esModule?p(y,"default",{value:s,enumerable:!0}):y,s)),w=s=>P(p({},"__esModule",{value:!0}),s),c={};_(c,{getSearchResultsCoordinates:()=>f,getSearchResultsGeometry:()=>b}),S.exports=w(c);var r=F(u(12)),t=F(u(5)),a=F(u(7));function o(s){const n=s.getGeometry().getInteriorPoints();if(n.getPoints().length===1)return n.getPoints()[0].getCoordinates().slice(0,2);if(n.getPoints().length>1){const y=s.getGeometry();return t.getCenter(y.getExtent())}return null}function f(s){const n=a.default.getters["Maps/projectionCode"],y=a.default.getters["MapMarker/markerPoint"],C=a.default.getters["MapMarker/markerPolygon"];let h=y.getSource().getFeatures(),j;return h.length===1&&(j=h[0].getGeometry().getCoordinates()),h=C.getSource().getFeatures(),h.length===1&&(j=o(h[0])),j&&s&&(j=r.transform(j,n,s)),j}function b(){const s=a.default.getters["MapMarker/markerPoint"].getSource().getFeatures(),n=a.default.getters["MapMarker/markerPolygon"].getSource().getFeatures();return s.length===1?s[0].getGeometry():n.length===1?n[0].getGeometry():null}},3747:function(S,M){function u(l,p,m){return typeof p!="string"||typeof m!="string"?(console.error(`utils/features/transform: The second and the third parameter must both be a string, but got ${typeof p} and ${typeof m}`),!1):!Array.isArray(l)||l.length<1?(console.error("utils/features/transform: The first parameter must be an non-empty array"),!1):(l.forEach(function(g){const v=g.getGeometry();v&&v.transform(p,m)}),l)}S.exports={transformFeatures:u}},3748:function(S,M,u){var l=u(3650);function p(m,g){if(!Array.isArray(m)||!m.length)return console.error(`utils/layer/findAllFeatures: The first parameter must be an non-empty array. Got ${typeof m} instead.`),[];if(typeof g!="function")return console.error(`utils/layer/findAllFeatures: The second parameter must be a function. Got ${typeof g} instead.`),[];const v=[];return m.forEach(A=>{var _;const P=(_=(0,l.getLayerSource)(A))==null?void 0:_.getFeatures().filter(g);P&&v.push(...P)}),v}S.exports={filterAllFeatures:p}},3779:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(r,t,a,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let f of g(t))!A.call(r,f)&&f!==a&&p(r,f,{get:()=>t[f],enumerable:!(o=m(t,f))||o.enumerable});return r},P=(r,t,a)=>(a=r!=null?l(v(r)):{},_(t||!r||!r.__esModule?p(a,"default",{value:r,enumerable:!0}):a,r)),F=P(u(97)),w=P(u(18));function c(r){return!(0,w.default)(r)||!(r instanceof F.default)?(console.error(`addons/cosi/utils/geometry/getFlatCoordinates: The first parameter must be an instance of ol/geom/Geometry, but got ${typeof r}`),!1):r.getType()==="Polygon"?r.getCoordinates().flat(1).map(t=>[t[0],t[1]]):r.getType()==="MultiPolygon"?r.getCoordinates().flat(2).map(t=>[t[0],t[1]]):r.getType()==="Point"?[[r.getCoordinates()[0],r.getCoordinates()[1]]]:(console.error(`addons/cosi/utils/geometry/getFlatCoordinates: The instance of the given geometry (${r}) is not supported`),!1)}S.exports={getFlatCoordinates:c}},3888:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(o,f,b,s)=>{if(f&&typeof f=="object"||typeof f=="function")for(let n of g(f))!A.call(o,n)&&n!==b&&p(o,n,{get:()=>f[n],enumerable:!(s=m(f,n))||s.enumerable});return o},P=(o,f,b)=>(b=o!=null?l(v(o)):{},_(f||!o||!o.__esModule?p(b,"default",{value:o,enumerable:!0}):b,o)),F=P(u(4676)),w=u(4158),c=P(u(450)),r=P(u(97)),t=P(u(18));function a(o,f=1){if(!(0,t.default)(o)||!(o instanceof r.default))return console.error(`addons/cosi/utils/geometry/simplify: The first parameter must be an instance of ol/geom/Geometry, but got ${typeof o}`),!1;if(typeof f!="number")return console.error(`addons/cosi/utils/geometry/simplify: The second parameter must be a number, but got ${typeof f}`),!1;if(o.getType()==="Point")return o;let b;if(o.getType()==="Polygon")b=(0,w.polygon)(o.getCoordinates());else if(o.getType()==="MultiPolygon")b=(0,w.multiPolygon)(o.getCoordinates());else return console.error(`addons/cosi/utils/geometry/simplify: The instance of the given geometry (${o}) is not supported`),!1;const s=new c.default,n=(0,F.default)(b,{tolerance:f});return s.readGeometry(n.geometry)}S.exports={simplify:a}},3889:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(r,t,a,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let f of g(t))!A.call(r,f)&&f!==a&&p(r,f,{get:()=>t[f],enumerable:!(o=m(t,f))||o.enumerable});return r},P=(r,t,a)=>(a=r!=null?l(v(r)):{},_(t||!r||!r.__esModule?p(a,"default",{value:r,enumerable:!0}):a,r)),F=P(u(12));function w(r,t,a="EPSG:4326"){return!Array.isArray(r)||r.length<1?(console.error("addons/cosi/Accessibility/utils/transformCoordinates: The first parameter must be an non-empty array"),!1):typeof t!="string"||typeof a!="string"?(console.error(`addons/cosi/Accessibility/utils/transformCoordinates: The second and the third parameter must both be a string, but got ${typeof t} and ${typeof a}`),!1):r.map(o=>F.transform(o,t,a))}function c(r,t,a="EPSG:4326"){return!Array.isArray(r)||r.length<1?(console.error("addons/cosi/Accessibility/utils/transformCoordinate: The first parameter must be an non-empty array"),!1):typeof t!="string"||typeof a!="string"?(console.error(`addons/cosi/Accessibility/utils/transformCoordinate: The second and the third parameter must both be a string, but got ${typeof t} and ${typeof a}`),!1):F.transform(r,t,a)}S.exports={transformCoordinates:w,transformCoordinate:c}},3912:function(S,M,u){var l=u(40);const p=["rgba(240, 0, 3, 0.2)","rgba(200, 200, 3, 0.2)","rgba(0, 240, 3, 0.2)"];function m(g,v=p){if(!Array.isArray(g)||g.length!==3&&g.length!==4){console.error("AccessibilityAnalysis/utils/styleIsochroneFeatures: The first parameter must be a non empty array, but got "+typeof g);return}if(!Array.isArray(v)){console.error("AccessibilityAnalysis/utils/styleIsochroneFeatures: The second parameter must be an array, but got "+typeof v);return}const A=g.length===3?0:1;for(let _=A;_<g.length;_++)g[_].setStyle(new l.Style({fill:new l.Fill({color:v[_-A]}),stroke:new l.Stroke({color:"white",width:1})}));A===1&&g[0].setStyle(new l.Style({fill:new l.Fill({color:"rgba(255, 255, 255, 0)"}),stroke:new l.Stroke({color:"rgba(100, 80, 80, 1)",width:2,lineDash:[10,8]})}))}S.exports={styleIsochroneFeatures:m}},3913:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(t,a,o,f)=>{if(a&&typeof a=="object"||typeof a=="function")for(let b of g(a))!A.call(t,b)&&b!==o&&p(t,b,{get:()=>a[b],enumerable:!(f=m(a,b))||f.enumerable});return t},P=(t,a,o)=>(o=t!=null?l(v(t)):{},_(a||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t)),F=P(u(4275));function w(t,a,o){if(typeof t!="number")return console.error(`addons/cosi/Accessibility/utils/getDistances: The first parameter must be a number, but got ${typeof t}`),!1;if(typeof a!="boolean")return console.error(`addons/cosi/Accessibility/utils/getDistances: The second parameter must be a boolean, but got ${typeof a}`),!1;if(typeof o!="number")return console.error(`addons/cosi/Accessibility/utils/getDistances: The third parameter must be a number, but got ${typeof o}`),!1;let f=t,b,s=c(t);return a&&(f=r(t,o),b=t,s=[...s,"max"]),{distance:f,maxDistance:b,steps:s}}function c(t){return typeof t!="number"?(console.error(`addons/cosi/Accessibility/utils/getSteps: The first parameter must be a number, but got ${typeof t}`),!1):[t/3,t*2/3,t].map(o=>Number.isInteger(o)?o.toLocaleString("de-DE"):o.toFixed(2))}function r(t,a){if(typeof t!="number")return console.error(`addons/cosi/Accessibility/utils/getDistanceByTravelTimeIndex: The first parameter must be a number, but got ${typeof t}`),!1;if(typeof a!="number")return console.error(`addons/cosi/Accessibility/utils/getDistanceByTravelTimeIndex: The second parameter must be a number, but got ${typeof a}`),!1;const o=F.default[a]/Math.min(...Object.values(F.default));return Math.round(t/o)}S.exports={getTravelTimeIndexDistance:r,getDistances:w,getSteps:c}},4124:function(S,M,u){var l=Object.create,p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,_=(e,i)=>{for(var d in i)p(e,d,{get:i[d],enumerable:!0})},P=(e,i,d,B)=>{if(i&&typeof i=="object"||typeof i=="function")for(let O of g(i))!A.call(e,O)&&O!==d&&p(e,O,{get:()=>i[O],enumerable:!(B=m(i,O))||B.enumerable});return e},F=(e,i,d)=>(d=e!=null?l(v(e)):{},P(i||!e||!e.__esModule?p(d,"default",{value:e,enumerable:!0}):d,e)),w=e=>P(p({},"__esModule",{value:!0}),e),c=(e,i,d)=>new Promise((B,O)=>{var G=x=>{try{D(d.next(x))}catch(N){O(N)}},$=x=>{try{D(d.throw(x))}catch(N){O(N)}},D=x=>x.done?B(x.value):Promise.resolve(x.value).then(G,$);D((d=d.apply(e,i)).next())}),r={};_(r,{default:()=>J}),S.exports=w(r);var t=F(u(5)),a=F(u(286)),o=u(3660),f=u(3718),b=u(4158),s=F(u(4222)),n=F(u(450)),y=u(3747),C=u(3649),h=u(1210),j=u(3748),I=u(3912),T=u(3888),U=u(3779),E=u(3889),L=u(3913),J={createIsochrones:function(){return c(this,null,function*(){this.clear(),this.askUpdate=!1;try{this.mode==="point"||this.mode==="facility"?yield this.createIsochronesPoint():this.mode==="region"?yield this.createIsochronesRegion():this.mode==="path"&&(yield this.createBufferFromDirections())}catch(e){if(e.request_canceled)return;try{const i=(e.error||e).response.data.error.code;i===3002||i===3099?this.showErrorInvalidInput():this.showError()}catch(i){console.error(i),this.showError()}}})},createIsochronesRegion:function(){return c(this,null,function*(){const e=(0,j.filterAllFeatures)(this.selectedFacilityLayer,this.isFeatureActive),i=this.getCoordinates(e,this.setByFeature),{distance:d,maxDistance:B,steps:O}=(0,L.getDistances)(parseFloat(this.distance),this._useTravelTimeIndex,this.time);if(i!==null&&this.transportType!==""&&this.scaleUnit!==""&&d!==0){this.cleanup();const G=yield this.getIsochrones({transportType:this.transportType,coordinates:i,scaleUnit:this.scaleUnit,distance:d,maxDistance:B,baseUrl:this.baseUrl});this.setSteps(O),this.setIsochroneFeatures(G),this.currentCoordinates=i}else this.inputReminder()})},createIsochronesPoint:function(){return c(this,null,function*(){const{distance:e,maxDistance:i,steps:d}=(0,L.getDistances)(parseFloat(this.distance),this._useTravelTimeIndex,this.time);if(this.coordinate.length>0&&this.transportType!==""&&this.scaleUnit!==""&&e!==0){const B=yield this.getIsochrones({transportType:this.transportType,coordinates:this.coordinate,scaleUnit:this.scaleUnit,distance:e,maxDistance:i,baseUrl:this.baseUrl});this.setSteps(d),this.setIsochroneFeatures(B),this.cleanup()}else this.inputReminder()})},renderIsochrones(e){if(this.mapLayer.getSource().clear(),e.length===0){o.setBBoxToGeom.call(this,this.areaSelectorGeom||this.boundingGeometry);return}(0,I.styleIsochroneFeatures)(e,this.isochroneColors),this.mapLayer.getSource().addFeatures(e),this.mode!=="region"&&this.setIsochroneAsBbox()},createBufferFromDirections:function(){var e;let i;const d="Erreichbarkeit entlang einer Route",B=parseFloat(this.distance)/1e3,O=[B,B*2/3,B/3],G=(e=this.selectedDirections)==null?void 0:e.lineString.map(x=>(0,E.transformCoordinate)(x,this.projectionCode,"EPSG:4326")),$=(0,b.lineString)(G),D=(0,b.featureCollection)(O.map(x=>(0,s.default)($,x)));i=new n.default().readFeatures(D),i=(0,y.transformFeatures)(i,"EPSG:4326",this.projectionCode),i.forEach((x,N)=>{x.set("featureType",d),x.set("value",O[N]),x.set("mode",this.transportType),x.set("unit",this.scaleUnit)}),this.setSteps((0,L.getSteps)(parseFloat(this.distance))),this.setIsochroneFeatures(i)},setSearchResultToOrigin:function(){const e=(0,f.getSearchResultsCoordinates)();e&&(this.setCoordinate([(0,E.transformCoordinate)(e,this.projectionCode,"EPSG:4326")]),this.setClickCoordinate(e),this.setSetBySearch(!0))},inputReminder:function(){this.addSingleAlert({category:"Info",content:"<strong>"+this.$t("additional:modules.tools.cosi.accessibilityAnalysis.inputReminder")+"</strong>",displayClass:"info"})},showError:function(){this.addSingleAlert({content:"<strong>"+this.$t("additional:modules.tools.cosi.accessibilityAnalysis.showError")+"</strong>",category:"Fehler",displayClass:"error"})},showErrorInvalidInput:function(){this.addSingleAlert({content:"<strong>"+this.$t("additional:modules.tools.cosi.accessibilityAnalysis.showErrorInvalidInput")+"</strong>",category:"Fehler",displayClass:"error"})},setIsochroneAsBbox:function(){const e=this.isochroneFeatures[this.isochroneFeatures.length===4?1:0].getGeometry(),i=new a.default([e]);o.setBBoxToGeom.call(this,i)},resetIsochroneBBox(){o.setBBoxToGeom.call(this,this.areaSelectorGeom||this.boundingGeometry)},clear:function(){this.setSteps([0,0,0]),this.setIsochroneFeatures([])},hideResults(e){e?(this.renderIsochrones([]),this.mode==="point"&&this.removePointMarker()):(this.renderIsochrones(this._isochroneFeatures),this.mode==="point"&&this.placingPointMarker((0,E.transformCoordinate)(this.coordinate[0],"EPSG:4326",this.projectionCode)))},getMetadataSelectedData:function(){return c(this,null,function*(){const e=(0,C.getModelByAttributes)({name:this.selectedFacilityNames[0],type:"layer"});return yield(0,h.getRecordById)(e.get("datasets")[0].csw_url,e.get("datasets")[0].md_id)})},getCoordinates:function(e,i){return Array.isArray(e)&&e.length>0?e.reduce((d,B)=>{const O=B.getGeometry();return O.getType()==="Point"?[...d,O.getCoordinates().splice(0,2)]:i?[...d,...(0,U.getFlatCoordinates)((0,T.simplify)(O,10))||[t.getCenter(O.getExtent())]]:[...d,t.getCenter(O.getExtent())]},[]).map(d=>(0,E.transformCoordinate)(d,this.projectionCode,"EPSG:4326")):null}}},4275:function(S){S.exports=JSON.parse('{"0":1.01,"1":1,"2":0.99,"3":0.99,"4":0.99,"5":1.03,"6":1.12,"7":1.23,"8":1.27,"9":1.24,"10":1.24,"11":1.25,"12":1.26,"13":1.27,"14":1.29,"15":1.32,"16":1.33,"17":1.29,"18":1.24,"19":1.16,"20":1.1,"21":1.07,"22":1.05,"23":1.03}')}}]);
