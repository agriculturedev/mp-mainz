(window.webpackJsonp=window.webpackJsonp||[]).push([[49,300,301,308,398,400,401,411,427],{216:function(C,K,h){var d=Object.create,b=Object.defineProperty,D=Object.defineProperties,L=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,P=(n,p,c)=>p in n?b(n,p,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[p]=c,t=(n,p)=>{for(var c in p||(p={}))w.call(p,c)&&P(n,c,p[c]);if(I)for(var c of I(p))A.call(p,c)&&P(n,c,p[c]);return n},o=(n,p)=>D(n,E(p)),s=(n,p)=>{for(var c in p)b(n,c,{get:p[c],enumerable:!0})},_=(n,p,c,J)=>{if(p&&typeof p=="object"||typeof p=="function")for(let B of T(p))!w.call(n,B)&&B!==c&&b(n,B,{get:()=>p[B],enumerable:!(J=L(p,B))||J.enumerable});return n},a=(n,p,c)=>(c=n!=null?d(j(n)):{},_(p||!n||!n.__esModule?b(c,"default",{value:n,enumerable:!0}):c,n)),v=n=>_(b({},"__esModule",{value:!0}),n),r=(n,p,c)=>new Promise((J,B)=>{var z=S=>{try{k(c.next(S))}catch(V){B(V)}},U=S=>{try{k(c.throw(S))}catch(V){B(V)}},k=S=>S.done?J(S.value):Promise.resolve(S.value).then(z,U);k((c=c.apply(n,p)).next())}),f={};s(f,{default:()=>X}),C.exports=v(f);var e=h(12),l=h(3955),i=h(3956),g=h(3957),y=a(h(60)),O=h(3958),F=h(3779);function N(n,p,c="EPSG:4326"){return n.map(J=>{const B=(0,F.getFlatCoordinates)(J.getGeometry())[0];return(0,e.transform)(B,p,c)})}function m(n,p,c,J,B,z,U){return r(this,null,function*(){const k=N([n],B),S=yield(0,i.findNearestFeatures)(p,n,c,J,10,B),V=N(S,B),M=(yield(0,l.fetchDistances)(k,V,void 0,z,U))[0];if(M===null)return null;let H=1/0,W;for(let Y=0;Y<M.length;Y++)M[Y]!==null&&M[Y]<H&&(H=M[Y],W=S[Y]);return{dist:H,feature:W}})}function G(n,p){return r(this,arguments,function*({getters:c,commit:J,rootGetters:B},{feature:z,layers:U}){let k=0,S=0;const V={facilities:{}};for(let M=0;M<U.length;M++){const H=z.getId().toString()+U[M].layerId.toString();let W=c.mindists[H];if(W||(W=yield m(z,U[M].layerId,c.initialBuffer,c.bufferIncrement,B["Maps/projectionCode"],c.serviceId,c.fallbackServiceId),J("setMindists",o(t({},c.mindists),{[H]:W}))),W===null)return null;if(W===1/0)continue;const Y=U[M].weighting*W.dist;V.facilities[U[M].layerId]={value:Y,feature:W.feature,layerName:U[M].id,featureName:W.feature.get(U[M].keyOfAttrName),weighting:U[M].weighting},k+=Y,S+=U[M].weighting}return V.average=(k/S).toFixed(1),V})}function u(n,p){if(!n||n.length===0)return null;switch(p){case"max":{let c=-1/0;for(const J of n)J>c&&(c=J);return c}case"mean":{let c=0;for(const J of n)c+=J;return c/n.length}default:return null}}function x(n,p){return r(this,arguments,function*({getters:c,rootGetters:J},{feature:B,layerId:z}){const U=y.default.getLayerWhere({id:z}),k=B.getGeometry().flatCoordinates.slice(0,2),S=c.wmsLayers.find(H=>H.id===z),V=(0,O.getConverter)(S.converter),M=yield(0,g.getFeatureInfos)(U.url,U.layers,k,J["Maps/projectionCode"],S.resolution,S.featureCount);return M.length>0?u(M.map(H=>V.convert(H.getProperties()[S.attribute])),S.aggregation):null})}const $="DistanceScoreService";var X={component:{name:$,render(){return null}},store:{namespaced:!0,state:{active:!1,id:$,mindists:{},useUserExtent:!1,initialBuffer:5e3,bufferIncrement:1e4,wmsLayers:[{id:"95",name:"Stra\xDFenl\xE4rm 2017",attribute:"klasse",resolution:26,featureCount:10,converter:"DbRangeConverter",aggregation:"max"}],serviceId:"bkg_ors",fallbackServiceId:"csl_ors"},getters:{mindists:n=>n.mindists,useUserExtent:n=>n.useUserExtent,initialBuffer:n=>n.initialBuffer,bufferIncrement:n=>n.bufferIncrement,wmsLayers:n=>n.wmsLayers,wmsLayersInfo:n=>n.wmsLayers,serviceId:n=>n.serviceId,fallbackServiceId:n=>n.fallbackServiceId},mutations:{setMindists:(n,p)=>{n.mindists=p}},actions:{getDistanceScore(n,p){return r(this,null,function*(){return G(n,p)})},getFeatureValues(n,p){return r(this,null,function*(){return x(n,p)})}},computed:{}}}},3649:function(C,K,h){(function(d){var b=Object.defineProperty,D=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,T=(u,x)=>{for(var $ in x)b(u,$,{get:x[$],enumerable:!0})},I=(u,x,$,R)=>{if(x&&typeof x=="object"||typeof x=="function")for(let Q of L(x))!E.call(u,Q)&&Q!==$&&b(u,Q,{get:()=>x[Q],enumerable:!(R=D(x,Q))||R.enumerable});return u},j=u=>I(b({},"__esModule",{value:!0}),u),w={};T(w,{addByMouseHover:()=>m,addFolder:()=>g,addModelsByAttributes:()=>f,addVectorLayer:()=>y,closeAllExpandedFolder:()=>v,getCollection:()=>e,getItemByAttributes:()=>l,getItemsByAttributes:()=>i,getModelByAttributes:()=>_,getServiceUrl:()=>t,groupBy:()=>G,offSearchbar:()=>P,onFeaturesLoaded:()=>F,onResetFeatures:()=>N,onSearchbar:()=>A,onShowAllFeatures:()=>s,onShowFeaturesById:()=>o,removeItem:()=>O,removeModelsById:()=>r,renderTree:()=>a}),C.exports=j(w);function A(u){d.on("Searchbar","hit",u)}function P(){d.off("Searchbar","hit")}function t(u){return d.request("RestReader","getServiceById",u).get("url")}function o(u){d.on("ModelList","showFeaturesById",u)}function s(u){d.on("ModelList","showAllFeatures",u)}function _(u){return d.request("ModelList","getModelByAttributes",u)}function a(){d.trigger("ModelList","renderTree")}function v(){d.trigger("ModelList","closeAllExpandedFolder")}function r(u){d.trigger("ModelList","removeModelsById",u)}function f(u){d.trigger("ModelList","addModelsByAttributes",u)}function e(){return d.request("ModelList","getCollection")}function l(u){return d.request("Parser","getItemByAttributes",u)}function i(u){return d.request("Parser","getItemsByAttributes",u)}function g(u,x,$,R){d.trigger("Parser","addFolder",u,x,$,R)}function y(u,x,$,R,Q,X,n){d.trigger("Parser","addVectorLayer",u,x,$,R,Q,X,n)}function O(u){d.trigger("Parser","removeItem",u)}function F(u){d.on("VectorLayer","featuresLoaded",u)}function N(u){d.on("VectorLayer","resetFeatures",u)}function m(u){d.trigger("MouseHover","add",u)}function G(u,x){return d.request("Util","groupBy",u,x)}}).call(this,h(3))},3668:function(C,K,h){var d=Object.defineProperty,b=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,L=Object.prototype.hasOwnProperty,E=(P,t)=>{for(var o in t)d(P,o,{get:t[o],enumerable:!0})},T=(P,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let _ of D(t))!L.call(P,_)&&_!==o&&d(P,_,{get:()=>t[_],enumerable:!(s=b(t,_))||s.enumerable});return P},I=P=>T(d({},"__esModule",{value:!0}),P),j={};E(j,{default:()=>A}),C.exports=I(j);var w=h(5);function A(P,t=0){if(!Array.isArray(P))return console.error("utils/features/calculateExtent: The first parameter must be an array, but got "+typeof P),!1;if(typeof t!="number")return console.error("utils/features/calculateExtent: The second parameter must be a number, but got "+typeof t),!1;if(P.length>0){let o=(0,w.createEmpty)();return P.forEach(s=>{s.getGeometry()&&(o=(0,w.extend)(o,s.getGeometry().getExtent()))}),(0,w.isEmpty)(o)?!1:(0,w.buffer)(o,parseFloat(t))}return!1}},3758:function(C,K,h){var d=Object.create,b=Object.defineProperty,D=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,E=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=(s,_,a,v)=>{if(_&&typeof _=="object"||typeof _=="function")for(let r of L(_))!T.call(s,r)&&r!==a&&b(s,r,{get:()=>_[r],enumerable:!(v=D(_,r))||v.enumerable});return s},j=(s,_,a)=>(a=s!=null?d(E(s)):{},I(_||!s||!s.__esModule?b(a,"default",{value:s,enumerable:!0}):a,s)),w=(s,_,a)=>new Promise((v,r)=>{var f=i=>{try{l(a.next(i))}catch(g){r(g)}},e=i=>{try{l(a.throw(i))}catch(g){r(g)}},l=i=>i.done?v(i.value):Promise.resolve(i.value).then(f,e);l((a=a.apply(s,_)).next())}),A=h(58),P=j(h(60)),t=h(1202);function o(s,_,a){return w(this,null,function*(){if(typeof s!="string")return console.error(`utils/features/getAllFeaturesByLayerId: layerId must be a string. Got ${typeof s} instead.`),[];const v=P.default.getLayerWhere({id:s}),r=new A.WFS({featureNS:v?.featureNS});let f=[];return v===null?(console.error(`utils/features/getAllFeaturesByLayerId: layer with the passed layerId (${s}) was not found.`),[]):(f=yield(0,t.getFeatureGET)(v.url,{service:"WFS",request:"GetFeature",version:v.version,featureType:v.featureType,bbox:_,srsName:a}),r.readFeatures(f))})}C.exports={getAllFeaturesByLayerId:o}},3779:function(C,K,h){var d=Object.create,b=Object.defineProperty,D=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,E=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=(t,o,s,_)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of L(o))!T.call(t,a)&&a!==s&&b(t,a,{get:()=>o[a],enumerable:!(_=D(o,a))||_.enumerable});return t},j=(t,o,s)=>(s=t!=null?d(E(t)):{},I(o||!t||!t.__esModule?b(s,"default",{value:t,enumerable:!0}):s,t)),w=j(h(97)),A=j(h(18));function P(t){return!(0,A.default)(t)||!(t instanceof w.default)?(console.error(`addons/cosi/utils/geometry/getFlatCoordinates: The first parameter must be an instance of ol/geom/Geometry, but got ${typeof t}`),!1):t.getType()==="Polygon"?t.getCoordinates().flat(1).map(o=>[o[0],o[1]]):t.getType()==="MultiPolygon"?t.getCoordinates().flat(2).map(o=>[o[0],o[1]]):t.getType()==="Point"?[[t.getCoordinates()[0],t.getCoordinates()[1]]]:(console.error(`addons/cosi/utils/geometry/getFlatCoordinates: The instance of the given geometry (${t}) is not supported`),!1)}C.exports={getFlatCoordinates:P}},3955:function(C,K,h){var d=Object.create,b=Object.defineProperty,D=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,E=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=(r,f)=>{for(var e in f)b(r,e,{get:f[e],enumerable:!0})},j=(r,f,e,l)=>{if(f&&typeof f=="object"||typeof f=="function")for(let i of L(f))!T.call(r,i)&&i!==e&&b(r,i,{get:()=>f[i],enumerable:!(l=D(f,i))||l.enumerable});return r},w=(r,f,e)=>(e=r!=null?d(E(r)):{},j(f||!r||!r.__esModule?b(e,"default",{value:r,enumerable:!0}):e,r)),A=r=>j(b({},"__esModule",{value:!0}),r),P=(r,f,e)=>new Promise((l,i)=>{var g=F=>{try{O(e.next(F))}catch(N){i(N)}},y=F=>{try{O(e.throw(F))}catch(N){i(N)}},O=F=>F.done?l(F.value):Promise.resolve(F.value).then(g,y);O((e=e.apply(r,f)).next())}),t={};I(t,{fetchDistances:()=>v}),C.exports=A(t);var o=w(h(25)),s=h(3649);function _(r,f,e,l,i){return P(this,null,function*(){if(r.length===0)return[];if(f.length===0)return r.map(()=>null);o.default.interceptors.response.use(function(m){return m},function(m){var G;const u=m.config,x=(0,s.getServiceUrl)(l);if(((G=m.response)==null?void 0:G.status)!==200&&u.url.indexOf(x)===0&&!u._retry){u._retry=!0;const $=u.url.replace(x,(0,s.getServiceUrl)(i));return o.default.post($,u.data,{headers:u.headers})}return Promise.reject(m)});const g=(0,s.getServiceUrl)(l)+"/v2/",y="matrix",O=g+y+"/"+(e||"foot-walking")+"/json",F={metrics:["distance"],locations:[...r,...f],sources:Array.from(new Array(r.length),(m,G)=>G),destinations:Array.from(new Array(f.length),(m,G)=>G+r.length)};return(yield o.default.post(O,JSON.stringify(F),{headers:{Accept:"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8","Content-Type":"application/json"}})).data.distances})}function a(r,f,e){const l=[...r],i=[...f],g=[],y=[];if(e.includes("Source point(s)")&&e.includes("Destination point(s)")){const O=e.split(". Destination");g.push(...JSON.parse(O[0].slice(O[0].indexOf("["),O[0].indexOf("]")+1))),y.push(...JSON.parse(O[1].slice(O[1].indexOf("["),O[1].indexOf("]")+1)))}else e.includes("Source point(s)")?g.push(...JSON.parse(e.slice(e.indexOf("["),e.indexOf("]")+1))):e.includes("Destination point(s)")&&y.push(...JSON.parse(e.slice(e.indexOf("["),e.indexOf("]")+1)));for(let O=g.length-1;O>=0;O--)l.splice(g[O],1);for(let O=y.length-1;O>=0;O--)i.splice(y[O],1);return[g,l,i]}function v(r,f,e,l,i){return P(this,null,function*(){var g,y,O,F,N;try{return yield _(r,f,e,l,i)}catch(m){if(((O=(y=(g=m?.response)==null?void 0:g.data)==null?void 0:y.error)==null?void 0:O.code)===6010){const G=(N=(F=m?.response)==null?void 0:F.data)==null?void 0:N.error.message,u=a(r,f,G),x=yield _(u[1],u[2],e,l,i);for(const $ of u[0])x.splice($,0,null);return x}throw m}})}},3956:function(C,K,h){var d=Object.create,b=Object.defineProperty,D=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,E=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=(a,v,r,f)=>{if(v&&typeof v=="object"||typeof v=="function")for(let e of L(v))!T.call(a,e)&&e!==r&&b(a,e,{get:()=>v[e],enumerable:!(f=D(v,e))||f.enumerable});return a},j=(a,v,r)=>(r=a!=null?d(E(a)):{},I(v||!a||!a.__esModule?b(r,"default",{value:a,enumerable:!0}):r,a)),w=(a,v,r)=>new Promise((f,e)=>{var l=y=>{try{g(r.next(y))}catch(O){e(O)}},i=y=>{try{g(r.throw(y))}catch(O){e(O)}},g=y=>y.done?f(y.value):Promise.resolve(y.value).then(l,i);g((r=r.apply(a,v)).next())}),A=j(h(3668)),P=j(h(21)),t=h(3758),o=j(h(18));function s(a,v,r,f,e=10,l="EPSG:25832"){return w(this,null,function*(){if(typeof a!="string")return console.error(`utils/features/findNearestFeatures: The first parameter must be a string. Got ${typeof a} instead.`),!1;if(!(0,o.default)(v)||!(v instanceof P.default))return console.error("utils/features/findNearestFeatures: The second parameter must be an ol feature object, but got "+typeof v),!1;if(typeof r!="number")return console.error("utils/features/findNearestFeatures: The third parameter must be a number, but got "+typeof r),!1;if(typeof f!="number")return console.error("utils/features/findNearestFeatures: The fourth parameter must be a number, but got "+typeof f),!1;if(typeof e!="number")return console.error("utils/features/findNearestFeatures: The fifth parameter must be a number, but got "+typeof e),!1;if(typeof l!="string")return console.error(`utils/features/findNearestFeatures: The sixth parameter must be a string. Got ${typeof l} instead.`),!1;let i=r,g=null,y=0;for(;++y<e;){const O=(0,A.default)([v],parseInt(i,10));if(g=yield(0,t.getAllFeaturesByLayerId)(a,_(O,l),l),g.length)return g;i+=f}return g})}function _(a,v="EPSG:25832"){return!Array.isArray(a)||Array.isArray(a)&&a.length!==4?(console.error(`utils/features/findNearestFeatures: The first parameter must be an array of length 4. Got ${typeof a} and ${a?.length}.`),""):typeof v!="string"?(console.error(`utils/features/findNearestFeatures: The second parameter must be a string. Got ${typeof v} instead.`),""):a.join(",")+","+v}C.exports={findNearestFeatures:s,formatBbox:_}},3957:function(C,K,h){var d=Object.create,b=Object.defineProperty,D=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyNames,E=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=(e,l)=>{for(var i in l)b(e,i,{get:l[i],enumerable:!0})},j=(e,l,i,g)=>{if(l&&typeof l=="object"||typeof l=="function")for(let y of L(l))!T.call(e,y)&&y!==i&&b(e,y,{get:()=>l[y],enumerable:!(g=D(l,y))||g.enumerable});return e},w=(e,l,i)=>(i=e!=null?d(E(e)):{},j(l||!e||!e.__esModule?b(i,"default",{value:e,enumerable:!0}):i,e)),A=e=>j(b({},"__esModule",{value:!0}),e),P=(e,l,i)=>new Promise((g,y)=>{var O=m=>{try{N(i.next(m))}catch(G){y(G)}},F=m=>{try{N(i.throw(m))}catch(G){y(G)}},N=m=>m.done?g(m.value):Promise.resolve(m.value).then(O,F);N((i=i.apply(e,l)).next())}),t={};I(t,{getFeatureInfos:()=>f}),C.exports=A(t);var o=w(h(25)),s=w(h(456)),_=w(h(141)),a=h(58);function v(e,l,i){return new s.default({url:e,gutter:0,params:{LAYERS:l,FORMAT:"image/png",VERSION:"1.3.0"},tileGrid:new _.default({resolutions:[i],origin:[0,0],tileSize:512})})}function r(e,l,i,g,y){return e.getFeatureInfoUrl(l,g,i,{INFO_FORMAT:"text/xml",feature_count:y})}function f(e,l,i,g,y,O){return P(this,null,function*(){const F=v(e,l,y),N=r(F,i,g,y,O),m=yield o.default.get(N);return new a.WFS({}).readFeatures(m.data)})}},3958:function(C,K,h){var d=Object.defineProperty,b=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,L=Object.prototype.hasOwnProperty,E=(t,o)=>{for(var s in o)d(t,s,{get:o[s],enumerable:!0})},T=(t,o,s,_)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of D(o))!L.call(t,a)&&a!==s&&d(t,a,{get:()=>o[a],enumerable:!(_=b(o,a))||_.enumerable});return t},I=t=>T(d({},"__esModule",{value:!0}),t),j={};E(j,{DbRangeConverter:()=>A,RegexConverter:()=>w,getConverter:()=>P}),C.exports=I(j);class w{constructor(o,s){this.regexp=new RegExp(o),this.extractor=s}convert(o){const s=this.regexp.exec(o);return s===null?null:this.extractor(s)}}class A{constructor(){this.interval=new w("> (\\d+) - (\\d+) dB\\(A\\)",o=>(parseFloat(o[1])+parseFloat(o[2]))/2),this.single=new w("> (\\d+) dB\\(A\\)",o=>parseFloat(o[1]))}convert(o){const s=this.interval.convert(o);return s===null?this.single.convert(o):s}}function P(t){switch(t){case"DbRangeConverter":return new A;default:throw Error(`unknown converter: ${t}`)}}}}]);
